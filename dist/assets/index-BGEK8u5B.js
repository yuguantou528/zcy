import{r as As,a as Ls,g as Fs}from"./vendor-BtP0CW_r.js";import{C as D,R as L,a as v,T as C,S as Le,b as h,L as re,A as Oe,c as oe,d as qs,e as ke,f as fe,g as Fe,h as Xe,i as Ge,j as Je,k as Os,l as xe,r as c,F as E,I as te,m as Ws,n as Ce,B as g,s as H,o as Bt,p as we,q as $t,t as lt,u as Se,v as Et,w as cs,x as De,P as ds,y as Hs,z as qe,D as Ie,E as Vs,G as K,H as Us,J as Ys,K as Zs,M as Ze,N as Ke,O as xs,Q as ee,U as _t,V as Nt,W as us,X as gt,Y as Ks,Z as Xs,_ as Gs,$ as ps,a0 as fs,a1 as hs,a2 as Js,a3 as Qs,a4 as Qe,a5 as en,a6 as le,a7 as jt,a8 as bt,a9 as Pt,aa as At,ab as Lt,ac as Ft,ad as tn,ae as sn,af as nn,ag as rn,ah as qt,ai as ln,aj as Ot,ak as wt,al as ze,am as W,an as Ct,ao as St,ap as Wt,aq as on,ar as an,as as cn,at as vt,au as dn,av as xn,aw as un,ax as pn,ay as fn,az as hn}from"./antd-_cl9g9pF.js";import{u as It,a as mn,R as yn,b as de,B as gn}from"./router-C6qt9u9_.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function x(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(o){if(o.ep)return;o.ep=!0;const a=x(o);fetch(o.href,a)}})();var ot={exports:{}},Te={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ht;function jn(){if(Ht)return Te;Ht=1;var s=As(),l=Symbol.for("react.element"),x=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(p,m,F){var z,O={},w=null,_=null;F!==void 0&&(w=""+F),m.key!==void 0&&(w=""+m.key),m.ref!==void 0&&(_=m.ref);for(z in m)d.call(m,z)&&!a.hasOwnProperty(z)&&(O[z]=m[z]);if(p&&p.defaultProps)for(z in m=p.defaultProps,m)O[z]===void 0&&(O[z]=m[z]);return{$$typeof:l,type:p,key:w,ref:_,props:O,_owner:o.current}}return Te.Fragment=x,Te.jsx=i,Te.jsxs=i,Te}var Vt;function bn(){return Vt||(Vt=1,ot.exports=jn()),ot.exports}var e=bn(),He={},Ut;function vn(){if(Ut)return He;Ut=1;var s=Ls();return He.createRoot=s.createRoot,He.hydrateRoot=s.hydrateRoot,He}var wn=vn(),Me={},at={exports:{}},Yt;function et(){return Yt||(Yt=1,function(s){function l(x){return x&&x.__esModule?x:{default:x}}s.exports=l,s.exports.__esModule=!0,s.exports.default=s.exports}(at)),at.exports}var Be={},Zt;function Cn(){if(Zt)return Be;Zt=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.default=void 0;var s={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};return Be.default=s,Be}var $e={},Ee={},_e={},ct={exports:{}},dt={exports:{}},xt={exports:{}},ut={exports:{}},Kt;function ms(){return Kt||(Kt=1,function(s){function l(x){"@babel/helpers - typeof";return s.exports=l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},s.exports.__esModule=!0,s.exports.default=s.exports,l(x)}s.exports=l,s.exports.__esModule=!0,s.exports.default=s.exports}(ut)),ut.exports}var pt={exports:{}},Xt;function Sn(){return Xt||(Xt=1,function(s){var l=ms().default;function x(d,o){if(l(d)!="object"||!d)return d;var a=d[Symbol.toPrimitive];if(a!==void 0){var i=a.call(d,o||"default");if(l(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(d)}s.exports=x,s.exports.__esModule=!0,s.exports.default=s.exports}(pt)),pt.exports}var Gt;function In(){return Gt||(Gt=1,function(s){var l=ms().default,x=Sn();function d(o){var a=x(o,"string");return l(a)=="symbol"?a:a+""}s.exports=d,s.exports.__esModule=!0,s.exports.default=s.exports}(xt)),xt.exports}var Jt;function kn(){return Jt||(Jt=1,function(s){var l=In();function x(d,o,a){return(o=l(o))in d?Object.defineProperty(d,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):d[o]=a,d}s.exports=x,s.exports.__esModule=!0,s.exports.default=s.exports}(dt)),dt.exports}var Qt;function zn(){return Qt||(Qt=1,function(s){var l=kn();function x(o,a){var i=Object.keys(o);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(o);a&&(p=p.filter(function(m){return Object.getOwnPropertyDescriptor(o,m).enumerable})),i.push.apply(i,p)}return i}function d(o){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?x(Object(i),!0).forEach(function(p){l(o,p,i[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach(function(p){Object.defineProperty(o,p,Object.getOwnPropertyDescriptor(i,p))})}return o}s.exports=d,s.exports.__esModule=!0,s.exports.default=s.exports}(ct)),ct.exports}var Ne={},es;function Rn(){return es||(es=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.commonLocale=void 0,Ne.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0}),Ne}var ts;function Dn(){if(ts)return _e;ts=1;var s=et().default;Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var l=s(zn()),x=Rn(),d=(0,l.default)((0,l.default)({},x.commonLocale),{},{locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",week:"周",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪",yearFormat:"YYYY年",cellDateFormat:"D",monthBeforeYear:!1});return _e.default=d,_e}var Pe={},ss;function ys(){if(ss)return Pe;ss=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.default=void 0;const s={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};return Pe.default=s,Pe}var ns;function gs(){if(ns)return Ee;ns=1;var s=et().default;Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.default=void 0;var l=s(Dn()),x=s(ys());const d={lang:Object.assign({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},l.default),timePickerLocale:Object.assign({},x.default)};return d.lang.ok="确定",Ee.default=d,Ee}var is;function Tn(){if(is)return $e;is=1;var s=et().default;Object.defineProperty($e,"__esModule",{value:!0}),$e.default=void 0;var l=s(gs());return $e.default=l.default,$e}var rs;function Mn(){if(rs)return Me;rs=1;var s=et().default;Object.defineProperty(Me,"__esModule",{value:!0}),Me.default=void 0;var l=s(Cn()),x=s(Tn()),d=s(gs()),o=s(ys());const a="${label}不是一个有效的${type}",i={locale:"zh-cn",Pagination:l.default,DatePicker:d.default,TimePicker:o.default,Calendar:x.default,global:{placeholder:"请选择",close:"关闭"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckAll:"全选",filterSearchPlaceholder:"在筛选项中搜索",emptyText:"暂无数据",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Tour:{Next:"下一步",Previous:"上一步",Finish:"结束导览"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{titles:["",""],searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",deselectAll:"取消全选",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开",collapse:"收起"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:a,method:a,array:a,object:a,number:a,date:a,boolean:a,integer:a,float:a,regexp:a,email:a,url:a,hex:a},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"},QRCode:{expired:"二维码过期",refresh:"点击刷新",scanned:"已扫描"},ColorPicker:{presetEmpty:"暂无",transparent:"无色",singleColor:"单色",gradientColor:"渐变色"}};return Me.default=i,Me}var ft,ls;function Bn(){return ls||(ls=1,ft=Mn()),ft}var $n=Bn();const En=Fs($n);function _n(s){return new Date(s).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}function Nn(s){const l=new Date,x=new Date(s),d=l.getTime()-x.getTime(),o=Math.floor(d/(1e3*60)),a=Math.floor(d/(1e3*60*60)),i=Math.floor(d/(1e3*60*60*24));return o<1?"刚刚":o<60?`${o}分钟前`:a<24?`${a}小时前`:i<7?`${i}天前`:_n(s)}function ge(s){return new Promise(l=>setTimeout(l,s))}const Pn=()=>{const s=It(),l={background:"#ffffff",borderRadius:"8px",boxShadow:"0 1px 4px rgba(0,21,41,.08)",border:"1px solid #f0f0f0",marginBottom:"16px"},x=[{title:"总用户数",value:1234,prefix:e.jsx(oe,{style:{color:"#52c41a"}}),suffix:e.jsx(qs,{style:{color:"#52c41a"}}),valueStyle:{color:"#52c41a"}},{title:"在线用户",value:89,prefix:e.jsx(ke,{style:{color:"#1890ff"}}),valueStyle:{color:"#1890ff"}},{title:"系统角色",value:12,prefix:e.jsx(fe,{style:{color:"#722ed1"}}),valueStyle:{color:"#722ed1"}},{title:"权限数量",value:45,prefix:e.jsx(Fe,{style:{color:"#fa8c16"}}),valueStyle:{color:"#fa8c16"}}],d=[{title:"用户管理",description:"管理系统用户信息",icon:e.jsx(oe,{style:{fontSize:"24px",color:"#1890ff"}}),path:"/system/users"},{title:"角色管理",description:"配置用户角色权限",icon:e.jsx(fe,{style:{fontSize:"24px",color:"#722ed1"}}),path:"/system/roles"},{title:"权限管理",description:"设置系统访问权限",icon:e.jsx(Fe,{style:{fontSize:"24px",color:"#fa8c16"}}),path:"/system/permissions"}],o=[{id:"1",user:"张三",action:"登录系统",type:"login",time:new Date(Date.now()-300*1e3).toISOString()},{id:"2",user:"李四",action:"编辑用户信息",type:"edit",time:new Date(Date.now()-900*1e3).toISOString()},{id:"3",user:"王五",action:"新增角色",type:"create",time:new Date(Date.now()-1800*1e3).toISOString()},{id:"4",user:"赵六",action:"删除权限",type:"delete",time:new Date(Date.now()-2700*1e3).toISOString()},{id:"5",user:"钱七",action:"登录系统",type:"login",time:new Date(Date.now()-3600*1e3).toISOString()}],a=i=>{const m={login:{color:"blue",icon:e.jsx(Os,{})},edit:{color:"orange",icon:e.jsx(Je,{})},create:{color:"green",icon:e.jsx(Ge,{})},delete:{color:"red",icon:e.jsx(Xe,{})}}[i]||{color:"default",icon:null};return e.jsx(C,{color:m.color,icon:m.icon,children:i==="login"?"登录":i==="edit"?"编辑":i==="create"?"新增":"删除"})};return e.jsxs("div",{style:{background:"transparent"},children:[" ",e.jsx(D,{style:l,children:e.jsxs(L,{align:"middle",children:[e.jsxs(v,{flex:"auto",children:[e.jsx("h2",{style:{margin:0,color:"#262626"},children:"欢迎回来，管理员！"}),e.jsxs("p",{style:{margin:"8px 0 0 0",color:"#8c8c8c"},children:["今天是 ",new Date().toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"}),"，系统运行正常"]})]}),e.jsx(v,{children:e.jsx(C,{color:"success",children:"系统正常"})})]})}),e.jsx(L,{gutter:[16,16],style:{marginBottom:"16px"},children:x.map((i,p)=>e.jsx(v,{xs:24,sm:12,lg:6,children:e.jsx(D,{style:l,children:e.jsx(Le,{title:i.title,value:i.value,prefix:i.prefix,suffix:i.suffix,valueStyle:i.valueStyle})})},p))}),e.jsxs(L,{gutter:[16,16],style:{display:"flex",alignItems:"stretch",marginBottom:"16px"},children:[e.jsx(v,{xs:24,lg:12,style:{display:"flex"},children:e.jsx(D,{title:"快捷操作",style:{width:"100%",display:"flex",flexDirection:"column",...l},bodyStyle:{flex:1,display:"flex",flexDirection:"column"},children:e.jsx(L,{gutter:[16,16],children:d.map((i,p)=>e.jsx(v,{span:24,children:e.jsx(D,{hoverable:!0,style:{cursor:"pointer"},bodyStyle:{padding:"16px"},onClick:()=>s(i.path),children:e.jsxs(h,{children:[i.icon,e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,marginBottom:"4px"},children:i.title}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"12px"},children:i.description})]})]})})},p))})})}),e.jsx(v,{xs:24,lg:12,style:{display:"flex"},children:e.jsx(D,{title:"最近活动",style:{width:"100%",display:"flex",flexDirection:"column",...l},bodyStyle:{flex:1,display:"flex",flexDirection:"column"},children:e.jsx(re,{dataSource:o,renderItem:i=>e.jsx(re.Item,{children:e.jsx(re.Item.Meta,{avatar:e.jsx(Oe,{icon:e.jsx(oe,{})}),title:e.jsxs(h,{children:[e.jsx("span",{children:i.user}),a(i.type)]}),description:e.jsxs(h,{children:[e.jsx("span",{children:i.action}),e.jsx("span",{style:{color:"#8c8c8c"},children:Nn(i.time)})]})})})})})})]}),e.jsxs(L,{gutter:[16,16],children:[e.jsx(v,{xs:24,md:8,children:e.jsx(D,{title:"系统状态",style:l,children:e.jsxs(h,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"CPU使用率"}),e.jsx(C,{color:"green",children:"23%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"内存使用率"}),e.jsx(C,{color:"blue",children:"45%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"磁盘使用率"}),e.jsx(C,{color:"orange",children:"67%"})]})]})})}),e.jsx(v,{xs:24,md:8,children:e.jsx(D,{title:"访问统计",style:l,children:e.jsxs(h,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"今日访问"}),e.jsx("span",{style:{fontWeight:500},children:"1,234"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"本周访问"}),e.jsx("span",{style:{fontWeight:500},children:"8,567"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"本月访问"}),e.jsx("span",{style:{fontWeight:500},children:"34,890"})]})]})})}),e.jsx(v,{xs:24,md:8,children:e.jsx(D,{title:"系统信息",style:l,children:e.jsxs(h,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"系统版本"}),e.jsx("span",{children:"v1.0.0"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"运行时间"}),e.jsx("span",{children:"15天"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"最后更新"}),e.jsx("span",{children:"2024-08-09"})]})]})})})]})]})},{Title:An,Text:Ve}=xe,os=({onLogin:s})=>{const[l,x]=c.useState(!1),[d]=E.useForm(),o=async a=>{x(!0);try{await ge(1e3),a.username==="admin"&&a.password==="123456"?(H.success("登录成功！"),s()):H.error("用户名或密码错误！")}catch{H.error("登录失败，请重试！")}finally{x(!1)}};return e.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:e.jsxs(D,{style:{width:400,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",borderRadius:"8px"},bodyStyle:{padding:"40px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx(An,{level:2,style:{color:"#1890ff",marginBottom:"8px"},children:"管理系统"}),e.jsx(Ve,{type:"secondary",children:"请输入您的账号信息"})]}),e.jsxs(E,{form:d,name:"login",initialValues:{username:"admin",password:"123456",remember:!0},onFinish:o,size:"large",autoComplete:"off",children:[e.jsx(E.Item,{name:"username",rules:[{required:!0,message:"请输入用户名！"},{min:2,message:"用户名至少2个字符！"},{max:20,message:"用户名最多20个字符！"}],children:e.jsx(te,{prefix:e.jsx(oe,{}),placeholder:"用户名"})}),e.jsx(E.Item,{name:"password",rules:[{required:!0,message:"请输入密码！"},{min:6,message:"密码至少6个字符！"},{max:20,message:"密码最多20个字符！"}],children:e.jsx(te.Password,{prefix:e.jsx(Ws,{}),placeholder:"密码"})}),e.jsx(E.Item,{name:"remember",valuePropName:"checked",children:e.jsx(Ce,{children:"记住密码"})}),e.jsx(E.Item,{children:e.jsx(g,{type:"primary",htmlType:"submit",loading:l,style:{width:"100%",height:"40px"},children:l?"登录中...":"登录"})})]}),e.jsxs("div",{style:{marginTop:"24px",padding:"16px",background:"#f0f2f5",borderRadius:"6px"},children:[e.jsx(Ve,{strong:!0,style:{display:"block",marginBottom:"8px"},children:"测试账号信息："}),e.jsxs(h,{direction:"vertical",size:4,children:[e.jsx(Ve,{type:"secondary",children:"用户名: admin"}),e.jsx(Ve,{type:"secondary",children:"密码: 123456"})]})]})]})})},{Title:ht}=xe,Ln=()=>{const[s,l]=c.useState(new Date),[x,d]=c.useState({environment:!1,ships:!1,alerts:!1,emergency:!1,statistics:!1});c.useEffect(()=>{const f=setInterval(()=>{l(new Date)},1e3);return()=>clearInterval(f)},[]);const o=f=>{d(B=>({...B,[f]:!B[f]}))},a=f=>{d(B=>({...B,[f]:!1}))},i=[{label:"水质指数",value:85,unit:"WQI",status:"good",color:"#52c41a"},{label:"水温",value:24.5,unit:"°C",status:"normal",color:"#1890ff"},{label:"盐度",value:35.2,unit:"PSU",status:"normal",color:"#722ed1"},{label:"溶解氧",value:7.8,unit:"mg/L",status:"good",color:"#52c41a"},{label:"风速",value:12.3,unit:"m/s",status:"warning",color:"#faad14"},{label:"浪高",value:2.1,unit:"m",status:"normal",color:"#1890ff"}],p=[{type:"货船",count:45,color:"#1890ff"},{type:"客船",count:12,color:"#52c41a"},{type:"渔船",count:28,color:"#faad14"},{type:"军舰",count:8,color:"#f5222d"},{type:"其他",count:15,color:"#722ed1"}],m=[{id:1,type:"海洋污染",level:"warning",message:"东海区域检测到油污泄漏",time:"10:30"},{id:2,type:"非法捕捞",level:"danger",message:"禁渔区发现非法作业船只",time:"09:45"},{id:3,type:"船舶偏航",level:"info",message:'货船"海运001"偏离预定航线',time:"09:20"},{id:4,type:"气象预警",level:"warning",message:"预计12小时后有强风暴",time:"08:55"}],F=[{name:"救援船只",total:15,available:12,inUse:3},{name:"救援飞机",total:8,available:6,inUse:2},{name:"救援人员",total:120,available:95,inUse:25},{name:"应急物资",total:500,available:420,inUse:80}],z=[{title:"监控设备",value:156,unit:"台",icon:e.jsx(Ie,{}),color:"#1890ff"},{title:"在线船舶",value:108,unit:"艘",icon:e.jsx(lt,{}),color:"#52c41a"},{title:"预警事件",value:4,unit:"起",icon:e.jsx(Se,{}),color:"#faad14"},{title:"应急资源",value:643,unit:"项",icon:e.jsx(fe,{}),color:"#722ed1"}],O=f=>({danger:"#ff4d4f",warning:"#faad14",info:"#1890ff"})[f]||"#1890ff",w=f=>({danger:e.jsx(Vs,{}),warning:e.jsx(Se,{}),info:e.jsx(qe,{})})[f]||e.jsx(qe,{}),_={position:"absolute",background:"rgba(15, 20, 25, 0.95)",border:"1px solid rgba(64, 169, 255, 0.5)",borderRadius:"8px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",backdropFilter:"blur(10px)",zIndex:1e3,maxHeight:"400px",overflow:"auto"};return e.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)",position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"20px 0",background:"rgba(0, 0, 0, 0.3)",borderBottom:"1px solid rgba(64, 169, 255, 0.3)"},children:[e.jsx(ht,{level:2,style:{color:"#ffffff",margin:0},children:"海洋监控数据中心大屏"}),e.jsx(xe.Text,{style:{color:"#8c8c8c",fontSize:"14px"},children:s.toLocaleString("zh-CN")})]}),e.jsxs(L,{gutter:[16,16],style:{padding:"20px",height:"calc(100vh - 120px)"},children:[e.jsx(v,{xs:24,lg:6,children:e.jsx(D,{title:"海域态势总览",style:{height:"100%",background:"rgba(15, 20, 25, 0.8)",border:"1px solid rgba(64, 169, 255, 0.3)"},headStyle:{color:"#ffffff",borderBottom:"1px solid rgba(64, 169, 255, 0.3)"},bodyStyle:{color:"#ffffff"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},children:[e.jsx(Bt,{style:{fontSize:"48px",color:"#40a9ff",marginBottom:"16px"}}),e.jsx(ht,{level:4,style:{color:"#40a9ff",margin:"8px 0"},children:"海域态势总览"}),e.jsx(xe.Text,{style:{color:"#8c8c8c",fontSize:"14px"},children:"与实时监控"}),e.jsx(xe.Text,{style:{color:"#8c8c8c",fontSize:"12px",marginTop:"8px"},children:"实时监控海域动态、船舶、海洋环境数据，为海洋管理提供全面的态势感知能力"})]})})}),e.jsx(v,{xs:24,lg:12,children:e.jsx(D,{style:{height:"100%",background:"rgba(15, 20, 25, 0.8)",border:"1px solid rgba(64, 169, 255, 0.3)"},bodyStyle:{padding:0,display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsxs("div",{style:{width:"200px",height:"200px",background:"rgba(64, 169, 255, 0.1)",border:"2px solid #40a9ff",borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:[e.jsx(Bt,{style:{fontSize:"60px",color:"#40a9ff",marginBottom:"10px"}}),e.jsx(ht,{level:3,style:{color:"#40a9ff",margin:0},children:"海域态势总览"}),e.jsx(xe.Text,{style:{color:"#8c8c8c",fontSize:"14px"},children:"与实时监控"})]}),e.jsx(xe.Text,{style:{color:"#8c8c8c",fontSize:"14px"},children:"实时监控海域动态、船舶、海洋环境数据，为海洋管理提供全面的态势感知能力"})]})})}),e.jsx(v,{xs:24,lg:6,children:e.jsxs(h,{direction:"vertical",style:{width:"100%",height:"100%"},size:"middle",children:[e.jsx(D,{title:"实时监控",size:"small",style:{background:"rgba(15, 20, 25, 0.8)",border:"1px solid rgba(64, 169, 255, 0.3)"},headStyle:{color:"#ffffff",borderBottom:"1px solid rgba(64, 169, 255, 0.3)"},bodyStyle:{color:"#ffffff"},children:e.jsx(Le,{title:"在线设备",value:156,suffix:"台",valueStyle:{color:"#52c41a"}})}),e.jsx(D,{title:"船舶统计",size:"small",style:{background:"rgba(15, 20, 25, 0.8)",border:"1px solid rgba(64, 169, 255, 0.3)"},headStyle:{color:"#ffffff",borderBottom:"1px solid rgba(64, 169, 255, 0.3)"},bodyStyle:{color:"#ffffff"},children:e.jsx(Le,{title:"在线船舶",value:108,suffix:"艘",valueStyle:{color:"#1890ff"}})}),e.jsx(D,{title:"预警状态",size:"small",style:{background:"rgba(15, 20, 25, 0.8)",border:"1px solid rgba(64, 169, 255, 0.3)"},headStyle:{color:"#ffffff",borderBottom:"1px solid rgba(64, 169, 255, 0.3)"},bodyStyle:{color:"#ffffff"},children:e.jsx(Le,{title:"预警事件",value:4,suffix:"起",valueStyle:{color:"#faad14"}})})]})})]}),e.jsxs(we.Group,{trigger:"click",type:"primary",style:{right:24,bottom:24},icon:e.jsx(cs,{}),children:[e.jsx(we,{icon:e.jsx($t,{}),tooltip:"环境数据监测",onClick:()=>o("environment")}),e.jsx(we,{icon:e.jsx(lt,{}),tooltip:"船舶动态统计",onClick:()=>o("ships")}),e.jsx(we,{icon:e.jsx(Se,{}),tooltip:"预警告警中心",onClick:()=>o("alerts")}),e.jsx(we,{icon:e.jsx(fe,{}),tooltip:"应急资源调度",onClick:()=>o("emergency")}),e.jsx(we,{icon:e.jsx(Et,{}),tooltip:"数据统计概览",onClick:()=>o("statistics")})]}),x.environment&&e.jsxs("div",{style:{..._,top:"80px",left:"20px",width:"320px"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(64, 169, 255, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{children:[e.jsx($t,{style:{color:"#40a9ff"}}),e.jsx("span",{style:{color:"#ffffff",fontWeight:"bold"},children:"环境数据实时监测"})]}),e.jsx(g,{type:"text",size:"small",icon:e.jsx(De,{}),onClick:()=>a("environment"),style:{color:"#8c8c8c"}})]}),e.jsx("div",{style:{padding:"16px"},children:e.jsx(L,{gutter:[8,8],children:i.map((f,B)=>e.jsx(v,{span:12,children:e.jsxs("div",{style:{textAlign:"center",padding:"8px",background:"rgba(64, 169, 255, 0.1)",borderRadius:"4px",border:`1px solid ${f.color}`},children:[e.jsx("div",{style:{color:f.color,fontSize:"16px",fontWeight:"bold"},children:f.value}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"11px"},children:f.label}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"10px"},children:f.unit})]})},B))})})]}),x.ships&&e.jsxs("div",{style:{..._,top:"80px",right:"20px",width:"280px"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(64, 169, 255, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{children:[e.jsx(lt,{style:{color:"#40a9ff"}}),e.jsx("span",{style:{color:"#ffffff",fontWeight:"bold"},children:"船舶动态统计"})]}),e.jsx(g,{type:"text",size:"small",icon:e.jsx(De,{}),onClick:()=>a("ships"),style:{color:"#8c8c8c"}})]}),e.jsx("div",{style:{padding:"16px"},children:e.jsx(h,{direction:"vertical",style:{width:"100%"},size:"middle",children:p.map((f,B)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",background:"rgba(64, 169, 255, 0.1)",borderRadius:"4px"},children:[e.jsxs(h,{children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:f.color}}),e.jsx("span",{style:{color:"#ffffff"},children:f.type})]}),e.jsxs("span",{style:{color:f.color,fontWeight:"bold"},children:[f.count,"艘"]})]},B))})})]}),x.alerts&&e.jsxs("div",{style:{..._,bottom:"120px",left:"20px",width:"350px"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(64, 169, 255, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{children:[e.jsx(Se,{style:{color:"#faad14"}}),e.jsx("span",{style:{color:"#ffffff",fontWeight:"bold"},children:"预警告警中心"})]}),e.jsx(g,{type:"text",size:"small",icon:e.jsx(De,{}),onClick:()=>a("alerts"),style:{color:"#8c8c8c"}})]}),e.jsx("div",{style:{padding:"16px"},children:e.jsx(re,{dataSource:m,renderItem:f=>e.jsx(re.Item,{style:{border:"none",padding:"8px 0"},children:e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[e.jsxs(h,{children:[w(f.level),e.jsx(C,{color:O(f.level),style:{margin:0},children:f.type})]}),e.jsx(xe.Text,{style:{color:"#8c8c8c",fontSize:"12px"},children:f.time})]}),e.jsx(xe.Text,{style:{color:"#ffffff",fontSize:"12px"},children:f.message})]})})})})]}),x.emergency&&e.jsxs("div",{style:{..._,bottom:"120px",right:"20px",width:"320px"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(64, 169, 255, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{children:[e.jsx(fe,{style:{color:"#52c41a"}}),e.jsx("span",{style:{color:"#ffffff",fontWeight:"bold"},children:"应急资源调度"})]}),e.jsx(g,{type:"text",size:"small",icon:e.jsx(De,{}),onClick:()=>a("emergency"),style:{color:"#8c8c8c"}})]}),e.jsxs("div",{style:{padding:"16px"},children:[e.jsx(h,{direction:"vertical",style:{width:"100%"},size:"middle",children:F.map((f,B)=>e.jsxs("div",{style:{padding:"12px",background:"rgba(64, 169, 255, 0.1)",borderRadius:"4px",border:"1px solid rgba(82, 196, 26, 0.3)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{color:"#ffffff",fontWeight:"bold"},children:f.name}),e.jsxs("span",{style:{color:"#52c41a"},children:[f.available,"/",f.total]})]}),e.jsx(ds,{percent:Math.round(f.available/f.total*100),strokeColor:"#52c41a",trailColor:"rgba(255, 255, 255, 0.1)",size:"small"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px",fontSize:"12px"},children:[e.jsxs("span",{style:{color:"#52c41a"},children:["可用: ",f.available]}),e.jsxs("span",{style:{color:"#faad14"},children:["使用中: ",f.inUse]})]})]},B))}),e.jsxs("div",{style:{marginTop:"16px",textAlign:"center"},children:[e.jsx(g,{type:"primary",icon:e.jsx(Hs,{}),style:{marginRight:"8px"},size:"small",children:"应急通讯"}),e.jsx(g,{icon:e.jsx(ke,{}),size:"small",children:"指挥调度"})]})]})]}),x.statistics&&e.jsxs("div",{style:{..._,top:"50px",right:"300px",width:"280px"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(64, 169, 255, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{children:[e.jsx(Et,{style:{color:"#722ed1"}}),e.jsx("span",{style:{color:"#ffffff",fontWeight:"bold"},children:"数据统计概览"})]}),e.jsx(g,{type:"text",size:"small",icon:e.jsx(De,{}),onClick:()=>a("statistics"),style:{color:"#8c8c8c"}})]}),e.jsxs("div",{style:{padding:"16px"},children:[e.jsx(L,{gutter:[8,8],style:{marginBottom:"16px"},children:z.map((f,B)=>e.jsx(v,{span:12,children:e.jsxs("div",{style:{textAlign:"center",padding:"8px",background:"rgba(64, 169, 255, 0.1)",borderRadius:"4px",border:`1px solid ${f.color}`},children:[e.jsx("div",{style:{color:f.color,fontSize:"14px",marginBottom:"4px"},children:f.icon}),e.jsx("div",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"bold"},children:f.value}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"10px"},children:f.title})]})},B))}),e.jsxs(h,{direction:"vertical",style:{width:"100%"},size:"small",children:[e.jsxs("div",{style:{padding:"8px",background:"rgba(64, 169, 255, 0.1)",borderRadius:"4px",textAlign:"center"},children:[e.jsx("div",{style:{color:"#722ed1",fontSize:"18px",fontWeight:"bold"},children:"98.5%"}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"11px"},children:"设备在线率"})]}),e.jsxs("div",{style:{padding:"8px",background:"rgba(64, 169, 255, 0.1)",borderRadius:"4px",textAlign:"center"},children:[e.jsx("div",{style:{color:"#1890ff",fontSize:"18px",fontWeight:"bold"},children:"24h"}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"11px"},children:"连续监控时长"})]}),e.jsxs("div",{style:{padding:"8px",background:"rgba(64, 169, 255, 0.1)",borderRadius:"4px",textAlign:"center"},children:[e.jsx("div",{style:{color:"#52c41a",fontSize:"18px",fontWeight:"bold"},children:"99.2%"}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"11px"},children:"数据准确率"})]})]})]})]})]})},js={background:"#fff",borderRadius:8,boxShadow:"0 1px 4px rgba(0,21,41,.08)",border:"1px solid #f0f0f0"},Ue={...js,marginBottom:12},Fn={...js,marginBottom:8},qn=[{id:"c1",name:"主入口监控",location:"大厅入口",status:"online",resolution:"1920x1080",fps:30,recording:!0,stream:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"},{id:"c2",name:"办公区域监控",location:"办公区A",status:"online",resolution:"1920x1080",fps:25,recording:!1,stream:"https://www.w3schools.com/html/mov_bbb.mp4"},{id:"c3",name:"服务器机房",location:"机房B区",status:"online",resolution:"2560x1440",fps:30,recording:!0},{id:"c4",name:"地下停车场",location:"B2层",status:"offline",resolution:"1920x1080",fps:0,recording:!1},{id:"c5",name:"会议室监控",location:"会议室301",status:"online",resolution:"1920x1080",fps:30,recording:!1},{id:"c6",name:"安全通道",location:"紧急出口",status:"warning",resolution:"1280x720",fps:15,recording:!0}],mt=s=>s==="online"?{color:"#52c41a",text:"在线",badge:"success",icon:e.jsx(qe,{})}:s==="offline"?{color:"#ff4d4f",text:"离线",badge:"error",icon:e.jsx(ps,{})}:{color:"#faad14",text:"异常",badge:"warning",icon:e.jsx(fs,{})},On=()=>{const[s,l]=c.useState(qn),[x,d]=c.useState("c1"),[o,a]=c.useState(!1),[i,p]=c.useState(new Date),[m,F]=c.useState(""),[z,O]=c.useState("all"),[w,_]=c.useState("single"),f=c.useRef(null),B=c.useRef(null),j=c.useMemo(()=>s.find(u=>u.id===x),[s,x]);c.useEffect(()=>{const u=setInterval(()=>p(new Date),1e3);return()=>clearInterval(u)},[]),c.useEffect(()=>{const u=setInterval(()=>{l(b=>{const M=Math.floor(Math.random()*b.length),y=b[M],r=Math.random(),I={...y,status:r<.05?"offline":r<.15?"warning":"online",fps:y.status==="offline"?0:Math.max(12,Math.min(35,y.fps+(Math.random()>.5?1:-1)))},V=[...b];return V[M]=I,V})},5e3);return()=>clearInterval(u)},[]);const X=c.useMemo(()=>{const u=s.filter(r=>r.status==="online").length,b=s.filter(r=>r.status==="offline").length,M=s.filter(r=>r.status==="warning").length,y=s.filter(r=>r.recording).length;return{online:u,offline:b,warning:M,recording:y,total:s.length}},[s]),ne=()=>l(u=>u.map(b=>b.id===x?{...b,recording:!b.recording}:b)),ae=()=>{var u;return(u=f.current)==null?void 0:u.play()},ie=()=>{var u;return(u=f.current)==null?void 0:u.pause()},ce=()=>a(u=>!u),Q=()=>{var u,b;return(b=(u=B.current)==null?void 0:u.requestFullscreen)==null?void 0:b.call(u)};return e.jsxs("div",{style:{background:"transparent",padding:"0 4px"},children:[e.jsx(D,{style:Fn,bodyStyle:{padding:"12px 16px"},children:e.jsxs(L,{align:"middle",justify:"space-between",gutter:[12,8],children:[e.jsx(v,{flex:"auto",children:e.jsxs(h,{size:12,children:[e.jsx(Ie,{style:{fontSize:20,color:"#1890ff"}}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,color:"#262626",fontSize:16,fontWeight:600},children:"视频监控中心"}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:11,marginTop:2},children:i.toLocaleString("zh-CN")})]})]})}),e.jsx(v,{children:e.jsxs(h,{wrap:!0,size:8,children:[e.jsx(te.Search,{allowClear:!0,placeholder:"搜索摄像头",onSearch:F,style:{width:180},size:"small"}),e.jsx(K,{size:"small",value:z,style:{width:100},onChange:u=>O(u),options:[{label:"全部",value:"all"},{label:"在线",value:"online"},{label:"离线",value:"offline"},{label:"异常",value:"warning"}]}),e.jsx(Us,{size:"small",options:[{label:"单画面",value:"single",icon:e.jsx(Ys,{})},{label:"四宫格",value:"quad",icon:e.jsx(Zs,{})}],value:w,onChange:u=>_(u)}),e.jsx(C,{color:j!=null&&j.recording?"red":"default",style:{margin:0},children:j!=null&&j.recording?"REC":"未录制"}),e.jsx(g,{icon:e.jsx(Ze,{}),size:"small",children:"设置"})]})})]})}),e.jsx(D,{style:Ue,bodyStyle:{padding:"12px 16px"},children:e.jsx(L,{gutter:[16,0],children:[{t:"在线",v:X.online,c:"#52c41a"},{t:"录制",v:X.recording,c:"#1890ff"},{t:"离线",v:X.offline,c:"#ff4d4f"},{t:"异常",v:X.warning,c:"#faad14"}].map((u,b)=>e.jsx(v,{xs:12,sm:6,children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:20,fontWeight:600,color:u.c,lineHeight:1.2},children:[u.v,e.jsxs("span",{style:{fontSize:12,color:"#8c8c8c",fontWeight:400},children:["/",X.total]})]}),e.jsx("div",{style:{fontSize:12,color:"#8c8c8c",marginTop:2},children:u.t}),e.jsx(ds,{percent:Math.round(u.v/(X.total||1)*100),size:"small",showInfo:!1,style:{marginTop:4},strokeColor:u.c})]})},b))})}),e.jsxs(L,{gutter:[12,12],children:[e.jsx(v,{xs:24,lg:7,children:e.jsx(D,{style:Ue,title:e.jsxs(h,{size:8,children:[e.jsx(xs,{style:{fontSize:14}}),"摄像头列表",e.jsx(Ke,{count:X.online,showZero:!0,size:"small"})]}),bodyStyle:{padding:"8px 0"},headStyle:{padding:"8px 16px",minHeight:"auto"},children:e.jsx(re,{size:"small",dataSource:s.filter(u=>(z==="all"||u.status===z)&&(!m||u.name.includes(m)||u.location.includes(m))),renderItem:u=>{const b=mt(u.status);return e.jsx(re.Item,{onClick:()=>d(u.id),style:{cursor:"pointer",background:x===u.id?"#e6f7ff":"transparent",borderRadius:4,padding:"6px 16px",margin:"0 8px 4px 8px",border:x===u.id?"1px solid #91d5ff":"1px solid transparent"},children:e.jsx(re.Item.Meta,{avatar:e.jsx(Ke,{status:b.badge,dot:!0,size:"small",children:e.jsx(Oe,{size:"small",icon:e.jsx(Ie,{})})}),title:e.jsx("div",{style:{fontSize:13,fontWeight:500,lineHeight:1.3},children:e.jsxs(h,{size:4,children:[u.name,u.recording&&e.jsx(C,{color:"red",style:{fontSize:10,padding:"0 4px",lineHeight:"16px"},children:"REC"})]})}),description:e.jsxs("div",{style:{fontSize:11,lineHeight:1.2,marginTop:2},children:[e.jsx("div",{style:{color:"#8c8c8c",marginBottom:2},children:u.location}),e.jsxs(h,{size:4,wrap:!0,children:[e.jsx(C,{color:b.color,style:{fontSize:10,padding:"0 4px",lineHeight:"16px"},children:b.text}),e.jsx(C,{style:{fontSize:10,padding:"0 4px",lineHeight:"16px"},children:u.resolution}),u.status==="online"&&e.jsxs(C,{style:{fontSize:10,padding:"0 4px",lineHeight:"16px"},children:[u.fps,"fps"]})]})]})})})}})})}),e.jsx(v,{xs:24,lg:17,children:e.jsxs(h,{direction:"vertical",size:8,style:{width:"100%"},children:[e.jsx(D,{style:Ue,title:e.jsxs(h,{size:8,children:[e.jsx(gt,{style:{fontSize:14}}),e.jsx("span",{style:{fontSize:14,fontWeight:500},children:(j==null?void 0:j.name)||"选择摄像头"}),e.jsx(K,{size:"small",value:x,onChange:d,style:{width:160,fontSize:12},options:s.map(u=>({value:u.id,label:u.name}))})]}),extra:e.jsxs(h,{size:4,children:[e.jsx(g,{size:"small",icon:e.jsx(_t,{}),onClick:ae,children:"播放"}),e.jsx(g,{size:"small",icon:e.jsx(Nt,{}),onClick:ie,children:"暂停"}),e.jsx(g,{size:"small",icon:e.jsx(us,{}),onClick:Q,children:"全屏"})]}),bodyStyle:{padding:8},headStyle:{padding:"8px 16px",minHeight:"auto"},children:e.jsx("div",{ref:B,style:{width:"100%",height:w==="single"?"calc(100vh - 320px)":"calc(100vh - 280px)",minHeight:360,background:"#000",borderRadius:4,position:"relative",padding:w==="single"?0:8},children:w==="single"?e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[(j==null?void 0:j.status)==="online"?j!=null&&j.stream?e.jsx("video",{ref:f,src:j.stream,style:{width:"100%",height:"100%",objectFit:"cover"},muted:o,controls:!0}):e.jsxs("div",{style:{color:"#fff",textAlign:"center"},children:[e.jsx(Ie,{style:{fontSize:48,marginBottom:16}}),e.jsx("div",{children:"实时视频流"}),e.jsxs("div",{style:{fontSize:12,opacity:.7,marginTop:8},children:[j==null?void 0:j.resolution," @ ",j==null?void 0:j.fps,"fps"]})]}):e.jsxs("div",{style:{color:"#8c8c8c",textAlign:"center"},children:[e.jsx(Se,{style:{fontSize:48,marginBottom:16}}),e.jsx("div",{children:"摄像头离线或异常"})]}),(j==null?void 0:j.recording)&&e.jsx("div",{style:{position:"absolute",top:16,right:16,background:"rgba(255,77,79,.9)",color:"#fff",padding:"2px 8px",borderRadius:4,fontSize:12},children:"REC 录制中"})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"1fr 1fr",gap:8,height:"100%"},children:s.slice(0,4).map(u=>e.jsxs("div",{style:{position:"relative",background:"#111",borderRadius:4,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:[u.status==="online"?e.jsxs("div",{style:{color:"#fff",textAlign:"center"},children:[e.jsx(Ie,{style:{fontSize:32,marginBottom:8}}),e.jsx("div",{style:{fontSize:12,opacity:.7},children:u.name})]}):e.jsxs("div",{style:{color:"#666",textAlign:"center"},children:[e.jsx(Se,{style:{fontSize:28,marginBottom:8}}),e.jsx("div",{style:{fontSize:12},children:"离线/异常"})]}),e.jsx("div",{style:{position:"absolute",left:8,top:8,color:"#fff",fontSize:12,background:"rgba(0,0,0,.25)",padding:"2px 6px",borderRadius:4},children:u.name}),e.jsx("div",{style:{position:"absolute",right:8,bottom:8},children:e.jsx(h,{children:e.jsx(ee,{title:"切换到此摄像头",children:e.jsx(g,{size:"small",onClick:()=>{d(u.id),_("single")},children:"查看"})})})})]},u.id))})})}),e.jsx(D,{style:Ue,title:e.jsxs(h,{size:8,children:[e.jsx(Ze,{style:{fontSize:14}}),"控制面板"]}),bodyStyle:{padding:"12px 16px"},headStyle:{padding:"8px 16px",minHeight:"auto"},children:e.jsxs(L,{gutter:[16,8],align:"middle",children:[e.jsx(v,{xs:24,sm:14,children:e.jsxs(h,{size:12,wrap:!0,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:12,color:"#8c8c8c"},children:"录制:"}),e.jsx(Ks,{size:"small",checked:!!(j!=null&&j.recording),onChange:ne,checkedChildren:"ON",unCheckedChildren:"OFF"})]}),e.jsxs(h,{size:6,children:[e.jsx(g,{size:"small",icon:e.jsx(_t,{}),type:"primary",onClick:ae,children:"播放"}),e.jsx(g,{size:"small",icon:e.jsx(Nt,{}),onClick:ie,children:"暂停"}),e.jsx(g,{size:"small",icon:o?e.jsx(Xs,{}):e.jsx(Gs,{}),onClick:ce,children:o?"取消静音":"静音"})]})]})}),e.jsx(v,{xs:24,sm:10,children:j&&e.jsxs("div",{style:{fontSize:11,color:"#8c8c8c",lineHeight:1.4},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"位置:"})," ",j.location]}),e.jsxs("div",{children:[e.jsx("strong",{children:"分辨率:"})," ",j.resolution," | ",e.jsx("strong",{children:"帧率:"})," ",j.fps,"fps"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"状态:"})," ",e.jsx("span",{style:{color:mt(j.status).color},children:mt(j.status).text})]})]})})]})})]})})]})]})},Wn=[{id:"c1",name:"华为技术有限公司",type:"enterprise",contact:"张经理",email:"zhang@huawei.com",deviceCount:18,status:"active",createTime:"2024-01-15"},{id:"c2",name:"北京大学",type:"education",contact:"陈教授",email:"chen@pku.edu.cn",deviceCount:18,status:"active",createTime:"2024-01-20"}],Hn=[{id:"topo-c1-1",name:"总部网络拓扑",customerId:"c1",description:"华为总部办公楼网络拓扑图",createTime:"2024-01-15",layoutPreference:"hierarchy",labelMode:"latency",nodes:[{id:"c1-t1-n1",name:"总部-网关A",type:"gateway",status:"online",mac:"AA:BB:CC:DD:EE:01",ip:"192.168.1.1",links:["c1-t1-n2","c1-t1-n3"],x:300,y:200,rssi:-45,customerId:"c1"},{id:"c1-t1-n2",name:"总部-中继1",type:"relay",status:"online",mac:"AA:BB:CC:DD:EE:02",ip:"192.168.1.2",links:["c1-t1-n1","c1-t1-n4"],x:520,y:240,rssi:-60,customerId:"c1"},{id:"c1-t1-n3",name:"总部-中继2",type:"relay",status:"warning",mac:"AA:BB:CC:DD:EE:03",ip:"192.168.1.3",links:["c1-t1-n1","c1-t1-n5"],x:280,y:380,rssi:-72,customerId:"c1"},{id:"c1-t1-n4",name:"总部-终端1",type:"terminal",status:"online",mac:"AA:BB:CC:DD:EE:11",ip:"192.168.1.11",links:["c1-t1-n2"],x:720,y:180,rssi:-55,customerId:"c1"},{id:"c1-t1-n5",name:"总部-终端2",type:"terminal",status:"online",mac:"AA:BB:CC:DD:EE:12",ip:"192.168.1.12",links:["c1-t1-n3"],x:220,y:520,rssi:-68,customerId:"c1"}],links:[{id:"c1-t1-l1",source:"c1-t1-n1",target:"c1-t1-n2",bandwidth:48,latency:8,distance:35,rssi:-58,customerId:"c1"},{id:"c1-t1-l2",source:"c1-t1-n1",target:"c1-t1-n3",bandwidth:22,latency:15,distance:48,rssi:-68,customerId:"c1"},{id:"c1-t1-l3",source:"c1-t1-n2",target:"c1-t1-n4",bandwidth:36,latency:10,distance:28,rssi:-54,customerId:"c1"},{id:"c1-t1-l4",source:"c1-t1-n3",target:"c1-t1-n5",bandwidth:18,latency:22,distance:56,rssi:-73,customerId:"c1"}]},{id:"topo-c1-2",name:"研发中心网络",customerId:"c1",description:"华为研发中心实验室网络",createTime:"2024-02-01",layoutPreference:"force",labelMode:"bandwidth",nodes:[{id:"c1-t2-n1",name:"研发-主网关",type:"gateway",status:"online",mac:"AA:BB:CC:DD:EE:21",ip:"192.168.2.1",links:["c1-t2-n2","c1-t2-n3"],x:400,y:250,rssi:-42,customerId:"c1"},{id:"c1-t2-n2",name:"研发-实验室中继",type:"relay",status:"online",mac:"AA:BB:CC:DD:EE:22",ip:"192.168.2.2",links:["c1-t2-n1","c1-t2-n4","c1-t2-n5"],x:200,y:150,rssi:-58,customerId:"c1"},{id:"c1-t2-n3",name:"研发-测试中继",type:"relay",status:"online",mac:"AA:BB:CC:DD:EE:23",ip:"192.168.2.3",links:["c1-t2-n1","c1-t2-n6"],x:600,y:150,rssi:-55,customerId:"c1"},{id:"c1-t2-n4",name:"研发-设备1",type:"terminal",status:"online",mac:"AA:BB:CC:DD:EE:31",ip:"192.168.2.11",links:["c1-t2-n2"],x:100,y:50,rssi:-65,customerId:"c1"},{id:"c1-t2-n5",name:"研发-设备2",type:"terminal",status:"online",mac:"AA:BB:CC:DD:EE:32",ip:"192.168.2.12",links:["c1-t2-n2"],x:150,y:300,rssi:-62,customerId:"c1"},{id:"c1-t2-n6",name:"研发-测试设备",type:"terminal",status:"warning",mac:"AA:BB:CC:DD:EE:33",ip:"192.168.2.13",links:["c1-t2-n3"],x:700,y:50,rssi:-78,customerId:"c1"}],links:[{id:"c1-t2-l1",source:"c1-t2-n1",target:"c1-t2-n2",bandwidth:52,latency:6,distance:28,rssi:-52,customerId:"c1"},{id:"c1-t2-l2",source:"c1-t2-n1",target:"c1-t2-n3",bandwidth:48,latency:7,distance:32,rssi:-54,customerId:"c1"},{id:"c1-t2-l3",source:"c1-t2-n2",target:"c1-t2-n4",bandwidth:30,latency:12,distance:45,rssi:-62,customerId:"c1"},{id:"c1-t2-l4",source:"c1-t2-n2",target:"c1-t2-n5",bandwidth:28,latency:14,distance:38,rssi:-60,customerId:"c1"},{id:"c1-t2-l5",source:"c1-t2-n3",target:"c1-t2-n6",bandwidth:15,latency:25,distance:55,rssi:-75,customerId:"c1"}]},{id:"topo-c1-3",name:"生产基地网络",customerId:"c1",description:"华为生产基地车间网络",createTime:"2024-02-15",layoutPreference:"hierarchy",labelMode:"rssi",nodes:[{id:"c1-t3-n1",name:"生产-核心网关",type:"gateway",status:"online",mac:"AA:BB:CC:DD:EE:41",ip:"192.168.3.1",links:["c1-t3-n2","c1-t3-n3","c1-t3-n4"],x:400,y:200,rssi:-38,customerId:"c1"},{id:"c1-t3-n2",name:"生产-车间1中继",type:"relay",status:"online",mac:"AA:BB:CC:DD:EE:42",ip:"192.168.3.2",links:["c1-t3-n1","c1-t3-n5","c1-t3-n6"],x:200,y:100,rssi:-52,customerId:"c1"},{id:"c1-t3-n3",name:"生产-车间2中继",type:"relay",status:"online",mac:"AA:BB:CC:DD:EE:43",ip:"192.168.3.3",links:["c1-t3-n1","c1-t3-n7","c1-t3-n8"],x:600,y:100,rssi:-50,customerId:"c1"},{id:"c1-t3-n4",name:"生产-质检中继",type:"relay",status:"warning",mac:"AA:BB:CC:DD:EE:44",ip:"192.168.3.4",links:["c1-t3-n1","c1-t3-n9"],x:400,y:400,rssi:-68,customerId:"c1"},{id:"c1-t3-n5",name:"生产-设备A",type:"terminal",status:"online",mac:"AA:BB:CC:DD:EE:51",ip:"192.168.3.11",links:["c1-t3-n2"],x:100,y:50,rssi:-58,customerId:"c1"},{id:"c1-t3-n6",name:"生产-设备B",type:"terminal",status:"online",mac:"AA:BB:CC:DD:EE:52",ip:"192.168.3.12",links:["c1-t3-n2"],x:250,y:50,rssi:-60,customerId:"c1"},{id:"c1-t3-n7",name:"生产-设备C",type:"terminal",status:"online",mac:"AA:BB:CC:DD:EE:53",ip:"192.168.3.13",links:["c1-t3-n3"],x:550,y:50,rssi:-56,customerId:"c1"},{id:"c1-t3-n8",name:"生产-设备D",type:"terminal",status:"offline",mac:"AA:BB:CC:DD:EE:54",ip:"192.168.3.14",links:["c1-t3-n3"],x:700,y:50,rssi:-88,customerId:"c1"},{id:"c1-t3-n9",name:"生产-质检设备",type:"terminal",status:"warning",mac:"AA:BB:CC:DD:EE:55",ip:"192.168.3.15",links:["c1-t3-n4"],x:400,y:500,rssi:-75,customerId:"c1"}],links:[{id:"c1-t3-l1",source:"c1-t3-n1",target:"c1-t3-n2",bandwidth:60,latency:4,distance:22,rssi:-48,customerId:"c1"},{id:"c1-t3-l2",source:"c1-t3-n1",target:"c1-t3-n3",bandwidth:58,latency:5,distance:24,rssi:-46,customerId:"c1"},{id:"c1-t3-l3",source:"c1-t3-n1",target:"c1-t3-n4",bandwidth:35,latency:18,distance:42,rssi:-65,customerId:"c1"},{id:"c1-t3-l4",source:"c1-t3-n2",target:"c1-t3-n5",bandwidth:42,latency:8,distance:28,rssi:-55,customerId:"c1"},{id:"c1-t3-l5",source:"c1-t3-n2",target:"c1-t3-n6",bandwidth:40,latency:9,distance:30,rssi:-57,customerId:"c1"},{id:"c1-t3-l6",source:"c1-t3-n3",target:"c1-t3-n7",bandwidth:38,latency:10,distance:32,rssi:-53,customerId:"c1"},{id:"c1-t3-l7",source:"c1-t3-n3",target:"c1-t3-n8",bandwidth:0,latency:0,distance:35,rssi:-85,customerId:"c1"},{id:"c1-t3-l8",source:"c1-t3-n4",target:"c1-t3-n9",bandwidth:20,latency:28,distance:48,rssi:-72,customerId:"c1"}]},{id:"topo-c2-1",name:"校园主干网络",customerId:"c2",description:"北京大学校园主干网络拓扑",createTime:"2024-01-20",layoutPreference:"force",labelMode:"bandwidth",nodes:[{id:"c2-t1-n1",name:"北大-主网关",type:"gateway",status:"online",mac:"BB:CC:DD:EE:FF:01",ip:"10.0.0.1",links:["c2-t1-n2","c2-t1-n3","c2-t1-n4"],x:400,y:300,rssi:-40,customerId:"c2"},{id:"c2-t1-n2",name:"北大-教学楼中继",type:"relay",status:"online",mac:"BB:CC:DD:EE:FF:02",ip:"10.0.0.2",links:["c2-t1-n1","c2-t1-n5"],x:200,y:200,rssi:-55,customerId:"c2"},{id:"c2-t1-n3",name:"北大-宿舍中继",type:"relay",status:"online",mac:"BB:CC:DD:EE:FF:03",ip:"10.0.0.3",links:["c2-t1-n1","c2-t1-n6"],x:600,y:200,rssi:-58,customerId:"c2"},{id:"c2-t1-n4",name:"北大-图书馆中继",type:"relay",status:"warning",mac:"BB:CC:DD:EE:FF:04",ip:"10.0.0.4",links:["c2-t1-n1","c2-t1-n7"],x:400,y:500,rssi:-65,customerId:"c2"},{id:"c2-t1-n5",name:"北大-实验室终端",type:"terminal",status:"online",mac:"BB:CC:DD:EE:FF:11",ip:"10.0.0.11",links:["c2-t1-n2"],x:100,y:100,rssi:-70,customerId:"c2"},{id:"c2-t1-n6",name:"北大-宿舍终端",type:"terminal",status:"online",mac:"BB:CC:DD:EE:FF:12",ip:"10.0.0.12",links:["c2-t1-n3"],x:700,y:100,rssi:-72,customerId:"c2"},{id:"c2-t1-n7",name:"北大-阅览室终端",type:"terminal",status:"offline",mac:"BB:CC:DD:EE:FF:13",ip:"10.0.0.13",links:["c2-t1-n4"],x:400,y:600,rssi:-85,customerId:"c2"}],links:[{id:"c2-t1-l1",source:"c2-t1-n1",target:"c2-t1-n2",bandwidth:54,latency:5,distance:25,rssi:-50,customerId:"c2"},{id:"c2-t1-l2",source:"c2-t1-n1",target:"c2-t1-n3",bandwidth:48,latency:6,distance:30,rssi:-52,customerId:"c2"},{id:"c2-t1-l3",source:"c2-t1-n1",target:"c2-t1-n4",bandwidth:36,latency:12,distance:40,rssi:-60,customerId:"c2"},{id:"c2-t1-l4",source:"c2-t1-n2",target:"c2-t1-n5",bandwidth:24,latency:18,distance:50,rssi:-65,customerId:"c2"},{id:"c2-t1-l5",source:"c2-t1-n3",target:"c2-t1-n6",bandwidth:30,latency:15,distance:45,rssi:-62,customerId:"c2"},{id:"c2-t1-l6",source:"c2-t1-n4",target:"c2-t1-n7",bandwidth:0,latency:0,distance:35,rssi:-80,customerId:"c2"}]},{id:"topo-c2-2",name:"计算机学院网络",customerId:"c2",description:"北大计算机学院实验室网络",createTime:"2024-03-01",layoutPreference:"hierarchy",labelMode:"latency",nodes:[{id:"c2-t2-n1",name:"计院-核心交换机",type:"gateway",status:"online",mac:"BB:CC:DD:EE:FF:21",ip:"10.1.0.1",links:["c2-t2-n2","c2-t2-n3"],x:350,y:200,rssi:-35,customerId:"c2-1"},{id:"c2-t2-n2",name:"计院-实验室1中继",type:"relay",status:"online",mac:"BB:CC:DD:EE:FF:22",ip:"10.1.0.2",links:["c2-t2-n1","c2-t2-n4","c2-t2-n5"],x:200,y:350,rssi:-48,customerId:"c2-1"},{id:"c2-t2-n3",name:"计院-实验室2中继",type:"relay",status:"online",mac:"BB:CC:DD:EE:FF:23",ip:"10.1.0.3",links:["c2-t2-n1","c2-t2-n6"],x:500,y:350,rssi:-52,customerId:"c2-1"},{id:"c2-t2-n4",name:"计院-服务器1",type:"terminal",status:"online",mac:"BB:CC:DD:EE:FF:31",ip:"10.1.0.11",links:["c2-t2-n2"],x:100,y:450,rssi:-58,customerId:"c2-1"},{id:"c2-t2-n5",name:"计院-服务器2",type:"terminal",status:"online",mac:"BB:CC:DD:EE:FF:32",ip:"10.1.0.12",links:["c2-t2-n2"],x:250,y:500,rssi:-62,customerId:"c2-1"},{id:"c2-t2-n6",name:"计院-工作站",type:"terminal",status:"warning",mac:"BB:CC:DD:EE:FF:33",ip:"10.1.0.13",links:["c2-t2-n3"],x:600,y:450,rssi:-75,customerId:"c2-1"}],links:[{id:"c2-t2-l1",source:"c2-t2-n1",target:"c2-t2-n2",bandwidth:48,latency:3,distance:18,rssi:-42,customerId:"c2-1"},{id:"c2-t2-l2",source:"c2-t2-n1",target:"c2-t2-n3",bandwidth:45,latency:4,distance:20,rssi:-45,customerId:"c2-1"},{id:"c2-t2-l3",source:"c2-t2-n2",target:"c2-t2-n4",bandwidth:32,latency:8,distance:25,rssi:-55,customerId:"c2-1"},{id:"c2-t2-l4",source:"c2-t2-n2",target:"c2-t2-n5",bandwidth:28,latency:12,distance:32,rssi:-58,customerId:"c2-1"},{id:"c2-t2-l5",source:"c2-t2-n3",target:"c2-t2-n6",bandwidth:18,latency:22,distance:45,rssi:-72,customerId:"c2-1"}]}],Ye=s=>s==="online"?{color:"#52c41a",text:"在线",badge:"success",icon:e.jsx(qe,{})}:s==="offline"?{color:"#ff4d4f",text:"离线",badge:"error",icon:e.jsx(ps,{})}:{color:"#faad14",text:"异常",badge:"warning",icon:e.jsx(fs,{})},Ae=s=>s==="gateway"?{color:"#1890ff",text:"网关"}:s==="relay"?{color:"#722ed1",text:"中继"}:{color:"#13c2c2",text:"终端"},as=s=>s==="enterprise"?{color:"#1890ff",text:"企业"}:s==="government"?{color:"#722ed1",text:"政府"}:s==="education"?{color:"#52c41a",text:"教育"}:{color:"#fa8c16",text:"医疗"},yt={background:"linear-gradient(135deg, #ffffff 0%, #fafbfc 100%)",borderRadius:12,boxShadow:"0 4px 12px rgba(0,21,41,.08), 0 2px 4px rgba(0,21,41,.04)",border:"1px solid rgba(240,240,240,0.8)",marginBottom:20,transition:"all 0.3s ease"},Vn=()=>{const[s]=c.useState(Wn),[l]=c.useState(Hn),[x,d]=c.useState("topo-c1-1"),[o,a]=c.useState(["c1","c2"]),i=c.useMemo(()=>l.find(t=>t.id===x)||l[0],[x]),p=c.useMemo(()=>s.find(t=>t.id===i.customerId),[s,i.customerId]),[m,F]=c.useState(i.nodes),[z,O]=c.useState(i.links),[w,_]=c.useState(null),[f,B]=c.useState(new Date),[j,X]=c.useState(""),[ne,ae]=c.useState("all"),[ie,ce]=c.useState("all"),[Q,u]=c.useState(1),[b,M]=c.useState(!1),[y,r]=c.useState(i.layoutPreference),[I,V]=c.useState(i.labelMode),[q,Re]=c.useState(!1),[Y,kt]=c.useState(!0),[bs,tt]=c.useState(!1),[je,st]=c.useState(()=>{const t={};return i.nodes.forEach(n=>{t[n.id]=!0}),t}),ue=c.useRef(null),be=c.useRef(null),nt=c.useRef(null),We=c.useRef(null);c.useEffect(()=>{const t=setInterval(()=>B(new Date),1e3);return()=>clearInterval(t)},[]),c.useEffect(()=>{const t=l.find(n=>n.id===x);if(t){F(t.nodes),O(t.links),r(t.layoutPreference),V(t.labelMode);const n={};t.nodes.forEach(S=>{n[S.id]=!0}),st(n)}},[x]);const ve=c.useMemo(()=>{const t=m.length,n=m.filter($=>$.status==="online").length,S=m.filter($=>$.status==="offline").length,k=m.filter($=>$.status==="warning").length,R=Math.round(z.filter($=>$.latency>0).reduce(($,N)=>$+N.latency,0)/Math.max(1,z.filter($=>$.latency>0).length)),P=Math.round(n/Math.max(1,t)*100);return{total:t,online:n,offline:S,warning:k,coverage:P,avgLatency:R}},[m,z]),vs=()=>{const t=m.filter(T=>T.type==="gateway"),n=m.filter(T=>T.type==="relay"),S=m.filter(T=>T.type==="terminal"),k=1600,P=1e3/4,$=(T,A)=>{if(T.length===0)return[];const U=Math.min(220,k/(T.length+1)),G=(k-(T.length-1)*U)/2;return T.map((Z,J)=>({...Z,x:G+J*U,y:A}))},N=[...$(t,P),...$(n,P*2),...$(S,P*3)];F(T=>T.map(A=>N.find(U=>U.id===A.id)||A))},ws=(t=40)=>{let R=m.map(P=>({...P}));for(let P=0;P<t;P++){const $=new Map;R.forEach(N=>$.set(N.id,{fx:0,fy:0}));for(let N=0;N<R.length;N++)for(let T=N+1;T<R.length;T++){const A=R[N],U=R[T],G=A.x-U.x,Z=A.y-U.y,J=Math.max(1,Math.hypot(G,Z)),se=1e3/(J*J),he=G/J*se,me=Z/J*se,ye=$.get(A.id);ye.fx+=he,ye.fy+=me;const pe=$.get(U.id);pe.fx-=he,pe.fy-=me}z.forEach(N=>{const T=R.find(pe=>pe.id===N.source),A=R.find(pe=>pe.id===N.target);if(!T||!A)return;const U=A.x-T.x,G=A.y-T.y,Z=Math.max(1,Math.hypot(U,G)),J=.02*Z,se=U/Z*J,he=G/Z*J,me=$.get(T.id);me.fx+=se,me.fy+=he;const ye=$.get(A.id);ye.fx-=se,ye.fy-=he}),R=R.map(N=>{const{fx:T,fy:A}=$.get(N.id),U=Math.max(-6,Math.min(6,T)),G=Math.max(-6,Math.min(6,A));return{...N,x:Math.max(40,Math.min(1760,N.x+U)),y:Math.max(40,Math.min(1160,N.y+G))}})}F(P=>P.map($=>R.find(N=>N.id===$.id)||$))},zt=()=>{console.log("Auto Layout called, current layout:",y),y==="hierarchy"?(vs(),H.success("🏗️ 已应用层次布局")):(ws(),H.success("🔄 已应用力导向布局"))},Cs=(t,n)=>{st(S=>({...S,[t]:n}))},Ss=t=>{const n=l.find(R=>R.id===t);if(!n)return;d(t),F(n.nodes),O(n.links),r(n.layoutPreference),V(n.labelMode),_(null);const S={};n.nodes.forEach(R=>{S[R.id]=!0}),st(S);const k=s.find(R=>R.id===n.customerId);H.success(`已切换到拓扑图：${k==null?void 0:k.name} - ${n.name}`)},Is=()=>{const t=n=>{const S=l.filter(P=>P.customerId===n.id),k=()=>{switch(n.type){case"enterprise":return e.jsx(qt,{});case"government":return e.jsx(qt,{});case"education":return e.jsx(ke,{});case"healthcare":return e.jsx(oe,{});default:return e.jsx(oe,{})}},R=S.map(P=>({title:e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",lineHeight:"1.5"},children:e.jsxs(h,{align:"center",children:[e.jsx("span",{style:{fontWeight:x===P.id?600:400,color:x===P.id?"#1890ff":"#262626",lineHeight:"1.5"},children:P.name}),e.jsxs(C,{color:"cyan",style:{fontSize:10,lineHeight:"1.2"},children:[P.nodes.length," 节点"]})]})}),key:P.id,icon:e.jsx(gt,{style:{color:"#52c41a"}}),isLeaf:!0}));return{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",lineHeight:"1.5"},children:[e.jsxs(h,{align:"center",children:[e.jsx("span",{style:{fontWeight:600,lineHeight:"1.5"},children:n.name}),e.jsx(C,{color:n.status==="active"?"green":"red",style:{lineHeight:"1.2"},children:n.status==="active"?"活跃":"停用"})]}),e.jsxs(C,{color:"blue",style:{lineHeight:"1.2"},children:[n.deviceCount," 设备"]})]}),key:n.id,icon:k(),children:R.length>0?R:void 0,isLeaf:R.length===0,selectable:!1}};return s.map(t)},ks=t=>{t.preventDefault(),u(n=>Math.max(.4,Math.min(2.5,n-t.deltaY*.0015)))},zs=t=>{t.target.closest("[data-node]")||M(!0)},Rs=()=>M(!1),Ds=t=>{if(!b||!be.current)return;const n=be.current;n.scrollLeft-=t.movementX,n.scrollTop-=t.movementY},Ts=(t,n)=>{n.stopPropagation(),n.preventDefault();const S=ue.current;if(!S)return;const k=S.getBoundingClientRect(),R=(n.clientX-k.left)/Q,P=(n.clientY-k.top)/Q;We.current={id:t.id,offsetX:R-t.x,offsetY:P-t.y}},Ms=()=>{var t;(t=nt.current)!=null&&t.requestFullscreen&&(nt.current.requestFullscreen(),Re(!0))},Bs=()=>{document.exitFullscreen&&(document.exitFullscreen(),Re(!1))},Rt=()=>{u(t=>{const n=Math.min(3,t*1.2);return console.log("Zoom In:",t,"->",n),n})},Dt=()=>{u(t=>{const n=Math.max(.3,t/1.2);return console.log("Zoom Out:",t,"->",n),n})},Tt=()=>{console.log("Reset View called"),u(1),be.current&&(be.current.scrollLeft=0,be.current.scrollTop=0,console.log("View reset: scale=1, scroll=(0,0)"));const t=l.find(n=>n.id===x);t&&(F(t.nodes.map(n=>({...n}))),console.log("Nodes reset to initial positions"),H.success("🔄 视图已重置到初始状态"))};c.useEffect(()=>{const t=()=>{Re(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",t),()=>document.removeEventListener("fullscreenchange",t)},[]),c.useEffect(()=>{const t=()=>{if(q&&ue.current){const n=Y?window.innerWidth-350:window.innerWidth,S=window.innerHeight;ue.current.setAttribute("width",n.toString()),ue.current.setAttribute("height",S.toString())}};if(q)return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[q,Y]),c.useEffect(()=>{const t=()=>{We.current=null},n=S=>{if(!We.current||!ue.current)return;const k=ue.current.getBoundingClientRect(),R=(S.clientX-k.left)/Q,P=(S.clientY-k.top)/Q,{id:$,offsetX:N,offsetY:T}=We.current,A=R-N,U=P-T,G=Math.max(50,Math.min(1750,A)),Z=Math.max(50,Math.min(1150,U));F(J=>J.map(se=>se.id===$?{...se,x:G,y:Z}:se))};return document.addEventListener("mouseup",t),document.addEventListener("mousemove",n),()=>{document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",n)}},[Q]);const Mt=c.useMemo(()=>m.filter(t=>(ne==="all"||t.status===ne)&&(ie==="all"||t.type===ie)&&(!j||t.name.includes(j)||t.ip.includes(j)||t.mac.includes(j))),[m,ne,ie,j]),it=c.useMemo(()=>m.filter(t=>je[t.id]===!0),[m,je]),$s=c.useMemo(()=>z.filter(t=>je[t.source]===!0&&je[t.target]===!0),[z,je]);return e.jsxs("div",{style:{background:"transparent"},children:[e.jsx(D,{style:{...yt,marginBottom:24},bodyStyle:{padding:"20px 24px"},children:e.jsxs(h,{size:16,children:[e.jsx("div",{style:{background:"linear-gradient(135deg, #1890ff, #36cfc9)",borderRadius:12,padding:12,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(24,144,255,0.3)"},children:e.jsx(hs,{style:{fontSize:24,color:"#fff"}})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,color:"#1a1a1a",fontSize:24,fontWeight:600,background:"linear-gradient(135deg, #1890ff, #722ed1)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"MESH 自组网拓扑图"}),e.jsxs("div",{style:{color:"#8c8c8c",fontSize:13,marginTop:4,fontWeight:500},children:["实时监控 · ",f.toLocaleString("zh-CN")]})]})]})}),e.jsxs(L,{gutter:[16,16],children:[e.jsx(v,{xs:24,xl:5,children:e.jsxs(D,{style:{...yt,background:"linear-gradient(135deg, #fff9e6 0%, #fff2cc 100%)",border:"1px solid rgba(250,140,22,0.2)",height:"calc(100vh - 200px)",display:"flex",flexDirection:"column"},title:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{background:"linear-gradient(135deg, #fa8c16, #ffa940)",borderRadius:8,padding:8,marginRight:12,display:"flex",alignItems:"center"},children:e.jsx(ke,{style:{color:"#fff",fontSize:16}})}),e.jsx("span",{style:{color:"#fa8c16",fontWeight:600},children:"客户管理"})]}),bodyStyle:{padding:"16px",flex:1,overflow:"auto"},children:[p&&e.jsxs("div",{style:{marginBottom:16,padding:12,background:"linear-gradient(135deg, #fff, #fafafa)",borderRadius:8,border:"1px solid #f0f0f0"},children:[e.jsx("div",{style:{fontWeight:600,color:"#262626",marginBottom:4},children:p.name}),e.jsxs(h,{size:4,wrap:!0,children:[e.jsx(C,{color:as(p.type).color,children:as(p.type).text}),e.jsxs(C,{color:"green",children:[p.deviceCount," 设备"]})]}),e.jsxs("div",{style:{fontSize:12,color:"#8c8c8c",marginTop:4},children:["联系人：",p.contact]})]}),e.jsx(Js,{showIcon:!0,defaultExpandedKeys:o,selectedKeys:[x],treeData:Is(),onSelect:t=>{if(t.length>0){const n=t[0];n.startsWith("topo-")&&Ss(n)}},onExpand:t=>{a(t)},style:{background:"transparent",fontSize:13}})]})}),e.jsx(v,{xs:24,xl:19,children:e.jsx("div",{children:e.jsx(D,{style:{...yt,display:"flex",flexDirection:"column",height:"calc(100vh - 200px)",background:"linear-gradient(135deg, #001529 0%, #002140 100%)",border:"1px solid rgba(24,144,255,0.3)"},title:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{background:"linear-gradient(135deg, #1890ff, #36cfc9)",borderRadius:8,padding:8,marginRight:12,display:"flex",alignItems:"center"},children:e.jsx(gt,{style:{color:"#fff",fontSize:16}})}),e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[p==null?void 0:p.name," - 拓扑图视图"]}),e.jsxs(C,{color:"blue",style:{marginLeft:12,background:"rgba(24,144,255,0.2)",border:"1px solid rgba(24,144,255,0.4)",color:"#40a9ff"},children:["缩放: ",Math.round(Q*100),"%"]})]}),bodyStyle:{display:"flex",flex:1,padding:0,overflow:"hidden",height:"calc(100vh - 280px)"},extra:e.jsxs(h,{size:8,wrap:!0,children:[e.jsxs(le.Group,{value:I,onChange:t=>V(t.target.value),style:{borderRadius:6},size:"small",children:[e.jsx(le.Button,{value:"latency",style:{borderRadius:"6px 0 0 6px"},children:"延迟"}),e.jsx(le.Button,{value:"distance",children:"距离"}),e.jsx(le.Button,{value:"rssi",children:"信号"}),e.jsx(le.Button,{value:"bandwidth",children:"带宽"}),e.jsx(le.Button,{value:"none",style:{borderRadius:"0 6px 6px 0"},children:"隐藏"})]}),e.jsx(ee,{title:Y?"隐藏侧边栏":"显示侧边栏",placement:"bottom",children:e.jsx(g,{icon:Y?e.jsx(jt,{}):e.jsx(bt,{}),onClick:()=>kt(!Y),size:"small",style:{borderRadius:6,background:Y?"linear-gradient(135deg, #722ed1, #9254de)":"linear-gradient(135deg, #52c41a, #73d13d)",borderColor:Y?"#722ed1":"#52c41a",color:"#fff",boxShadow:Y?"0 2px 6px rgba(114,46,209,0.3)":"0 2px 6px rgba(82,196,26,0.3)"}})}),e.jsx(ee,{title:"放大",placement:"bottom",children:e.jsx(g,{icon:e.jsx(Pt,{}),onClick:Rt,size:"small",style:{borderRadius:6,background:"linear-gradient(135deg, #13c2c2, #36cfc9)",borderColor:"#13c2c2",color:"#fff",boxShadow:"0 2px 6px rgba(19,194,194,0.3)"}})}),e.jsx(ee,{title:"缩小",placement:"bottom",children:e.jsx(g,{icon:e.jsx(At,{}),onClick:Dt,size:"small",style:{borderRadius:6,background:"linear-gradient(135deg, #13c2c2, #36cfc9)",borderColor:"#13c2c2",color:"#fff",boxShadow:"0 2px 6px rgba(19,194,194,0.3)"}})}),e.jsx(ee,{title:"重置视图",placement:"bottom",children:e.jsx(g,{icon:e.jsx(Lt,{}),onClick:Tt,size:"small",style:{borderRadius:6,background:"linear-gradient(135deg, #fa8c16, #ffa940)",borderColor:"#fa8c16",color:"#fff",boxShadow:"0 2px 6px rgba(250,140,22,0.3)"}})}),e.jsx(ee,{title:"自动布局",placement:"bottom",children:e.jsx(g,{icon:e.jsx(Ft,{}),onClick:zt,size:"small",style:{borderRadius:6,background:"linear-gradient(135deg, #52c41a, #73d13d)",borderColor:"#52c41a",color:"#fff",boxShadow:"0 2px 6px rgba(82,196,26,0.3)"}})}),e.jsx(ee,{title:"刷新数据",placement:"bottom",children:e.jsx(g,{icon:e.jsx(nn,{}),onClick:()=>{const t=l.find(n=>n.id===x);t&&(F(t.nodes),O(t.links))},size:"small",style:{borderRadius:6,background:"linear-gradient(135deg, #1890ff, #40a9ff)",borderColor:"#1890ff",color:"#fff",boxShadow:"0 2px 6px rgba(24,144,255,0.3)"}})}),e.jsx(ee,{title:"导出SVG",placement:"bottom",children:e.jsx(g,{icon:e.jsx(rn,{}),onClick:()=>{const t=ue.current;if(!t)return;const n=new Blob([t.outerHTML],{type:"image/svg+xml;charset=utf-8"}),S=URL.createObjectURL(n),k=document.createElement("a");k.href=S,k.download=`${(p==null?void 0:p.name)||"topology"}.svg`,k.click(),URL.revokeObjectURL(S),H.success("已导出为SVG")},size:"small",style:{borderRadius:6,background:"linear-gradient(135deg, #fa8c16, #ffa940)",borderColor:"#fa8c16",color:"#fff",boxShadow:"0 2px 6px rgba(250,140,22,0.3)"}})}),e.jsx(ee,{title:"全屏显示",placement:"bottom",children:e.jsx(g,{icon:e.jsx(us,{}),onClick:Ms,size:"small",style:{background:"linear-gradient(135deg, #1890ff, #40a9ff)",borderColor:"#1890ff",color:"#fff",borderRadius:6,boxShadow:"0 2px 6px rgba(24,144,255,0.3)"}})})]}),children:e.jsxs("div",{ref:nt,style:{display:"flex",height:q?"100vh":"100%",width:"100%",overflow:"hidden"},children:[Y&&e.jsx("div",{style:{width:350,background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",borderRight:"1px solid rgba(24,144,255,0.2)",display:"flex",flexDirection:"column",height:"100%",boxShadow:"2px 0 8px rgba(0,0,0,0.3)"},children:e.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",background:"transparent"},className:"sidebar-panels",children:[e.jsxs("div",{style:{height:q?"400px":"380px",flexShrink:0,marginBottom:"8px"},className:"panel-overview",children:[e.jsxs("div",{style:{background:"rgba(24,144,255,0.05)",borderRadius:"8px",marginBottom:"4px",padding:"12px 16px",color:"#ffffff",display:"flex",alignItems:"center"},children:[e.jsx(Qs,{style:{color:"#40a9ff",marginRight:8}}),e.jsx("span",{style:{fontWeight:600,color:"#ffffff"},children:"网络概览"})]}),e.jsx("div",{style:{height:q?"360px":"340px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"0 8px 16px"},children:[e.jsx(L,{gutter:[8,8],style:{marginBottom:16},children:[{t:"总节点",v:ve.total,c:"#1890ff",icon:"🔗"},{t:"在线",v:ve.online,c:"#52c41a",icon:"🟢"},{t:"离线",v:ve.offline,c:"#ff4d4f",icon:"🔴"},{t:"异常",v:ve.warning,c:"#faad14",icon:"🟡"}].map((t,n)=>e.jsx(v,{span:12,children:e.jsxs("div",{style:{background:"rgba(255,255,255,0.08)",padding:12,borderRadius:8,border:`1px solid ${t.c}40`,textAlign:"center",backdropFilter:"blur(10px)"},children:[e.jsx("div",{style:{fontSize:16,marginBottom:4},children:t.icon}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:t.c},children:t.v}),e.jsx("div",{style:{fontSize:12,color:"#d9d9d9"},children:t.t})]})},n))}),e.jsxs(h,{direction:"vertical",size:8,style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:13},children:"覆盖率："}),e.jsxs(C,{color:"blue",style:{borderRadius:4},children:[ve.coverage,"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:13},children:"平均延迟："}),e.jsxs(C,{color:"purple",style:{borderRadius:4},children:[ve.avgLatency," ms"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:13},children:"连接数："}),e.jsx(C,{color:"geekblue",style:{borderRadius:4},children:z.length})]})]})]})})]}),e.jsxs("div",{style:{flex:1,minHeight:"200px",marginBottom:"8px"},className:"panel-nodes",children:[e.jsxs("div",{style:{background:"rgba(24,144,255,0.05)",borderRadius:"8px",marginBottom:"4px",padding:"12px 16px",color:"#ffffff",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(xs,{style:{color:"#b37feb",marginRight:8}}),e.jsx("span",{style:{fontWeight:600,color:"#ffffff"},children:"节点列表"})]}),e.jsx(Ke,{count:Mt.length,style:{backgroundColor:"#722ed1"}})]}),e.jsx("div",{style:{height:"calc(100% - 44px)",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"0 8px",height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{marginBottom:12,flexShrink:0},children:e.jsxs(h,{direction:"vertical",size:8,style:{width:"100%"},children:[e.jsx(te,{allowClear:!0,prefix:e.jsx(Qe,{style:{color:"#722ed1"}}),placeholder:"搜索名称/IP/MAC",value:j,onChange:t=>X(t.target.value),size:"small",style:{borderRadius:4}}),e.jsxs(L,{gutter:6,children:[e.jsx(v,{span:12,children:e.jsx(K,{value:ne,style:{width:"100%"},size:"small",onChange:t=>ae(t),options:[{label:"📊 全部",value:"all"},{label:"🟢 在线",value:"online"},{label:"🔴 离线",value:"offline"},{label:"🟡 异常",value:"warning"}]})}),e.jsx(v,{span:12,children:e.jsx(K,{value:ie,style:{width:"100%"},size:"small",onChange:t=>ce(t),options:[{label:"🔗 全部",value:"all"},{label:"🌐 网关",value:"gateway"},{label:"📡 中继",value:"relay"},{label:"📱 终端",value:"terminal"}]})})]})]})}),e.jsx("div",{className:"custom-scrollbar",style:{flex:1,minHeight:0,overflow:"auto"},children:e.jsx(re,{dataSource:Mt,size:"small",renderItem:t=>{const n=Ye(t.status),S=Ae(t.type),k=(w==null?void 0:w.id)===t.id;return e.jsx(re.Item,{style:{cursor:"pointer",background:k?"rgba(24,144,255,0.2)":"rgba(255,255,255,0.05)",borderRadius:6,padding:"8px 4px",marginBottom:4,border:k?"1px solid #40a9ff":"1px solid rgba(255,255,255,0.1)",transition:"all 0.2s ease"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[e.jsx(Ce,{checked:je[t.id]??!0,onChange:R=>{R.stopPropagation(),Cs(t.id,R.target.checked)},style:{marginRight:8}}),e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center"},onClick:()=>{_(t),tt(!0)},children:[e.jsx(Ke,{status:n.badge,dot:!0,style:{marginRight:8},children:e.jsx(Oe,{icon:e.jsx(en,{}),size:"small",style:{background:S.color,border:`1px solid ${n.color}`}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:12,color:"#ffffff",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name}),e.jsx("div",{style:{fontSize:10,color:"#40a9ff",marginTop:1},children:t.ip}),e.jsx("div",{style:{fontSize:11,color:"#d9d9d9",marginTop:2},children:e.jsxs(h,{size:4,children:[e.jsx(C,{color:S.color,children:S.text}),e.jsx(C,{color:n.color,children:n.text})]})})]})]})]})})}})})]})})]})]})}),e.jsxs("div",{ref:be,onWheel:ks,onMouseDown:zs,onMouseUp:Rs,onMouseMove:Ds,style:{flex:1,height:"100%",overflow:"auto",background:q?"radial-gradient(ellipse at center, #001529 0%, #000000 100%)":"radial-gradient(ellipse at center, #0a1628 0%, #001529 100%)",borderRadius:q?0:Y?"0 8px 8px 0":8,position:"relative",border:q?"none":"2px solid rgba(24,144,255,0.1)"},className:"topology-view",children:[q&&e.jsx("div",{style:{position:"absolute",top:20,right:20,background:"linear-gradient(135deg, rgba(0,21,41,0.95), rgba(0,33,64,0.95))",borderRadius:12,padding:"12px 16px",zIndex:1e3,backdropFilter:"blur(8px)",border:"1px solid rgba(24,144,255,0.3)",boxShadow:"0 8px 24px rgba(0,0,0,0.4)"},children:e.jsxs(h,{children:[e.jsxs(le.Group,{value:I,onChange:t=>V(t.target.value),size:"small",children:[e.jsx(le.Button,{value:"latency",children:"延迟"}),e.jsx(le.Button,{value:"distance",children:"距离"}),e.jsx(le.Button,{value:"rssi",children:"信号"}),e.jsx(le.Button,{value:"bandwidth",children:"带宽"}),e.jsx(le.Button,{value:"none",children:"隐藏"})]}),e.jsx(ee,{title:Y?"隐藏侧边栏":"显示侧边栏",children:e.jsx(g,{size:"small",icon:Y?e.jsx(jt,{}):e.jsx(bt,{}),onClick:()=>kt(!Y)})}),e.jsx(ee,{title:"放大",children:e.jsx(g,{size:"small",icon:e.jsx(Pt,{}),onClick:Rt})}),e.jsx(ee,{title:"缩小",children:e.jsx(g,{size:"small",icon:e.jsx(At,{}),onClick:Dt})}),e.jsx(ee,{title:"重置视图",children:e.jsx(g,{size:"small",icon:e.jsx(Lt,{}),onClick:Tt})}),e.jsx(ee,{title:"自动布局",children:e.jsx(g,{size:"small",icon:e.jsx(Ft,{}),onClick:zt})}),e.jsx(ee,{title:"退出全屏",children:e.jsx(g,{size:"small",icon:e.jsx(tn,{}),onClick:Bs})})]})}),e.jsxs("div",{style:{width:q?Y?"calc(100vw - 350px)":"100vw":1800,height:q?"100vh":1200},children:[e.jsxs("svg",{ref:ue,width:q?Y?window.innerWidth-350:window.innerWidth:1800,height:q?window.innerHeight:1200,style:{transform:`scale(${Q})`,transformOrigin:"0 0"},children:[e.jsxs("defs",{children:[e.jsx("marker",{id:"arrow-blue",markerWidth:"4",markerHeight:"4",refX:"4",refY:"2",orient:"auto",children:e.jsx("path",{d:"M0,0 L4,2 L0,4 Z",fill:"#40a9ff"})}),e.jsx("marker",{id:"arrow-cyan",markerWidth:"4",markerHeight:"4",refX:"4",refY:"2",orient:"auto",children:e.jsx("path",{d:"M0,0 L4,2 L0,4 Z",fill:"#36cfc9"})}),e.jsx("marker",{id:"arrow-red",markerWidth:"4",markerHeight:"4",refX:"4",refY:"2",orient:"auto",children:e.jsx("path",{d:"M0,0 L4,2 L0,4 Z",fill:"#ff4d4f"})})]}),$s.map(t=>{const n=it.find(rt=>rt.id===t.source),S=it.find(rt=>rt.id===t.target),k=t.bandwidth>0,R=k?"#40a9ff":"#ff4d4f",P=k?"#36cfc9":"#ff4d4f",$=k?Math.min(4,Math.max(2,2+t.bandwidth/30)):1.5,N=S.x-n.x,T=S.y-n.y,A=Math.max(1,Math.hypot(N,T)),U=-T/A,G=N/A,Z=4,J=n.type==="gateway"?20:n.type==="relay"?16:12,se=S.type==="gateway"?20:S.type==="relay"?16:12,he=n.x+U*Z+N/A*(J+2),me=n.y+G*Z+T/A*(J+2),ye=S.x+U*Z-N/A*(se+4),pe=S.y+G*Z-T/A*(se+4),Es=S.x-U*Z+-N/A*(se+2),_s=S.y-G*Z+-T/A*(se+2),Ns=n.x-U*Z- -N/A*(J+4),Ps=n.y-G*Z- -T/A*(J+4);return e.jsxs("g",{children:[e.jsx("line",{x1:he,y1:me,x2:ye,y2:pe,stroke:R,strokeWidth:$,opacity:k?.9:.6,strokeDasharray:k?"none":"4,2",markerEnd:`url(#${k?"arrow-blue":"arrow-red"})`}),e.jsx("line",{x1:Es,y1:_s,x2:Ns,y2:Ps,stroke:P,strokeWidth:$,opacity:k?.8:.5,strokeDasharray:k?"none":"4,2",markerEnd:`url(#${k?"arrow-cyan":"arrow-red"})`}),I!=="none"&&e.jsxs("text",{x:(n.x+S.x)/2,y:(n.y+S.y)/2-6,fill:"#8c8c8c",fontSize:10,textAnchor:"middle",children:[I==="latency"&&`${t.latency}ms`,I==="distance"&&`${t.distance}m`,I==="rssi"&&`${t.rssi}dBm`,I==="bandwidth"&&`${t.bandwidth}Mbps`]})]},t.id)}),it.map(t=>{const n=Ye(t.status),S=Ae(t.type),k=t.type==="gateway"?20:t.type==="relay"?16:12,R=t.type==="gateway"?"#1890ff":t.type==="relay"?"#722ed1":"#13c2c2";return e.jsxs("g",{"data-node":!0,onMouseDown:P=>Ts(t,P),onClick:()=>{_(t),tt(!0)},children:[e.jsx("circle",{cx:t.x,cy:t.y,r:k+1.5,fill:R,opacity:.15}),e.jsx("circle",{cx:t.x,cy:t.y,r:k,fill:R,stroke:n.color,strokeWidth:2}),e.jsx("text",{x:t.x+k+6,y:t.y+4,fill:"#ffffff",fontSize:12,children:t.name}),e.jsxs("text",{x:t.x+k+6,y:t.y+18,fill:"#8c8c8c",fontSize:10,children:[S.text," · RSSI ",t.rssi,"dBm"]})]},t.id)})]}),bs&&w&&e.jsxs("div",{style:{position:"absolute",top:q?"80px":"20px",right:"20px",width:"320px",maxHeight:q?"calc(100% - 100px)":"calc(100% - 40px)",background:"linear-gradient(135deg, rgba(26,26,46,0.95) 0%, rgba(22,33,62,0.95) 50%, rgba(15,52,96,0.95) 100%)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(24,144,255,0.3)",backdropFilter:"blur(10px)",boxShadow:"0 8px 24px rgba(0,0,0,0.4)",zIndex:1001,overflow:"auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",paddingBottom:"12px",borderBottom:"1px solid rgba(24,144,255,0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(sn,{style:{color:"#ffc53d",marginRight:8}}),e.jsx("span",{style:{fontWeight:600,color:"#ffffff",fontSize:"16px"},children:"节点详情"})]}),e.jsx(g,{type:"text",size:"small",onClick:()=>tt(!1),style:{color:"#8c8c8c",border:"none",background:"transparent"},children:"✕"})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.08)",padding:16,borderRadius:8,border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#ffffff",marginBottom:16,display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{marginRight:8},children:"🏷️"}),w.name]}),e.jsxs(h,{direction:"vertical",size:12,style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:14},children:"类型："}),e.jsx(C,{color:Ae(w.type).color,style:{fontSize:12},children:Ae(w.type).text})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:14},children:"状态："}),e.jsx(C,{color:Ye(w.status).color,style:{fontSize:12},children:Ye(w.status).text})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:14},children:"IP地址："}),e.jsx("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:4,fontSize:12,color:"#40a9ff"},children:w.ip})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:14},children:"信号强度："}),e.jsxs(C,{color:w.rssi>-60?"green":w.rssi>-75?"orange":"red",style:{fontSize:12},children:["📶 ",w.rssi," dBm"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:14},children:"连接数："}),e.jsxs(C,{color:"blue",style:{fontSize:12},children:["🔗 ",w.links.length," 个"]})]}),w.links.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{color:"#d9d9d9",fontSize:14,marginBottom:8},children:"相邻节点："}),e.jsx("div",{style:{background:"rgba(0,0,0,0.2)",padding:12,borderRadius:6,border:"1px solid rgba(255,255,255,0.1)"},children:e.jsx(h,{wrap:!0,size:[6,6],children:w.links.map(t=>{const n=m.find(S=>S.id===t);return n?e.jsx(C,{color:Ae(n.type).color,style:{cursor:"pointer",fontSize:11},onClick:()=>{_(n)},children:n.name},t):null})})})]})]})]})]})]})]})]})})})})]})]})},Un=()=>{const s=It(),l={background:"#ffffff",borderRadius:"8px",boxShadow:"0 1px 4px rgba(0,21,41,.08)",border:"1px solid #f0f0f0",marginBottom:"16px"},x=[{title:"用户总数",value:1234,prefix:e.jsx(oe,{style:{color:"#1890ff"}}),suffix:"人",description:"系统注册用户总数"},{title:"角色数量",value:12,prefix:e.jsx(fe,{style:{color:"#722ed1"}}),suffix:"个",description:"系统配置角色数量"},{title:"权限数量",value:45,prefix:e.jsx(Fe,{style:{color:"#fa8c16"}}),suffix:"项",description:"系统权限配置总数"},{title:"在线用户",value:89,prefix:e.jsx(ke,{style:{color:"#52c41a"}}),suffix:"人",description:"当前在线用户数量"}],d=[{title:"用户管理",description:"管理系统用户账号、权限分配和用户状态",icon:e.jsx(oe,{style:{fontSize:"32px",color:"#1890ff"}}),path:"/system/users",features:["用户列表","新增用户","编辑用户","用户状态管理"]},{title:"角色管理",description:"配置系统角色、分配权限和管理角色关系",icon:e.jsx(fe,{style:{fontSize:"32px",color:"#722ed1"}}),path:"/system/roles",features:["角色列表","权限分配","角色编辑","用户关联"]},{title:"权限管理",description:"设置系统权限结构、管理访问控制规则",icon:e.jsx(Fe,{style:{fontSize:"32px",color:"#fa8c16"}}),path:"/system/permissions",features:["权限树结构","权限类型","访问控制","权限继承"]}],o=[{id:"1",operator:"管理员",operation:"新增用户",target:"张三",time:"5分钟前",status:"success"},{id:"2",operator:"管理员",operation:"编辑角色",target:"编辑员角色",time:"15分钟前",status:"success"},{id:"3",operator:"管理员",operation:"删除权限",target:"临时权限",time:"30分钟前",status:"success"},{id:"4",operator:"管理员",operation:"修改用户状态",target:"李四",time:"1小时前",status:"warning"},{id:"5",operator:"管理员",operation:"创建角色",target:"审核员角色",time:"2小时前",status:"success"}],a=i=>{const p={success:{color:"success",icon:e.jsx(qe,{}),text:"成功"},warning:{color:"warning",icon:e.jsx(Ot,{}),text:"处理中"},error:{color:"error",icon:e.jsx(Ot,{}),text:"失败"}},m=p[i]||p.success;return e.jsx(C,{color:m.color,icon:m.icon,children:m.text})};return e.jsxs("div",{style:{background:"transparent"},children:[" ",e.jsx(D,{style:l,children:e.jsxs(L,{align:"middle",children:[e.jsx(v,{flex:"auto",children:e.jsxs(h,{size:"large",children:[e.jsx(Ze,{style:{fontSize:"32px",color:"#1890ff"}}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,color:"#262626"},children:"系统管理"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#8c8c8c"},children:"管理系统用户、角色和权限配置"})]})]})}),e.jsx(v,{children:e.jsx(C,{color:"processing",children:"管理模式"})})]})}),e.jsx(L,{gutter:[16,16],style:{marginBottom:"16px"},children:x.map((i,p)=>e.jsx(v,{xs:24,sm:12,lg:6,children:e.jsxs(D,{style:l,children:[e.jsx(Le,{title:i.title,value:i.value,prefix:i.prefix,suffix:i.suffix}),e.jsx("p",{style:{margin:"8px 0 0 0",color:"#8c8c8c",fontSize:"12px"},children:i.description})]})},p))}),e.jsx(L,{gutter:[16,16],style:{marginBottom:"16px"},children:d.map((i,p)=>e.jsx(v,{xs:24,lg:8,children:e.jsxs(D,{style:l,hoverable:!0,actions:[e.jsx(g,{type:"primary",icon:e.jsx(ln,{}),onClick:()=>s(i.path),children:"进入管理"})],children:[e.jsx(D.Meta,{avatar:i.icon,title:i.title,description:i.description}),e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:500,color:"#262626"},children:"主要功能："}),e.jsx(h,{wrap:!0,children:i.features.map((m,F)=>e.jsx(C,{color:"blue",children:m},F))})]})]})},p))}),e.jsxs(L,{gutter:[16,16],children:[e.jsx(v,{xs:24,lg:16,children:e.jsx(D,{title:"最近操作记录",style:l,children:e.jsx(re,{dataSource:o,renderItem:i=>e.jsx(re.Item,{children:e.jsx(re.Item.Meta,{avatar:e.jsx(Oe,{icon:e.jsx(oe,{})}),title:e.jsxs(h,{children:[e.jsx("span",{children:i.operator}),e.jsx("span",{style:{color:"#8c8c8c"},children:i.operation}),e.jsx("span",{style:{fontWeight:500},children:i.target}),a(i.status)]}),description:i.time})})})})}),e.jsx(v,{xs:24,lg:8,children:e.jsx(D,{title:"系统状态",style:l,children:e.jsxs(h,{direction:"vertical",style:{width:"100%"},size:"middle",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"用户服务"}),e.jsx(C,{color:"success",children:"正常"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"权限服务"}),e.jsx(C,{color:"success",children:"正常"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"认证服务"}),e.jsx(C,{color:"success",children:"正常"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"数据库连接"}),e.jsx(C,{color:"success",children:"正常"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"缓存服务"}),e.jsx(C,{color:"warning",children:"警告"})]})]})})})]})]})},Yn=()=>{const[s,l]=c.useState([{id:"1",userId:"U001",userName:"张三",email:"zhangsan@example.com",role:"管理员",status:"active",createTime:"2024-01-15 10:30:00",lastLogin:"2024-08-09 09:15:00"},{id:"2",userId:"U002",userName:"李四",email:"lisi@example.com",role:"普通用户",status:"active",createTime:"2024-02-20 14:20:00",lastLogin:"2024-08-08 16:30:00"},{id:"3",userId:"U003",userName:"王五",email:"wangwu@example.com",role:"编辑员",status:"inactive",createTime:"2024-03-10 09:45:00",lastLogin:"2024-08-05 11:20:00"},{id:"4",userId:"U004",userName:"赵六",email:"zhaoliu@example.com",role:"普通用户",status:"active",createTime:"2024-04-05 16:15:00",lastLogin:"2024-08-09 08:45:00"},{id:"5",userId:"U005",userName:"钱七",email:"qianqi@example.com",role:"审核员",status:"active",createTime:"2024-05-12 11:30:00",lastLogin:"2024-08-07 14:10:00"}]),[x,d]=c.useState(!1),[o,a]=c.useState(""),[i,p]=c.useState(!1),[m,F]=c.useState(!1),[z,O]=c.useState(null),[w,_]=c.useState(null),[f]=E.useForm(),B={background:"#ffffff",borderRadius:"8px",boxShadow:"0 1px 4px rgba(0,21,41,.08)",border:"1px solid #f0f0f0",marginBottom:"16px"},j=b=>{const y={active:{color:"success",text:"启用"},inactive:{color:"error",text:"禁用"}}[b]||{color:"default",text:"未知"};return e.jsx(C,{color:y.color,children:y.text})},X=[{title:"用户信息",dataIndex:"userName",key:"userName",width:180,align:"center",render:(b,M)=>e.jsxs(h,{size:4,style:{whiteSpace:"nowrap"},children:[e.jsx(oe,{style:{color:"#1890ff",fontSize:"14px"}}),e.jsx("span",{style:{fontWeight:500},children:b}),e.jsx(C,{style:{margin:0,fontSize:"11px",padding:"0 4px"},children:M.userId})]})},{title:"邮箱",dataIndex:"email",key:"email",width:200,align:"center"},{title:"角色",dataIndex:"role",key:"role",width:120,align:"center"},{title:"状态",dataIndex:"status",key:"status",width:100,align:"center",render:b=>j(b)},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:160,align:"center",sorter:!0},{title:"最后登录",dataIndex:"lastLogin",key:"lastLogin",width:160,align:"center",sorter:!0},{title:"操作",key:"action",width:200,align:"center",render:(b,M)=>e.jsxs(h,{size:8,children:[e.jsx(g,{type:"link",icon:e.jsx(Ct,{}),onClick:()=>ce(M),size:"small",children:"详情"}),e.jsx(g,{type:"link",icon:e.jsx(Je,{}),onClick:()=>ie(M),size:"small",children:"编辑"}),e.jsx(St,{title:"确定要删除这个用户吗？",onConfirm:()=>Q(M),okText:"确定",cancelText:"取消",children:e.jsx(g,{type:"link",danger:!0,icon:e.jsx(Xe,{}),size:"small",children:"删除"})})]})}],ne=s.filter(b=>b.userName.toLowerCase().includes(o.toLowerCase())||b.email.toLowerCase().includes(o.toLowerCase())||b.userId.toLowerCase().includes(o.toLowerCase())),ae=()=>{O(null),f.resetFields(),p(!0)},ie=b=>{O(b),f.setFieldsValue(b),p(!0)},ce=b=>{_(b),F(!0)},Q=async b=>{d(!0);try{await ge(500),l(s.filter(M=>M.id!==b.id)),H.success("删除成功！")}catch{H.error("删除失败！")}finally{d(!1)}},u=async b=>{d(!0);try{if(await ge(1e3),z)l(s.map(M=>M.id===z.id?{...M,...b}:M)),H.success("编辑成功！");else{const M={id:Date.now().toString(),userId:`U${String(s.length+1).padStart(3,"0")}`,...b,createTime:new Date().toLocaleString("zh-CN"),lastLogin:"-"};l([...s,M]),H.success("新增成功！")}p(!1),f.resetFields()}catch{H.error("操作失败！")}finally{d(!1)}};return e.jsxs("div",{style:{background:"transparent"},children:[" ",e.jsx(D,{style:B,children:e.jsxs(L,{gutter:16,align:"middle",children:[e.jsx(v,{flex:"auto",children:e.jsx(te.Search,{placeholder:"搜索用户名、邮箱或用户ID...",allowClear:!0,value:o,onChange:b=>a(b.target.value),style:{maxWidth:400},prefix:e.jsx(Qe,{})})}),e.jsx(v,{children:e.jsx(g,{type:"primary",icon:e.jsx(Ge,{}),onClick:ae,children:"新增用户"})})]})}),e.jsx(D,{style:B,children:e.jsx(wt,{columns:X,dataSource:ne,rowKey:"id",loading:x,scroll:{x:"max-content"},pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:(b,M)=>`第 ${M[0]}-${M[1]} 条/共 ${b} 条`}})}),e.jsx(ze,{title:z?"编辑用户":"新增用户",open:i,onCancel:()=>p(!1),footer:null,width:600,children:e.jsxs(E,{form:f,layout:"vertical",onFinish:u,children:[e.jsxs(L,{gutter:16,children:[e.jsx(v,{span:12,children:e.jsx(E.Item,{name:"userName",label:"用户名",rules:[{required:!0,message:"请输入用户名！"},{min:2,max:20,message:"用户名长度为2-20个字符！"}],children:e.jsx(te,{placeholder:"请输入用户名"})})}),e.jsx(v,{span:12,children:e.jsx(E.Item,{name:"email",label:"邮箱",rules:[{required:!0,message:"请输入邮箱！"},{type:"email",message:"请输入有效的邮箱地址！"}],children:e.jsx(te,{placeholder:"请输入邮箱"})})})]}),e.jsxs(L,{gutter:16,children:[e.jsx(v,{span:12,children:e.jsx(E.Item,{name:"role",label:"角色",rules:[{required:!0,message:"请选择角色！"}],children:e.jsxs(K,{placeholder:"请选择角色",children:[e.jsx(K.Option,{value:"管理员",children:"管理员"}),e.jsx(K.Option,{value:"编辑员",children:"编辑员"}),e.jsx(K.Option,{value:"审核员",children:"审核员"}),e.jsx(K.Option,{value:"普通用户",children:"普通用户"})]})})}),e.jsx(v,{span:12,children:e.jsx(E.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态！"}],children:e.jsxs(K,{placeholder:"请选择状态",children:[e.jsx(K.Option,{value:"active",children:"启用"}),e.jsx(K.Option,{value:"inactive",children:"禁用"})]})})})]}),e.jsx(E.Item,{style:{textAlign:"right",marginBottom:0},children:e.jsxs(h,{children:[e.jsx(g,{onClick:()=>p(!1),children:"取消"}),e.jsx(g,{type:"primary",htmlType:"submit",loading:x,children:z?"更新":"创建"})]})})]})}),e.jsx(ze,{title:"用户详情",open:m,onCancel:()=>F(!1),footer:[e.jsx(g,{onClick:()=>F(!1),children:"关闭"},"close")],width:600,children:w&&e.jsxs(W,{column:2,bordered:!0,children:[e.jsx(W.Item,{label:"用户ID",children:w.userId}),e.jsx(W.Item,{label:"用户名",children:w.userName}),e.jsx(W.Item,{label:"邮箱",children:w.email}),e.jsx(W.Item,{label:"角色",children:w.role}),e.jsx(W.Item,{label:"状态",children:j(w.status)}),e.jsx(W.Item,{label:"创建时间",children:w.createTime}),e.jsx(W.Item,{label:"最后登录",span:2,children:w.lastLogin})]})})]})},Zn=()=>{const[s,l]=c.useState([{id:"1",roleName:"超级管理员",roleCode:"SUPER_ADMIN",description:"拥有系统所有权限的超级管理员",userCount:1,permissions:["user:read","user:write","user:delete","role:read","role:write","role:delete","permission:read","permission:write"],status:"active",createTime:"2024-01-01 00:00:00"},{id:"2",roleName:"管理员",roleCode:"ADMIN",description:"系统管理员，拥有大部分管理权限",userCount:3,permissions:["user:read","user:write","role:read","permission:read"],status:"active",createTime:"2024-01-15 10:30:00"},{id:"3",roleName:"编辑员",roleCode:"EDITOR",description:"内容编辑员，负责内容的编辑和管理",userCount:5,permissions:["user:read","content:read","content:write"],status:"active",createTime:"2024-02-01 14:20:00"},{id:"4",roleName:"审核员",roleCode:"AUDITOR",description:"内容审核员，负责内容的审核工作",userCount:2,permissions:["user:read","content:read","audit:read","audit:write"],status:"active",createTime:"2024-02-15 09:45:00"},{id:"5",roleName:"普通用户",roleCode:"USER",description:"系统普通用户，只有基本的查看权限",userCount:15,permissions:["user:read"],status:"active",createTime:"2024-03-01 16:15:00"}]),x=[{value:"user:read",label:"用户查看"},{value:"user:write",label:"用户编辑"},{value:"user:delete",label:"用户删除"},{value:"role:read",label:"角色查看"},{value:"role:write",label:"角色编辑"},{value:"role:delete",label:"角色删除"},{value:"permission:read",label:"权限查看"},{value:"permission:write",label:"权限编辑"},{value:"content:read",label:"内容查看"},{value:"content:write",label:"内容编辑"},{value:"audit:read",label:"审核查看"},{value:"audit:write",label:"审核操作"}],[d,o]=c.useState(!1),[a,i]=c.useState(""),[p,m]=c.useState(!1),[F,z]=c.useState(!1),[O,w]=c.useState(null),[_,f]=c.useState(null),[B]=E.useForm(),j={background:"#ffffff",borderRadius:"8px",boxShadow:"0 1px 4px rgba(0,21,41,.08)",border:"1px solid #f0f0f0",marginBottom:"16px"},X=y=>{const I={active:{color:"success",text:"启用"},inactive:{color:"error",text:"禁用"}}[y]||{color:"default",text:"未知"};return e.jsx(C,{color:I.color,children:I.text})},ne=y=>y.slice(0,3).map(r=>{const I=x.find(V=>V.value===r);return e.jsx(C,{style:{margin:"2px"},children:(I==null?void 0:I.label)||r},r)}).concat(y.length>3?[e.jsxs(C,{style:{margin:"2px"},children:["+",y.length-3]},"more")]:[]),ae=[{title:"角色信息",dataIndex:"roleName",key:"roleName",width:180,align:"center",render:(y,r)=>e.jsxs(h,{size:4,style:{whiteSpace:"nowrap"},children:[e.jsx(fe,{style:{color:"#722ed1",fontSize:"14px"}}),e.jsx("span",{style:{fontWeight:500},children:y}),e.jsx(C,{style:{margin:0,fontSize:"11px",padding:"0 4px"},children:r.roleCode})]})},{title:"描述",dataIndex:"description",key:"description",width:200,align:"center",ellipsis:!0},{title:"用户数量",dataIndex:"userCount",key:"userCount",width:100,align:"center",render:y=>e.jsxs(h,{children:[e.jsx(ke,{style:{color:"#1890ff"}}),e.jsx("span",{children:y})]})},{title:"权限",dataIndex:"permissions",key:"permissions",width:200,align:"center",render:y=>e.jsx("div",{style:{textAlign:"center"},children:ne(y)})},{title:"状态",dataIndex:"status",key:"status",width:100,align:"center",render:y=>X(y)},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:160,align:"center",sorter:!0},{title:"操作",key:"action",width:200,align:"center",render:(y,r)=>e.jsxs(h,{size:8,children:[e.jsx(g,{type:"link",icon:e.jsx(Ct,{}),onClick:()=>u(r),size:"small",children:"详情"}),e.jsx(g,{type:"link",icon:e.jsx(Je,{}),onClick:()=>Q(r),size:"small",children:"编辑"}),e.jsx(St,{title:"确定要删除这个角色吗？",onConfirm:()=>b(r),okText:"确定",cancelText:"取消",children:e.jsx(g,{type:"link",danger:!0,icon:e.jsx(Xe,{}),size:"small",children:"删除"})})]})}],ie=s.filter(y=>y.roleName.toLowerCase().includes(a.toLowerCase())||y.roleCode.toLowerCase().includes(a.toLowerCase())||y.description.toLowerCase().includes(a.toLowerCase())),ce=()=>{w(null),B.resetFields(),m(!0)},Q=y=>{w(y),B.setFieldsValue(y),m(!0)},u=y=>{f(y),z(!0)},b=async y=>{o(!0);try{await ge(500),l(s.filter(r=>r.id!==y.id)),H.success("删除成功！")}catch{H.error("删除失败！")}finally{o(!1)}},M=async y=>{o(!0);try{if(await ge(1e3),O)l(s.map(r=>r.id===O.id?{...r,...y}:r)),H.success("编辑成功！");else{const r={id:Date.now().toString(),...y,userCount:0,createTime:new Date().toLocaleString("zh-CN")};l([...s,r]),H.success("新增成功！")}m(!1),B.resetFields()}catch{H.error("操作失败！")}finally{o(!1)}};return e.jsxs("div",{style:{background:"transparent"},children:[" ",e.jsx(D,{style:j,children:e.jsxs(L,{gutter:16,align:"middle",children:[e.jsx(v,{flex:"auto",children:e.jsx(te.Search,{placeholder:"搜索角色名称、代码或描述...",allowClear:!0,value:a,onChange:y=>i(y.target.value),style:{maxWidth:400},prefix:e.jsx(Qe,{})})}),e.jsx(v,{children:e.jsx(g,{type:"primary",icon:e.jsx(Ge,{}),onClick:ce,children:"新增角色"})})]})}),e.jsx(D,{style:j,children:e.jsx(wt,{columns:ae,dataSource:ie,rowKey:"id",loading:d,scroll:{x:"max-content"},pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:(y,r)=>`第 ${r[0]}-${r[1]} 条/共 ${y} 条`}})}),e.jsx(ze,{title:O?"编辑角色":"新增角色",open:p,onCancel:()=>m(!1),footer:null,width:700,children:e.jsxs(E,{form:B,layout:"vertical",onFinish:M,children:[e.jsxs(L,{gutter:16,children:[e.jsx(v,{span:12,children:e.jsx(E.Item,{name:"roleName",label:"角色名称",rules:[{required:!0,message:"请输入角色名称！"},{min:2,max:20,message:"角色名称长度为2-20个字符！"}],children:e.jsx(te,{placeholder:"请输入角色名称"})})}),e.jsx(v,{span:12,children:e.jsx(E.Item,{name:"roleCode",label:"角色代码",rules:[{required:!0,message:"请输入角色代码！"},{pattern:/^[A-Z_]+$/,message:"角色代码只能包含大写字母和下划线！"}],children:e.jsx(te,{placeholder:"请输入角色代码"})})})]}),e.jsx(E.Item,{name:"description",label:"角色描述",rules:[{required:!0,message:"请输入角色描述！"}],children:e.jsx(te.TextArea,{rows:3,placeholder:"请输入角色描述"})}),e.jsx(E.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态！"}],children:e.jsx(Ce.Group,{children:e.jsx(Ce,{value:"active",children:"启用"})})}),e.jsx(Wt,{children:"权限分配"}),e.jsx(E.Item,{name:"permissions",label:"权限列表",rules:[{required:!0,message:"请选择至少一个权限！"}],children:e.jsx(Ce.Group,{children:e.jsx(L,{gutter:[16,8],children:x.map(y=>e.jsx(v,{span:8,children:e.jsx(Ce,{value:y.value,children:y.label})},y.value))})})}),e.jsx(E.Item,{style:{textAlign:"right",marginBottom:0},children:e.jsxs(h,{children:[e.jsx(g,{onClick:()=>m(!1),children:"取消"}),e.jsx(g,{type:"primary",htmlType:"submit",loading:d,children:O?"更新":"创建"})]})})]})}),e.jsx(ze,{title:"角色详情",open:F,onCancel:()=>z(!1),footer:[e.jsx(g,{onClick:()=>z(!1),children:"关闭"},"close")],width:700,children:_&&e.jsxs(e.Fragment,{children:[e.jsxs(W,{column:2,bordered:!0,children:[e.jsx(W.Item,{label:"角色名称",children:_.roleName}),e.jsx(W.Item,{label:"角色代码",children:_.roleCode}),e.jsx(W.Item,{label:"用户数量",children:_.userCount}),e.jsx(W.Item,{label:"状态",children:X(_.status)}),e.jsx(W.Item,{label:"创建时间",span:2,children:_.createTime}),e.jsx(W.Item,{label:"角色描述",span:2,children:_.description})]}),e.jsx(Wt,{children:"权限列表"}),e.jsx("div",{children:_.permissions.map(y=>{const r=x.find(I=>I.value===y);return e.jsx(C,{style:{margin:"4px"},children:(r==null?void 0:r.label)||y},y)})})]})})]})},Kn=()=>{const[s,l]=c.useState([{id:"1",permissionName:"系统管理",permissionCode:"system",permissionType:"menu",parentId:null,description:"系统管理模块菜单权限",status:"active",createTime:"2024-01-01 00:00:00"},{id:"2",permissionName:"用户管理",permissionCode:"system:user",permissionType:"menu",parentId:"1",description:"用户管理页面访问权限",status:"active",createTime:"2024-01-01 00:00:00"},{id:"3",permissionName:"用户查看",permissionCode:"user:read",permissionType:"api",parentId:"2",description:"查看用户信息的API权限",status:"active",createTime:"2024-01-01 00:00:00"},{id:"4",permissionName:"用户编辑",permissionCode:"user:write",permissionType:"api",parentId:"2",description:"编辑用户信息的API权限",status:"active",createTime:"2024-01-01 00:00:00"},{id:"5",permissionName:"新增用户按钮",permissionCode:"user:add:button",permissionType:"button",parentId:"2",description:"新增用户按钮显示权限",status:"active",createTime:"2024-01-01 00:00:00"},{id:"6",permissionName:"角色管理",permissionCode:"system:role",permissionType:"menu",parentId:"1",description:"角色管理页面访问权限",status:"active",createTime:"2024-01-01 00:00:00"},{id:"7",permissionName:"角色查看",permissionCode:"role:read",permissionType:"api",parentId:"6",description:"查看角色信息的API权限",status:"active",createTime:"2024-01-01 00:00:00"},{id:"8",permissionName:"权限管理",permissionCode:"system:permission",permissionType:"menu",parentId:"1",description:"权限管理页面访问权限",status:"active",createTime:"2024-01-01 00:00:00"}]),[x,d]=c.useState(!1),[o,a]=c.useState(""),[i,p]=c.useState(!1),[m,F]=c.useState(!1),[z,O]=c.useState(null),[w,_]=c.useState(null),[f]=E.useForm(),B={background:"#ffffff",borderRadius:"8px",boxShadow:"0 1px 4px rgba(0,21,41,.08)",border:"1px solid #f0f0f0",marginBottom:"16px"},j=r=>{const V={menu:{color:"blue",text:"菜单",icon:e.jsx(cs,{})},button:{color:"green",text:"按钮",icon:e.jsx(cn,{})},api:{color:"orange",text:"API",icon:e.jsx(an,{})}}[r]||{color:"default",text:"未知",icon:null};return e.jsx(C,{color:V.color,icon:V.icon,children:V.text})},X=r=>{const V={active:{color:"success",text:"启用"},inactive:{color:"error",text:"禁用"}}[r]||{color:"default",text:"未知"};return e.jsx(C,{color:V.color,children:V.text})},ne=r=>{if(!r)return"-";const I=s.find(V=>V.id===r);return I?I.permissionName:"-"},ae=()=>{const r=[],I=s.filter(q=>q.parentId===null),V=q=>{const Re=s.filter(Y=>Y.parentId===q.id);return{title:q.permissionName,value:q.id,key:q.id,children:Re.map(Y=>V(Y))}};return I.forEach(q=>{r.push(V(q))}),r},ie=[{title:"权限信息",dataIndex:"permissionName",key:"permissionName",width:200,align:"center",render:r=>e.jsxs(h,{size:4,style:{whiteSpace:"nowrap"},children:[e.jsx(Fe,{style:{color:"#fa8c16",fontSize:"14px"}}),e.jsx("span",{style:{fontWeight:500},children:r})]})},{title:"权限代码",dataIndex:"permissionCode",key:"permissionCode",width:150,align:"center",render:r=>e.jsx(C,{style:{fontFamily:"monospace"},children:r})},{title:"权限类型",dataIndex:"permissionType",key:"permissionType",width:100,align:"center",render:r=>j(r)},{title:"父级权限",dataIndex:"parentId",key:"parentId",width:120,align:"center",render:r=>ne(r)},{title:"描述",dataIndex:"description",key:"description",width:200,align:"center",ellipsis:!0},{title:"状态",dataIndex:"status",key:"status",width:100,align:"center",render:r=>X(r)},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:160,align:"center",sorter:!0},{title:"操作",key:"action",width:200,align:"center",render:(r,I)=>e.jsxs(h,{size:8,children:[e.jsx(g,{type:"link",icon:e.jsx(Ct,{}),onClick:()=>b(I),size:"small",children:"详情"}),e.jsx(g,{type:"link",icon:e.jsx(Je,{}),onClick:()=>u(I),size:"small",children:"编辑"}),e.jsx(St,{title:"确定要删除这个权限吗？",onConfirm:()=>M(I),okText:"确定",cancelText:"取消",children:e.jsx(g,{type:"link",danger:!0,icon:e.jsx(Xe,{}),size:"small",children:"删除"})})]})}],ce=s.filter(r=>r.permissionName.toLowerCase().includes(o.toLowerCase())||r.permissionCode.toLowerCase().includes(o.toLowerCase())||r.description.toLowerCase().includes(o.toLowerCase())),Q=()=>{O(null),f.resetFields(),p(!0)},u=r=>{O(r),f.setFieldsValue(r),p(!0)},b=r=>{_(r),F(!0)},M=async r=>{d(!0);try{await ge(500),l(s.filter(I=>I.id!==r.id)),H.success("删除成功！")}catch{H.error("删除失败！")}finally{d(!1)}},y=async r=>{d(!0);try{if(await ge(1e3),z)l(s.map(I=>I.id===z.id?{...I,...r}:I)),H.success("编辑成功！");else{const I={id:Date.now().toString(),...r,createTime:new Date().toLocaleString("zh-CN")};l([...s,I]),H.success("新增成功！")}p(!1),f.resetFields()}catch{H.error("操作失败！")}finally{d(!1)}};return e.jsxs("div",{style:{background:"transparent"},children:[" ",e.jsx(D,{style:B,children:e.jsxs(L,{gutter:16,align:"middle",children:[e.jsx(v,{flex:"auto",children:e.jsx(te.Search,{placeholder:"搜索权限名称、代码或描述...",allowClear:!0,value:o,onChange:r=>a(r.target.value),style:{maxWidth:400},prefix:e.jsx(Qe,{})})}),e.jsx(v,{children:e.jsx(g,{type:"primary",icon:e.jsx(Ge,{}),onClick:Q,children:"新增权限"})})]})}),e.jsx(D,{style:B,children:e.jsx(wt,{columns:ie,dataSource:ce,rowKey:"id",loading:x,scroll:{x:"max-content"},pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:(r,I)=>`第 ${I[0]}-${I[1]} 条/共 ${r} 条`}})}),e.jsx(ze,{title:z?"编辑权限":"新增权限",open:i,onCancel:()=>p(!1),footer:null,width:600,children:e.jsxs(E,{form:f,layout:"vertical",onFinish:y,children:[e.jsxs(L,{gutter:16,children:[e.jsx(v,{span:12,children:e.jsx(E.Item,{name:"permissionName",label:"权限名称",rules:[{required:!0,message:"请输入权限名称！"},{min:2,max:50,message:"权限名称长度为2-50个字符！"}],children:e.jsx(te,{placeholder:"请输入权限名称"})})}),e.jsx(v,{span:12,children:e.jsx(E.Item,{name:"permissionCode",label:"权限代码",rules:[{required:!0,message:"请输入权限代码！"},{pattern:/^[a-z:_]+$/,message:"权限代码只能包含小写字母、冒号和下划线！"}],children:e.jsx(te,{placeholder:"请输入权限代码"})})})]}),e.jsxs(L,{gutter:16,children:[e.jsx(v,{span:12,children:e.jsx(E.Item,{name:"permissionType",label:"权限类型",rules:[{required:!0,message:"请选择权限类型！"}],children:e.jsxs(K,{placeholder:"请选择权限类型",children:[e.jsx(K.Option,{value:"menu",children:"菜单"}),e.jsx(K.Option,{value:"button",children:"按钮"}),e.jsx(K.Option,{value:"api",children:"API"})]})})}),e.jsx(v,{span:12,children:e.jsx(E.Item,{name:"parentId",label:"父级权限",children:e.jsx(on,{placeholder:"请选择父级权限",allowClear:!0,treeData:ae()})})})]}),e.jsx(E.Item,{name:"description",label:"权限描述",rules:[{required:!0,message:"请输入权限描述！"}],children:e.jsx(te.TextArea,{rows:3,placeholder:"请输入权限描述"})}),e.jsx(E.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态！"}],children:e.jsxs(K,{placeholder:"请选择状态",children:[e.jsx(K.Option,{value:"active",children:"启用"}),e.jsx(K.Option,{value:"inactive",children:"禁用"})]})}),e.jsx(E.Item,{style:{textAlign:"right",marginBottom:0},children:e.jsxs(h,{children:[e.jsx(g,{onClick:()=>p(!1),children:"取消"}),e.jsx(g,{type:"primary",htmlType:"submit",loading:x,children:z?"更新":"创建"})]})})]})}),e.jsx(ze,{title:"权限详情",open:m,onCancel:()=>F(!1),footer:[e.jsx(g,{onClick:()=>F(!1),children:"关闭"},"close")],width:600,children:w&&e.jsxs(W,{column:2,bordered:!0,children:[e.jsx(W.Item,{label:"权限名称",children:w.permissionName}),e.jsx(W.Item,{label:"权限代码",children:w.permissionCode}),e.jsx(W.Item,{label:"权限类型",children:j(w.permissionType)}),e.jsx(W.Item,{label:"父级权限",children:ne(w.parentId)}),e.jsx(W.Item,{label:"状态",children:X(w.status)}),e.jsx(W.Item,{label:"创建时间",children:w.createTime}),e.jsx(W.Item,{label:"权限描述",span:2,children:w.description})]})})]})},{Header:Xn,Sider:Gn,Content:Jn}=vt;function Qn(){const[s,l]=c.useState(!1),[x,d]=c.useState(!0),o=It(),a=mn(),i=[{key:"/",icon:e.jsx(un,{}),label:"首页"},{key:"/dashboard",icon:e.jsx(pn,{}),label:"态势大屏"},{key:"/video-monitoring",icon:e.jsx(Ie,{}),label:"视频监控"},{key:"/topology-management",icon:e.jsx(hs,{}),label:"拓扑图管理"},{key:"/system",icon:e.jsx(Ze,{}),label:"系统管理",children:[{key:"/system/users",label:"用户管理"},{key:"/system/roles",label:"角色管理"},{key:"/system/permissions",label:"权限管理"}]}],p=[{key:"profile",icon:e.jsx(oe,{}),label:"个人信息"},{type:"divider"},{key:"logout",icon:e.jsx(fn,{}),label:"退出登录",onClick:()=>{d(!1),o("/login")}}];return x?e.jsxs(vt,{style:{minHeight:"100vh"},children:[e.jsxs(Gn,{trigger:null,collapsible:!0,collapsed:s,style:{background:"#fff"},children:[e.jsx("div",{style:{height:32,margin:16,background:"#f0f2f5",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",color:"#1890ff",fontWeight:"bold"},children:s?"MS":"管理系统"}),e.jsx(dn,{theme:"light",mode:"inline",selectedKeys:[a.pathname],defaultOpenKeys:["/system"],items:i,onClick:({key:m})=>{o(m)},style:{background:"#fff",border:"none"}})]}),e.jsxs(vt,{children:[e.jsxs(Xn,{style:{padding:"0 16px",background:"#fff",boxShadow:"0 1px 4px rgba(0,21,41,.08)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(g,{type:"text",icon:s?e.jsx(bt,{}):e.jsx(jt,{}),onClick:()=>l(!s),style:{fontSize:"16px",width:64,height:64}}),e.jsx(xn,{menu:{items:p},placement:"bottomRight",children:e.jsxs(h,{style:{cursor:"pointer"},children:[e.jsx(Oe,{icon:e.jsx(oe,{})}),e.jsx("span",{children:"管理员"})]})})]}),e.jsx(Jn,{style:{background:"transparent",margin:"16px",minHeight:"calc(100vh - 112px)"},children:e.jsxs(yn,{children:[e.jsx(de,{path:"/",element:e.jsx(Pn,{})}),e.jsx(de,{path:"/login",element:e.jsx(os,{onLogin:()=>d(!0)})}),e.jsx(de,{path:"/dashboard",element:e.jsx(Ln,{})}),e.jsx(de,{path:"/video-monitoring",element:e.jsx(On,{})}),e.jsx(de,{path:"/topology-management",element:e.jsx(Vn,{})}),e.jsx(de,{path:"/system",element:e.jsx(Un,{})}),e.jsx(de,{path:"/system/users",element:e.jsx(Yn,{})}),e.jsx(de,{path:"/system/roles",element:e.jsx(Zn,{})}),e.jsx(de,{path:"/system/permissions",element:e.jsx(Kn,{})})]})})]})]}):e.jsx(os,{onLogin:()=>d(!0)})}wn.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(gn,{children:e.jsx(hn,{locale:En,children:e.jsx(Qn,{})})})}));
