import{r as Es,a as _s,g as Ns}from"./vendor-BtP0CW_r.js";import{C as R,R as M,a as v,T as C,S as _e,b as h,L as G,A as Ae,c as ee,d as Ps,e as we,f as de,g as Ne,h as Ue,i as Ye,j as Ze,k as As,l as le,r as c,F as B,I as Y,m as Ls,n as je,B as y,s as F,o as zt,p as ge,q as Rt,t as st,u as be,v as Dt,w as ns,x as Ie,P as is,y as Fs,z as Pe,D as ve,E as qs,G as O,H as Os,J as Ws,K as Hs,M as He,N as Ve,O as rs,Q as X,U as Tt,V as Bt,W as ls,X as ft,Y as Vs,Z as Us,_ as Ys,$ as os,a0 as as,a1 as cs,a2 as Zs,a3 as Ks,a4 as Ke,a5 as Xs,a6 as Q,a7 as ht,a8 as mt,a9 as $t,aa as Mt,ab as Et,ac as Gs,ad as Js,ae as Qs,af as en,ag as _t,ah as tn,ai as Nt,aj as gt,ak as Ce,al as A,am as jt,an as bt,ao as Pt,ap as sn,aq as nn,ar as rn,as as yt,at as ln,au as on,av as an,aw as cn,ax as dn,ay as xn}from"./antd-Cdbokpss.js";import{u as vt,a as un,R as pn,b as re,B as fn}from"./router-DRsrmsKq.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&d(n)}).observe(document,{childList:!0,subtree:!0});function x(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(o){if(o.ep)return;o.ep=!0;const a=x(o);fetch(o.href,a)}})();var nt={exports:{}},ke={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var At;function hn(){if(At)return ke;At=1;var s=Es(),l=Symbol.for("react.element"),x=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function n(p,g,_){var k,N={},w=null,$=null;_!==void 0&&(w=""+_),g.key!==void 0&&(w=""+g.key),g.ref!==void 0&&($=g.ref);for(k in g)d.call(g,k)&&!a.hasOwnProperty(k)&&(N[k]=g[k]);if(p&&p.defaultProps)for(k in g=p.defaultProps,g)N[k]===void 0&&(N[k]=g[k]);return{$$typeof:l,type:p,key:w,ref:$,props:N,_owner:o.current}}return ke.Fragment=x,ke.jsx=n,ke.jsxs=n,ke}var Lt;function mn(){return Lt||(Lt=1,nt.exports=hn()),nt.exports}var e=mn(),Fe={},Ft;function yn(){if(Ft)return Fe;Ft=1;var s=_s();return Fe.createRoot=s.createRoot,Fe.hydrateRoot=s.hydrateRoot,Fe}var gn=yn(),ze={},it={exports:{}},qt;function Xe(){return qt||(qt=1,function(s){function l(x){return x&&x.__esModule?x:{default:x}}s.exports=l,s.exports.__esModule=!0,s.exports.default=s.exports}(it)),it.exports}var Re={},Ot;function jn(){if(Ot)return Re;Ot=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=void 0;var s={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};return Re.default=s,Re}var De={},Te={},Be={},rt={exports:{}},lt={exports:{}},ot={exports:{}},at={exports:{}},Wt;function ds(){return Wt||(Wt=1,function(s){function l(x){"@babel/helpers - typeof";return s.exports=l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},s.exports.__esModule=!0,s.exports.default=s.exports,l(x)}s.exports=l,s.exports.__esModule=!0,s.exports.default=s.exports}(at)),at.exports}var ct={exports:{}},Ht;function bn(){return Ht||(Ht=1,function(s){var l=ds().default;function x(d,o){if(l(d)!="object"||!d)return d;var a=d[Symbol.toPrimitive];if(a!==void 0){var n=a.call(d,o||"default");if(l(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(d)}s.exports=x,s.exports.__esModule=!0,s.exports.default=s.exports}(ct)),ct.exports}var Vt;function vn(){return Vt||(Vt=1,function(s){var l=ds().default,x=bn();function d(o){var a=x(o,"string");return l(a)=="symbol"?a:a+""}s.exports=d,s.exports.__esModule=!0,s.exports.default=s.exports}(ot)),ot.exports}var Ut;function wn(){return Ut||(Ut=1,function(s){var l=vn();function x(d,o,a){return(o=l(o))in d?Object.defineProperty(d,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):d[o]=a,d}s.exports=x,s.exports.__esModule=!0,s.exports.default=s.exports}(lt)),lt.exports}var Yt;function Cn(){return Yt||(Yt=1,function(s){var l=wn();function x(o,a){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(o);a&&(p=p.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),n.push.apply(n,p)}return n}function d(o){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?x(Object(n),!0).forEach(function(p){l(o,p,n[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(p){Object.defineProperty(o,p,Object.getOwnPropertyDescriptor(n,p))})}return o}s.exports=d,s.exports.__esModule=!0,s.exports.default=s.exports}(rt)),rt.exports}var $e={},Zt;function Sn(){return Zt||(Zt=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.commonLocale=void 0,$e.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0}),$e}var Kt;function In(){if(Kt)return Be;Kt=1;var s=Xe().default;Object.defineProperty(Be,"__esModule",{value:!0}),Be.default=void 0;var l=s(Cn()),x=Sn(),d=(0,l.default)((0,l.default)({},x.commonLocale),{},{locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",week:"周",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪",yearFormat:"YYYY年",cellDateFormat:"D",monthBeforeYear:!1});return Be.default=d,Be}var Me={},Xt;function xs(){if(Xt)return Me;Xt=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.default=void 0;const s={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};return Me.default=s,Me}var Gt;function us(){if(Gt)return Te;Gt=1;var s=Xe().default;Object.defineProperty(Te,"__esModule",{value:!0}),Te.default=void 0;var l=s(In()),x=s(xs());const d={lang:Object.assign({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},l.default),timePickerLocale:Object.assign({},x.default)};return d.lang.ok="确定",Te.default=d,Te}var Jt;function kn(){if(Jt)return De;Jt=1;var s=Xe().default;Object.defineProperty(De,"__esModule",{value:!0}),De.default=void 0;var l=s(us());return De.default=l.default,De}var Qt;function zn(){if(Qt)return ze;Qt=1;var s=Xe().default;Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=void 0;var l=s(jn()),x=s(kn()),d=s(us()),o=s(xs());const a="${label}不是一个有效的${type}",n={locale:"zh-cn",Pagination:l.default,DatePicker:d.default,TimePicker:o.default,Calendar:x.default,global:{placeholder:"请选择",close:"关闭"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckAll:"全选",filterSearchPlaceholder:"在筛选项中搜索",emptyText:"暂无数据",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Tour:{Next:"下一步",Previous:"上一步",Finish:"结束导览"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{titles:["",""],searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",deselectAll:"取消全选",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开",collapse:"收起"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:a,method:a,array:a,object:a,number:a,date:a,boolean:a,integer:a,float:a,regexp:a,email:a,url:a,hex:a},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"},QRCode:{expired:"二维码过期",refresh:"点击刷新",scanned:"已扫描"},ColorPicker:{presetEmpty:"暂无",transparent:"无色",singleColor:"单色",gradientColor:"渐变色"}};return ze.default=n,ze}var dt,es;function Rn(){return es||(es=1,dt=zn()),dt}var Dn=Rn();const Tn=Ns(Dn);function Bn(s){return new Date(s).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}function $n(s){const l=new Date,x=new Date(s),d=l.getTime()-x.getTime(),o=Math.floor(d/(1e3*60)),a=Math.floor(d/(1e3*60*60)),n=Math.floor(d/(1e3*60*60*24));return o<1?"刚刚":o<60?`${o}分钟前`:a<24?`${a}小时前`:n<7?`${n}天前`:Bn(s)}function xe(s){return new Promise(l=>setTimeout(l,s))}const Mn=()=>{const s=vt(),l={background:"#ffffff",borderRadius:"8px",boxShadow:"0 1px 4px rgba(0,21,41,.08)",border:"1px solid #f0f0f0",marginBottom:"16px"},x=[{title:"总用户数",value:1234,prefix:e.jsx(ee,{style:{color:"#52c41a"}}),suffix:e.jsx(Ps,{style:{color:"#52c41a"}}),valueStyle:{color:"#52c41a"}},{title:"在线用户",value:89,prefix:e.jsx(we,{style:{color:"#1890ff"}}),valueStyle:{color:"#1890ff"}},{title:"系统角色",value:12,prefix:e.jsx(de,{style:{color:"#722ed1"}}),valueStyle:{color:"#722ed1"}},{title:"权限数量",value:45,prefix:e.jsx(Ne,{style:{color:"#fa8c16"}}),valueStyle:{color:"#fa8c16"}}],d=[{title:"用户管理",description:"管理系统用户信息",icon:e.jsx(ee,{style:{fontSize:"24px",color:"#1890ff"}}),path:"/system/users"},{title:"角色管理",description:"配置用户角色权限",icon:e.jsx(de,{style:{fontSize:"24px",color:"#722ed1"}}),path:"/system/roles"},{title:"权限管理",description:"设置系统访问权限",icon:e.jsx(Ne,{style:{fontSize:"24px",color:"#fa8c16"}}),path:"/system/permissions"}],o=[{id:"1",user:"张三",action:"登录系统",type:"login",time:new Date(Date.now()-300*1e3).toISOString()},{id:"2",user:"李四",action:"编辑用户信息",type:"edit",time:new Date(Date.now()-900*1e3).toISOString()},{id:"3",user:"王五",action:"新增角色",type:"create",time:new Date(Date.now()-1800*1e3).toISOString()},{id:"4",user:"赵六",action:"删除权限",type:"delete",time:new Date(Date.now()-2700*1e3).toISOString()},{id:"5",user:"钱七",action:"登录系统",type:"login",time:new Date(Date.now()-3600*1e3).toISOString()}],a=n=>{const g={login:{color:"blue",icon:e.jsx(As,{})},edit:{color:"orange",icon:e.jsx(Ze,{})},create:{color:"green",icon:e.jsx(Ye,{})},delete:{color:"red",icon:e.jsx(Ue,{})}}[n]||{color:"default",icon:null};return e.jsx(C,{color:g.color,icon:g.icon,children:n==="login"?"登录":n==="edit"?"编辑":n==="create"?"新增":"删除"})};return e.jsxs("div",{style:{background:"transparent"},children:[" ",e.jsx(R,{style:l,children:e.jsxs(M,{align:"middle",children:[e.jsxs(v,{flex:"auto",children:[e.jsx("h2",{style:{margin:0,color:"#262626"},children:"欢迎回来，管理员！"}),e.jsxs("p",{style:{margin:"8px 0 0 0",color:"#8c8c8c"},children:["今天是 ",new Date().toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"}),"，系统运行正常"]})]}),e.jsx(v,{children:e.jsx(C,{color:"success",children:"系统正常"})})]})}),e.jsx(M,{gutter:[16,16],style:{marginBottom:"16px"},children:x.map((n,p)=>e.jsx(v,{xs:24,sm:12,lg:6,children:e.jsx(R,{style:l,children:e.jsx(_e,{title:n.title,value:n.value,prefix:n.prefix,suffix:n.suffix,valueStyle:n.valueStyle})})},p))}),e.jsxs(M,{gutter:[16,16],style:{display:"flex",alignItems:"stretch",marginBottom:"16px"},children:[e.jsx(v,{xs:24,lg:12,style:{display:"flex"},children:e.jsx(R,{title:"快捷操作",style:{width:"100%",display:"flex",flexDirection:"column",...l},bodyStyle:{flex:1,display:"flex",flexDirection:"column"},children:e.jsx(M,{gutter:[16,16],children:d.map((n,p)=>e.jsx(v,{span:24,children:e.jsx(R,{hoverable:!0,style:{cursor:"pointer"},bodyStyle:{padding:"16px"},onClick:()=>s(n.path),children:e.jsxs(h,{children:[n.icon,e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,marginBottom:"4px"},children:n.title}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"12px"},children:n.description})]})]})})},p))})})}),e.jsx(v,{xs:24,lg:12,style:{display:"flex"},children:e.jsx(R,{title:"最近活动",style:{width:"100%",display:"flex",flexDirection:"column",...l},bodyStyle:{flex:1,display:"flex",flexDirection:"column"},children:e.jsx(G,{dataSource:o,renderItem:n=>e.jsx(G.Item,{children:e.jsx(G.Item.Meta,{avatar:e.jsx(Ae,{icon:e.jsx(ee,{})}),title:e.jsxs(h,{children:[e.jsx("span",{children:n.user}),a(n.type)]}),description:e.jsxs(h,{children:[e.jsx("span",{children:n.action}),e.jsx("span",{style:{color:"#8c8c8c"},children:$n(n.time)})]})})})})})})]}),e.jsxs(M,{gutter:[16,16],children:[e.jsx(v,{xs:24,md:8,children:e.jsx(R,{title:"系统状态",style:l,children:e.jsxs(h,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"CPU使用率"}),e.jsx(C,{color:"green",children:"23%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"内存使用率"}),e.jsx(C,{color:"blue",children:"45%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"磁盘使用率"}),e.jsx(C,{color:"orange",children:"67%"})]})]})})}),e.jsx(v,{xs:24,md:8,children:e.jsx(R,{title:"访问统计",style:l,children:e.jsxs(h,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"今日访问"}),e.jsx("span",{style:{fontWeight:500},children:"1,234"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"本周访问"}),e.jsx("span",{style:{fontWeight:500},children:"8,567"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"本月访问"}),e.jsx("span",{style:{fontWeight:500},children:"34,890"})]})]})})}),e.jsx(v,{xs:24,md:8,children:e.jsx(R,{title:"系统信息",style:l,children:e.jsxs(h,{direction:"vertical",style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"系统版本"}),e.jsx("span",{children:"v1.0.0"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"运行时间"}),e.jsx("span",{children:"15天"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"最后更新"}),e.jsx("span",{children:"2024-08-09"})]})]})})})]})]})},{Title:En,Text:qe}=le,ts=({onLogin:s})=>{const[l,x]=c.useState(!1),[d]=B.useForm(),o=async a=>{x(!0);try{await xe(1e3),a.username==="admin"&&a.password==="123456"?(F.success("登录成功！"),s()):F.error("用户名或密码错误！")}catch{F.error("登录失败，请重试！")}finally{x(!1)}};return e.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:e.jsxs(R,{style:{width:400,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",borderRadius:"8px"},bodyStyle:{padding:"40px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[e.jsx(En,{level:2,style:{color:"#1890ff",marginBottom:"8px"},children:"管理系统"}),e.jsx(qe,{type:"secondary",children:"请输入您的账号信息"})]}),e.jsxs(B,{form:d,name:"login",initialValues:{username:"admin",password:"123456",remember:!0},onFinish:o,size:"large",autoComplete:"off",children:[e.jsx(B.Item,{name:"username",rules:[{required:!0,message:"请输入用户名！"},{min:2,message:"用户名至少2个字符！"},{max:20,message:"用户名最多20个字符！"}],children:e.jsx(Y,{prefix:e.jsx(ee,{}),placeholder:"用户名"})}),e.jsx(B.Item,{name:"password",rules:[{required:!0,message:"请输入密码！"},{min:6,message:"密码至少6个字符！"},{max:20,message:"密码最多20个字符！"}],children:e.jsx(Y.Password,{prefix:e.jsx(Ls,{}),placeholder:"密码"})}),e.jsx(B.Item,{name:"remember",valuePropName:"checked",children:e.jsx(je,{children:"记住密码"})}),e.jsx(B.Item,{children:e.jsx(y,{type:"primary",htmlType:"submit",loading:l,style:{width:"100%",height:"40px"},children:l?"登录中...":"登录"})})]}),e.jsxs("div",{style:{marginTop:"24px",padding:"16px",background:"#f0f2f5",borderRadius:"6px"},children:[e.jsx(qe,{strong:!0,style:{display:"block",marginBottom:"8px"},children:"测试账号信息："}),e.jsxs(h,{direction:"vertical",size:4,children:[e.jsx(qe,{type:"secondary",children:"用户名: admin"}),e.jsx(qe,{type:"secondary",children:"密码: 123456"})]})]})]})})},{Title:xt}=le,_n=()=>{const[s,l]=c.useState(new Date),[x,d]=c.useState({environment:!1,ships:!1,alerts:!1,emergency:!1,statistics:!1});c.useEffect(()=>{const f=setInterval(()=>{l(new Date)},1e3);return()=>clearInterval(f)},[]);const o=f=>{d(T=>({...T,[f]:!T[f]}))},a=f=>{d(T=>({...T,[f]:!1}))},n=[{label:"水质指数",value:85,unit:"WQI",status:"good",color:"#52c41a"},{label:"水温",value:24.5,unit:"°C",status:"normal",color:"#1890ff"},{label:"盐度",value:35.2,unit:"PSU",status:"normal",color:"#722ed1"},{label:"溶解氧",value:7.8,unit:"mg/L",status:"good",color:"#52c41a"},{label:"风速",value:12.3,unit:"m/s",status:"warning",color:"#faad14"},{label:"浪高",value:2.1,unit:"m",status:"normal",color:"#1890ff"}],p=[{type:"货船",count:45,color:"#1890ff"},{type:"客船",count:12,color:"#52c41a"},{type:"渔船",count:28,color:"#faad14"},{type:"军舰",count:8,color:"#f5222d"},{type:"其他",count:15,color:"#722ed1"}],g=[{id:1,type:"海洋污染",level:"warning",message:"东海区域检测到油污泄漏",time:"10:30"},{id:2,type:"非法捕捞",level:"danger",message:"禁渔区发现非法作业船只",time:"09:45"},{id:3,type:"船舶偏航",level:"info",message:'货船"海运001"偏离预定航线',time:"09:20"},{id:4,type:"气象预警",level:"warning",message:"预计12小时后有强风暴",time:"08:55"}],_=[{name:"救援船只",total:15,available:12,inUse:3},{name:"救援飞机",total:8,available:6,inUse:2},{name:"救援人员",total:120,available:95,inUse:25},{name:"应急物资",total:500,available:420,inUse:80}],k=[{title:"监控设备",value:156,unit:"台",icon:e.jsx(ve,{}),color:"#1890ff"},{title:"在线船舶",value:108,unit:"艘",icon:e.jsx(st,{}),color:"#52c41a"},{title:"预警事件",value:4,unit:"起",icon:e.jsx(be,{}),color:"#faad14"},{title:"应急资源",value:643,unit:"项",icon:e.jsx(de,{}),color:"#722ed1"}],N=f=>({danger:"#ff4d4f",warning:"#faad14",info:"#1890ff"})[f]||"#1890ff",w=f=>({danger:e.jsx(qs,{}),warning:e.jsx(be,{}),info:e.jsx(Pe,{})})[f]||e.jsx(Pe,{}),$={position:"absolute",background:"rgba(15, 20, 25, 0.95)",border:"1px solid rgba(64, 169, 255, 0.5)",borderRadius:"8px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",backdropFilter:"blur(10px)",zIndex:1e3,maxHeight:"400px",overflow:"auto"};return e.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)",position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"20px 0",background:"rgba(0, 0, 0, 0.3)",borderBottom:"1px solid rgba(64, 169, 255, 0.3)"},children:[e.jsx(xt,{level:2,style:{color:"#ffffff",margin:0},children:"海洋监控数据中心大屏"}),e.jsx(le.Text,{style:{color:"#8c8c8c",fontSize:"14px"},children:s.toLocaleString("zh-CN")})]}),e.jsxs(M,{gutter:[16,16],style:{padding:"20px",height:"calc(100vh - 120px)"},children:[e.jsx(v,{xs:24,lg:6,children:e.jsx(R,{title:"海域态势总览",style:{height:"100%",background:"rgba(15, 20, 25, 0.8)",border:"1px solid rgba(64, 169, 255, 0.3)"},headStyle:{color:"#ffffff",borderBottom:"1px solid rgba(64, 169, 255, 0.3)"},bodyStyle:{color:"#ffffff"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},children:[e.jsx(zt,{style:{fontSize:"48px",color:"#40a9ff",marginBottom:"16px"}}),e.jsx(xt,{level:4,style:{color:"#40a9ff",margin:"8px 0"},children:"海域态势总览"}),e.jsx(le.Text,{style:{color:"#8c8c8c",fontSize:"14px"},children:"与实时监控"}),e.jsx(le.Text,{style:{color:"#8c8c8c",fontSize:"12px",marginTop:"8px"},children:"实时监控海域动态、船舶、海洋环境数据，为海洋管理提供全面的态势感知能力"})]})})}),e.jsx(v,{xs:24,lg:12,children:e.jsx(R,{style:{height:"100%",background:"rgba(15, 20, 25, 0.8)",border:"1px solid rgba(64, 169, 255, 0.3)"},bodyStyle:{padding:0,display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsxs("div",{style:{width:"200px",height:"200px",background:"rgba(64, 169, 255, 0.1)",border:"2px solid #40a9ff",borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:[e.jsx(zt,{style:{fontSize:"60px",color:"#40a9ff",marginBottom:"10px"}}),e.jsx(xt,{level:3,style:{color:"#40a9ff",margin:0},children:"海域态势总览"}),e.jsx(le.Text,{style:{color:"#8c8c8c",fontSize:"14px"},children:"与实时监控"})]}),e.jsx(le.Text,{style:{color:"#8c8c8c",fontSize:"14px"},children:"实时监控海域动态、船舶、海洋环境数据，为海洋管理提供全面的态势感知能力"})]})})}),e.jsx(v,{xs:24,lg:6,children:e.jsxs(h,{direction:"vertical",style:{width:"100%",height:"100%"},size:"middle",children:[e.jsx(R,{title:"实时监控",size:"small",style:{background:"rgba(15, 20, 25, 0.8)",border:"1px solid rgba(64, 169, 255, 0.3)"},headStyle:{color:"#ffffff",borderBottom:"1px solid rgba(64, 169, 255, 0.3)"},bodyStyle:{color:"#ffffff"},children:e.jsx(_e,{title:"在线设备",value:156,suffix:"台",valueStyle:{color:"#52c41a"}})}),e.jsx(R,{title:"船舶统计",size:"small",style:{background:"rgba(15, 20, 25, 0.8)",border:"1px solid rgba(64, 169, 255, 0.3)"},headStyle:{color:"#ffffff",borderBottom:"1px solid rgba(64, 169, 255, 0.3)"},bodyStyle:{color:"#ffffff"},children:e.jsx(_e,{title:"在线船舶",value:108,suffix:"艘",valueStyle:{color:"#1890ff"}})}),e.jsx(R,{title:"预警状态",size:"small",style:{background:"rgba(15, 20, 25, 0.8)",border:"1px solid rgba(64, 169, 255, 0.3)"},headStyle:{color:"#ffffff",borderBottom:"1px solid rgba(64, 169, 255, 0.3)"},bodyStyle:{color:"#ffffff"},children:e.jsx(_e,{title:"预警事件",value:4,suffix:"起",valueStyle:{color:"#faad14"}})})]})})]}),e.jsxs(ge.Group,{trigger:"click",type:"primary",style:{right:24,bottom:24},icon:e.jsx(ns,{}),children:[e.jsx(ge,{icon:e.jsx(Rt,{}),tooltip:"环境数据监测",onClick:()=>o("environment")}),e.jsx(ge,{icon:e.jsx(st,{}),tooltip:"船舶动态统计",onClick:()=>o("ships")}),e.jsx(ge,{icon:e.jsx(be,{}),tooltip:"预警告警中心",onClick:()=>o("alerts")}),e.jsx(ge,{icon:e.jsx(de,{}),tooltip:"应急资源调度",onClick:()=>o("emergency")}),e.jsx(ge,{icon:e.jsx(Dt,{}),tooltip:"数据统计概览",onClick:()=>o("statistics")})]}),x.environment&&e.jsxs("div",{style:{...$,top:"80px",left:"20px",width:"320px"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(64, 169, 255, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{children:[e.jsx(Rt,{style:{color:"#40a9ff"}}),e.jsx("span",{style:{color:"#ffffff",fontWeight:"bold"},children:"环境数据实时监测"})]}),e.jsx(y,{type:"text",size:"small",icon:e.jsx(Ie,{}),onClick:()=>a("environment"),style:{color:"#8c8c8c"}})]}),e.jsx("div",{style:{padding:"16px"},children:e.jsx(M,{gutter:[8,8],children:n.map((f,T)=>e.jsx(v,{span:12,children:e.jsxs("div",{style:{textAlign:"center",padding:"8px",background:"rgba(64, 169, 255, 0.1)",borderRadius:"4px",border:`1px solid ${f.color}`},children:[e.jsx("div",{style:{color:f.color,fontSize:"16px",fontWeight:"bold"},children:f.value}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"11px"},children:f.label}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"10px"},children:f.unit})]})},T))})})]}),x.ships&&e.jsxs("div",{style:{...$,top:"80px",right:"20px",width:"280px"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(64, 169, 255, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{children:[e.jsx(st,{style:{color:"#40a9ff"}}),e.jsx("span",{style:{color:"#ffffff",fontWeight:"bold"},children:"船舶动态统计"})]}),e.jsx(y,{type:"text",size:"small",icon:e.jsx(Ie,{}),onClick:()=>a("ships"),style:{color:"#8c8c8c"}})]}),e.jsx("div",{style:{padding:"16px"},children:e.jsx(h,{direction:"vertical",style:{width:"100%"},size:"middle",children:p.map((f,T)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",background:"rgba(64, 169, 255, 0.1)",borderRadius:"4px"},children:[e.jsxs(h,{children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:f.color}}),e.jsx("span",{style:{color:"#ffffff"},children:f.type})]}),e.jsxs("span",{style:{color:f.color,fontWeight:"bold"},children:[f.count,"艘"]})]},T))})})]}),x.alerts&&e.jsxs("div",{style:{...$,bottom:"120px",left:"20px",width:"350px"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(64, 169, 255, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{children:[e.jsx(be,{style:{color:"#faad14"}}),e.jsx("span",{style:{color:"#ffffff",fontWeight:"bold"},children:"预警告警中心"})]}),e.jsx(y,{type:"text",size:"small",icon:e.jsx(Ie,{}),onClick:()=>a("alerts"),style:{color:"#8c8c8c"}})]}),e.jsx("div",{style:{padding:"16px"},children:e.jsx(G,{dataSource:g,renderItem:f=>e.jsx(G.Item,{style:{border:"none",padding:"8px 0"},children:e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[e.jsxs(h,{children:[w(f.level),e.jsx(C,{color:N(f.level),style:{margin:0},children:f.type})]}),e.jsx(le.Text,{style:{color:"#8c8c8c",fontSize:"12px"},children:f.time})]}),e.jsx(le.Text,{style:{color:"#ffffff",fontSize:"12px"},children:f.message})]})})})})]}),x.emergency&&e.jsxs("div",{style:{...$,bottom:"120px",right:"20px",width:"320px"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(64, 169, 255, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{children:[e.jsx(de,{style:{color:"#52c41a"}}),e.jsx("span",{style:{color:"#ffffff",fontWeight:"bold"},children:"应急资源调度"})]}),e.jsx(y,{type:"text",size:"small",icon:e.jsx(Ie,{}),onClick:()=>a("emergency"),style:{color:"#8c8c8c"}})]}),e.jsxs("div",{style:{padding:"16px"},children:[e.jsx(h,{direction:"vertical",style:{width:"100%"},size:"middle",children:_.map((f,T)=>e.jsxs("div",{style:{padding:"12px",background:"rgba(64, 169, 255, 0.1)",borderRadius:"4px",border:"1px solid rgba(82, 196, 26, 0.3)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsx("span",{style:{color:"#ffffff",fontWeight:"bold"},children:f.name}),e.jsxs("span",{style:{color:"#52c41a"},children:[f.available,"/",f.total]})]}),e.jsx(is,{percent:Math.round(f.available/f.total*100),strokeColor:"#52c41a",trailColor:"rgba(255, 255, 255, 0.1)",size:"small"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px",fontSize:"12px"},children:[e.jsxs("span",{style:{color:"#52c41a"},children:["可用: ",f.available]}),e.jsxs("span",{style:{color:"#faad14"},children:["使用中: ",f.inUse]})]})]},T))}),e.jsxs("div",{style:{marginTop:"16px",textAlign:"center"},children:[e.jsx(y,{type:"primary",icon:e.jsx(Fs,{}),style:{marginRight:"8px"},size:"small",children:"应急通讯"}),e.jsx(y,{icon:e.jsx(we,{}),size:"small",children:"指挥调度"})]})]})]}),x.statistics&&e.jsxs("div",{style:{...$,top:"50px",right:"300px",width:"280px"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(64, 169, 255, 0.3)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(h,{children:[e.jsx(Dt,{style:{color:"#722ed1"}}),e.jsx("span",{style:{color:"#ffffff",fontWeight:"bold"},children:"数据统计概览"})]}),e.jsx(y,{type:"text",size:"small",icon:e.jsx(Ie,{}),onClick:()=>a("statistics"),style:{color:"#8c8c8c"}})]}),e.jsxs("div",{style:{padding:"16px"},children:[e.jsx(M,{gutter:[8,8],style:{marginBottom:"16px"},children:k.map((f,T)=>e.jsx(v,{span:12,children:e.jsxs("div",{style:{textAlign:"center",padding:"8px",background:"rgba(64, 169, 255, 0.1)",borderRadius:"4px",border:`1px solid ${f.color}`},children:[e.jsx("div",{style:{color:f.color,fontSize:"14px",marginBottom:"4px"},children:f.icon}),e.jsx("div",{style:{color:"#ffffff",fontSize:"16px",fontWeight:"bold"},children:f.value}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"10px"},children:f.title})]})},T))}),e.jsxs(h,{direction:"vertical",style:{width:"100%"},size:"small",children:[e.jsxs("div",{style:{padding:"8px",background:"rgba(64, 169, 255, 0.1)",borderRadius:"4px",textAlign:"center"},children:[e.jsx("div",{style:{color:"#722ed1",fontSize:"18px",fontWeight:"bold"},children:"98.5%"}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"11px"},children:"设备在线率"})]}),e.jsxs("div",{style:{padding:"8px",background:"rgba(64, 169, 255, 0.1)",borderRadius:"4px",textAlign:"center"},children:[e.jsx("div",{style:{color:"#1890ff",fontSize:"18px",fontWeight:"bold"},children:"24h"}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"11px"},children:"连续监控时长"})]}),e.jsxs("div",{style:{padding:"8px",background:"rgba(64, 169, 255, 0.1)",borderRadius:"4px",textAlign:"center"},children:[e.jsx("div",{style:{color:"#52c41a",fontSize:"18px",fontWeight:"bold"},children:"99.2%"}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:"11px"},children:"数据准确率"})]})]})]})]})]})},ps={background:"#fff",borderRadius:8,boxShadow:"0 1px 4px rgba(0,21,41,.08)",border:"1px solid #f0f0f0"},Oe={...ps,marginBottom:12},Nn={...ps,marginBottom:8},Pn=[{id:"c1",name:"主入口监控",location:"大厅入口",status:"online",resolution:"1920x1080",fps:30,recording:!0,stream:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"},{id:"c2",name:"办公区域监控",location:"办公区A",status:"online",resolution:"1920x1080",fps:25,recording:!1,stream:"https://www.w3schools.com/html/mov_bbb.mp4"},{id:"c3",name:"服务器机房",location:"机房B区",status:"online",resolution:"2560x1440",fps:30,recording:!0},{id:"c4",name:"地下停车场",location:"B2层",status:"offline",resolution:"1920x1080",fps:0,recording:!1},{id:"c5",name:"会议室监控",location:"会议室301",status:"online",resolution:"1920x1080",fps:30,recording:!1},{id:"c6",name:"安全通道",location:"紧急出口",status:"warning",resolution:"1280x720",fps:15,recording:!0}],ut=s=>s==="online"?{color:"#52c41a",text:"在线",badge:"success",icon:e.jsx(Pe,{})}:s==="offline"?{color:"#ff4d4f",text:"离线",badge:"error",icon:e.jsx(os,{})}:{color:"#faad14",text:"异常",badge:"warning",icon:e.jsx(as,{})},An=()=>{const[s,l]=c.useState(Pn),[x,d]=c.useState("c1"),[o,a]=c.useState(!1),[n,p]=c.useState(new Date),[g,_]=c.useState(""),[k,N]=c.useState("all"),[w,$]=c.useState("single"),f=c.useRef(null),T=c.useRef(null),j=c.useMemo(()=>s.find(u=>u.id===x),[s,x]);c.useEffect(()=>{const u=setInterval(()=>p(new Date),1e3);return()=>clearInterval(u)},[]),c.useEffect(()=>{const u=setInterval(()=>{l(b=>{const D=Math.floor(Math.random()*b.length),m=b[D],r=Math.random(),S={...m,status:r<.05?"offline":r<.15?"warning":"online",fps:m.status==="offline"?0:Math.max(12,Math.min(35,m.fps+(Math.random()>.5?1:-1)))},L=[...b];return L[D]=S,L})},5e3);return()=>clearInterval(u)},[]);const W=c.useMemo(()=>{const u=s.filter(r=>r.status==="online").length,b=s.filter(r=>r.status==="offline").length,D=s.filter(r=>r.status==="warning").length,m=s.filter(r=>r.recording).length;return{online:u,offline:b,warning:D,recording:m,total:s.length}},[s]),Z=()=>l(u=>u.map(b=>b.id===x?{...b,recording:!b.recording}:b)),te=()=>{var u;return(u=f.current)==null?void 0:u.play()},K=()=>{var u;return(u=f.current)==null?void 0:u.pause()},ie=()=>a(u=>!u),U=()=>{var u,b;return(b=(u=T.current)==null?void 0:u.requestFullscreen)==null?void 0:b.call(u)};return e.jsxs("div",{style:{background:"transparent",padding:"0 4px"},children:[e.jsx(R,{style:Nn,bodyStyle:{padding:"12px 16px"},children:e.jsxs(M,{align:"middle",justify:"space-between",gutter:[12,8],children:[e.jsx(v,{flex:"auto",children:e.jsxs(h,{size:12,children:[e.jsx(ve,{style:{fontSize:20,color:"#1890ff"}}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,color:"#262626",fontSize:16,fontWeight:600},children:"视频监控中心"}),e.jsx("div",{style:{color:"#8c8c8c",fontSize:11,marginTop:2},children:n.toLocaleString("zh-CN")})]})]})}),e.jsx(v,{children:e.jsxs(h,{wrap:!0,size:8,children:[e.jsx(Y.Search,{allowClear:!0,placeholder:"搜索摄像头",onSearch:_,style:{width:180},size:"small"}),e.jsx(O,{size:"small",value:k,style:{width:100},onChange:u=>N(u),options:[{label:"全部",value:"all"},{label:"在线",value:"online"},{label:"离线",value:"offline"},{label:"异常",value:"warning"}]}),e.jsx(Os,{size:"small",options:[{label:"单画面",value:"single",icon:e.jsx(Ws,{})},{label:"四宫格",value:"quad",icon:e.jsx(Hs,{})}],value:w,onChange:u=>$(u)}),e.jsx(C,{color:j!=null&&j.recording?"red":"default",style:{margin:0},children:j!=null&&j.recording?"REC":"未录制"}),e.jsx(y,{icon:e.jsx(He,{}),size:"small",children:"设置"})]})})]})}),e.jsx(R,{style:Oe,bodyStyle:{padding:"12px 16px"},children:e.jsx(M,{gutter:[16,0],children:[{t:"在线",v:W.online,c:"#52c41a"},{t:"录制",v:W.recording,c:"#1890ff"},{t:"离线",v:W.offline,c:"#ff4d4f"},{t:"异常",v:W.warning,c:"#faad14"}].map((u,b)=>e.jsx(v,{xs:12,sm:6,children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:20,fontWeight:600,color:u.c,lineHeight:1.2},children:[u.v,e.jsxs("span",{style:{fontSize:12,color:"#8c8c8c",fontWeight:400},children:["/",W.total]})]}),e.jsx("div",{style:{fontSize:12,color:"#8c8c8c",marginTop:2},children:u.t}),e.jsx(is,{percent:Math.round(u.v/(W.total||1)*100),size:"small",showInfo:!1,style:{marginTop:4},strokeColor:u.c})]})},b))})}),e.jsxs(M,{gutter:[12,12],children:[e.jsx(v,{xs:24,lg:7,children:e.jsx(R,{style:Oe,title:e.jsxs(h,{size:8,children:[e.jsx(rs,{style:{fontSize:14}}),"摄像头列表",e.jsx(Ve,{count:W.online,showZero:!0,size:"small"})]}),bodyStyle:{padding:"8px 0"},headStyle:{padding:"8px 16px",minHeight:"auto"},children:e.jsx(G,{size:"small",dataSource:s.filter(u=>(k==="all"||u.status===k)&&(!g||u.name.includes(g)||u.location.includes(g))),renderItem:u=>{const b=ut(u.status);return e.jsx(G.Item,{onClick:()=>d(u.id),style:{cursor:"pointer",background:x===u.id?"#e6f7ff":"transparent",borderRadius:4,padding:"6px 16px",margin:"0 8px 4px 8px",border:x===u.id?"1px solid #91d5ff":"1px solid transparent"},children:e.jsx(G.Item.Meta,{avatar:e.jsx(Ve,{status:b.badge,dot:!0,size:"small",children:e.jsx(Ae,{size:"small",icon:e.jsx(ve,{})})}),title:e.jsx("div",{style:{fontSize:13,fontWeight:500,lineHeight:1.3},children:e.jsxs(h,{size:4,children:[u.name,u.recording&&e.jsx(C,{color:"red",style:{fontSize:10,padding:"0 4px",lineHeight:"16px"},children:"REC"})]})}),description:e.jsxs("div",{style:{fontSize:11,lineHeight:1.2,marginTop:2},children:[e.jsx("div",{style:{color:"#8c8c8c",marginBottom:2},children:u.location}),e.jsxs(h,{size:4,wrap:!0,children:[e.jsx(C,{color:b.color,style:{fontSize:10,padding:"0 4px",lineHeight:"16px"},children:b.text}),e.jsx(C,{style:{fontSize:10,padding:"0 4px",lineHeight:"16px"},children:u.resolution}),u.status==="online"&&e.jsxs(C,{style:{fontSize:10,padding:"0 4px",lineHeight:"16px"},children:[u.fps,"fps"]})]})]})})})}})})}),e.jsx(v,{xs:24,lg:17,children:e.jsxs(h,{direction:"vertical",size:8,style:{width:"100%"},children:[e.jsx(R,{style:Oe,title:e.jsxs(h,{size:8,children:[e.jsx(ft,{style:{fontSize:14}}),e.jsx("span",{style:{fontSize:14,fontWeight:500},children:(j==null?void 0:j.name)||"选择摄像头"}),e.jsx(O,{size:"small",value:x,onChange:d,style:{width:160,fontSize:12},options:s.map(u=>({value:u.id,label:u.name}))})]}),extra:e.jsxs(h,{size:4,children:[e.jsx(y,{size:"small",icon:e.jsx(Tt,{}),onClick:te,children:"播放"}),e.jsx(y,{size:"small",icon:e.jsx(Bt,{}),onClick:K,children:"暂停"}),e.jsx(y,{size:"small",icon:e.jsx(ls,{}),onClick:U,children:"全屏"})]}),bodyStyle:{padding:8},headStyle:{padding:"8px 16px",minHeight:"auto"},children:e.jsx("div",{ref:T,style:{width:"100%",height:w==="single"?"calc(100vh - 320px)":"calc(100vh - 280px)",minHeight:360,background:"#000",borderRadius:4,position:"relative",padding:w==="single"?0:8},children:w==="single"?e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[(j==null?void 0:j.status)==="online"?j!=null&&j.stream?e.jsx("video",{ref:f,src:j.stream,style:{width:"100%",height:"100%",objectFit:"cover"},muted:o,controls:!0}):e.jsxs("div",{style:{color:"#fff",textAlign:"center"},children:[e.jsx(ve,{style:{fontSize:48,marginBottom:16}}),e.jsx("div",{children:"实时视频流"}),e.jsxs("div",{style:{fontSize:12,opacity:.7,marginTop:8},children:[j==null?void 0:j.resolution," @ ",j==null?void 0:j.fps,"fps"]})]}):e.jsxs("div",{style:{color:"#8c8c8c",textAlign:"center"},children:[e.jsx(be,{style:{fontSize:48,marginBottom:16}}),e.jsx("div",{children:"摄像头离线或异常"})]}),(j==null?void 0:j.recording)&&e.jsx("div",{style:{position:"absolute",top:16,right:16,background:"rgba(255,77,79,.9)",color:"#fff",padding:"2px 8px",borderRadius:4,fontSize:12},children:"REC 录制中"})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"1fr 1fr",gap:8,height:"100%"},children:s.slice(0,4).map(u=>e.jsxs("div",{style:{position:"relative",background:"#111",borderRadius:4,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:[u.status==="online"?e.jsxs("div",{style:{color:"#fff",textAlign:"center"},children:[e.jsx(ve,{style:{fontSize:32,marginBottom:8}}),e.jsx("div",{style:{fontSize:12,opacity:.7},children:u.name})]}):e.jsxs("div",{style:{color:"#666",textAlign:"center"},children:[e.jsx(be,{style:{fontSize:28,marginBottom:8}}),e.jsx("div",{style:{fontSize:12},children:"离线/异常"})]}),e.jsx("div",{style:{position:"absolute",left:8,top:8,color:"#fff",fontSize:12,background:"rgba(0,0,0,.25)",padding:"2px 6px",borderRadius:4},children:u.name}),e.jsx("div",{style:{position:"absolute",right:8,bottom:8},children:e.jsx(h,{children:e.jsx(X,{title:"切换到此摄像头",children:e.jsx(y,{size:"small",onClick:()=>{d(u.id),$("single")},children:"查看"})})})})]},u.id))})})}),e.jsx(R,{style:Oe,title:e.jsxs(h,{size:8,children:[e.jsx(He,{style:{fontSize:14}}),"控制面板"]}),bodyStyle:{padding:"12px 16px"},headStyle:{padding:"8px 16px",minHeight:"auto"},children:e.jsxs(M,{gutter:[16,8],align:"middle",children:[e.jsx(v,{xs:24,sm:14,children:e.jsxs(h,{size:12,wrap:!0,children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:12,color:"#8c8c8c"},children:"录制:"}),e.jsx(Vs,{size:"small",checked:!!(j!=null&&j.recording),onChange:Z,checkedChildren:"ON",unCheckedChildren:"OFF"})]}),e.jsxs(h,{size:6,children:[e.jsx(y,{size:"small",icon:e.jsx(Tt,{}),type:"primary",onClick:te,children:"播放"}),e.jsx(y,{size:"small",icon:e.jsx(Bt,{}),onClick:K,children:"暂停"}),e.jsx(y,{size:"small",icon:o?e.jsx(Us,{}):e.jsx(Ys,{}),onClick:ie,children:o?"取消静音":"静音"})]})]})}),e.jsx(v,{xs:24,sm:10,children:j&&e.jsxs("div",{style:{fontSize:11,color:"#8c8c8c",lineHeight:1.4},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"位置:"})," ",j.location]}),e.jsxs("div",{children:[e.jsx("strong",{children:"分辨率:"})," ",j.resolution," | ",e.jsx("strong",{children:"帧率:"})," ",j.fps,"fps"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"状态:"})," ",e.jsx("span",{style:{color:ut(j.status).color},children:ut(j.status).text})]})]})})]})})]})})]})]})},Ln=[{id:"c1",name:"华为技术有限公司",type:"enterprise",contact:"张经理",email:"zhang@huawei.com",deviceCount:18,status:"active",createTime:"2024-01-15"},{id:"c2",name:"北京大学",type:"education",contact:"陈教授",email:"chen@pku.edu.cn",deviceCount:18,status:"active",createTime:"2024-01-20"}],Fn=[{id:"topo-c1-1",name:"总部网络拓扑",customerId:"c1",description:"华为总部办公楼网络拓扑图",createTime:"2024-01-15",layoutPreference:"hierarchy",labelMode:"latency",nodes:[{id:"c1-t1-n1",name:"总部-网关A",type:"gateway",status:"online",mac:"AA:BB:CC:DD:EE:01",ip:"192.168.1.1",links:["c1-t1-n2","c1-t1-n3"],x:300,y:200,rssi:-45,customerId:"c1"},{id:"c1-t1-n2",name:"总部-中继1",type:"relay",status:"online",mac:"AA:BB:CC:DD:EE:02",ip:"192.168.1.2",links:["c1-t1-n1","c1-t1-n4"],x:520,y:240,rssi:-60,customerId:"c1"},{id:"c1-t1-n3",name:"总部-中继2",type:"relay",status:"warning",mac:"AA:BB:CC:DD:EE:03",ip:"192.168.1.3",links:["c1-t1-n1","c1-t1-n5"],x:280,y:380,rssi:-72,customerId:"c1"},{id:"c1-t1-n4",name:"总部-终端1",type:"terminal",status:"online",mac:"AA:BB:CC:DD:EE:11",ip:"192.168.1.11",links:["c1-t1-n2"],x:720,y:180,rssi:-55,customerId:"c1"},{id:"c1-t1-n5",name:"总部-终端2",type:"terminal",status:"online",mac:"AA:BB:CC:DD:EE:12",ip:"192.168.1.12",links:["c1-t1-n3"],x:220,y:520,rssi:-68,customerId:"c1"}],links:[{id:"c1-t1-l1",source:"c1-t1-n1",target:"c1-t1-n2",bandwidth:48,latency:8,distance:35,rssi:-58,customerId:"c1"},{id:"c1-t1-l2",source:"c1-t1-n1",target:"c1-t1-n3",bandwidth:22,latency:15,distance:48,rssi:-68,customerId:"c1"},{id:"c1-t1-l3",source:"c1-t1-n2",target:"c1-t1-n4",bandwidth:36,latency:10,distance:28,rssi:-54,customerId:"c1"},{id:"c1-t1-l4",source:"c1-t1-n3",target:"c1-t1-n5",bandwidth:18,latency:22,distance:56,rssi:-73,customerId:"c1"}]},{id:"topo-c1-2",name:"研发中心网络",customerId:"c1",description:"华为研发中心实验室网络",createTime:"2024-02-01",layoutPreference:"force",labelMode:"bandwidth",nodes:[{id:"c1-t2-n1",name:"研发-主网关",type:"gateway",status:"online",mac:"AA:BB:CC:DD:EE:21",ip:"192.168.2.1",links:["c1-t2-n2","c1-t2-n3"],x:400,y:250,rssi:-42,customerId:"c1"},{id:"c1-t2-n2",name:"研发-实验室中继",type:"relay",status:"online",mac:"AA:BB:CC:DD:EE:22",ip:"192.168.2.2",links:["c1-t2-n1","c1-t2-n4","c1-t2-n5"],x:200,y:150,rssi:-58,customerId:"c1"},{id:"c1-t2-n3",name:"研发-测试中继",type:"relay",status:"online",mac:"AA:BB:CC:DD:EE:23",ip:"192.168.2.3",links:["c1-t2-n1","c1-t2-n6"],x:600,y:150,rssi:-55,customerId:"c1"},{id:"c1-t2-n4",name:"研发-设备1",type:"terminal",status:"online",mac:"AA:BB:CC:DD:EE:31",ip:"192.168.2.11",links:["c1-t2-n2"],x:100,y:50,rssi:-65,customerId:"c1"},{id:"c1-t2-n5",name:"研发-设备2",type:"terminal",status:"online",mac:"AA:BB:CC:DD:EE:32",ip:"192.168.2.12",links:["c1-t2-n2"],x:150,y:300,rssi:-62,customerId:"c1"},{id:"c1-t2-n6",name:"研发-测试设备",type:"terminal",status:"warning",mac:"AA:BB:CC:DD:EE:33",ip:"192.168.2.13",links:["c1-t2-n3"],x:700,y:50,rssi:-78,customerId:"c1"}],links:[{id:"c1-t2-l1",source:"c1-t2-n1",target:"c1-t2-n2",bandwidth:52,latency:6,distance:28,rssi:-52,customerId:"c1"},{id:"c1-t2-l2",source:"c1-t2-n1",target:"c1-t2-n3",bandwidth:48,latency:7,distance:32,rssi:-54,customerId:"c1"},{id:"c1-t2-l3",source:"c1-t2-n2",target:"c1-t2-n4",bandwidth:30,latency:12,distance:45,rssi:-62,customerId:"c1"},{id:"c1-t2-l4",source:"c1-t2-n2",target:"c1-t2-n5",bandwidth:28,latency:14,distance:38,rssi:-60,customerId:"c1"},{id:"c1-t2-l5",source:"c1-t2-n3",target:"c1-t2-n6",bandwidth:15,latency:25,distance:55,rssi:-75,customerId:"c1"}]},{id:"topo-c1-3",name:"生产基地网络",customerId:"c1",description:"华为生产基地车间网络",createTime:"2024-02-15",layoutPreference:"hierarchy",labelMode:"rssi",nodes:[{id:"c1-t3-n1",name:"生产-核心网关",type:"gateway",status:"online",mac:"AA:BB:CC:DD:EE:41",ip:"192.168.3.1",links:["c1-t3-n2","c1-t3-n3","c1-t3-n4"],x:400,y:200,rssi:-38,customerId:"c1"},{id:"c1-t3-n2",name:"生产-车间1中继",type:"relay",status:"online",mac:"AA:BB:CC:DD:EE:42",ip:"192.168.3.2",links:["c1-t3-n1","c1-t3-n5","c1-t3-n6"],x:200,y:100,rssi:-52,customerId:"c1"},{id:"c1-t3-n3",name:"生产-车间2中继",type:"relay",status:"online",mac:"AA:BB:CC:DD:EE:43",ip:"192.168.3.3",links:["c1-t3-n1","c1-t3-n7","c1-t3-n8"],x:600,y:100,rssi:-50,customerId:"c1"},{id:"c1-t3-n4",name:"生产-质检中继",type:"relay",status:"warning",mac:"AA:BB:CC:DD:EE:44",ip:"192.168.3.4",links:["c1-t3-n1","c1-t3-n9"],x:400,y:400,rssi:-68,customerId:"c1"},{id:"c1-t3-n5",name:"生产-设备A",type:"terminal",status:"online",mac:"AA:BB:CC:DD:EE:51",ip:"192.168.3.11",links:["c1-t3-n2"],x:100,y:50,rssi:-58,customerId:"c1"},{id:"c1-t3-n6",name:"生产-设备B",type:"terminal",status:"online",mac:"AA:BB:CC:DD:EE:52",ip:"192.168.3.12",links:["c1-t3-n2"],x:250,y:50,rssi:-60,customerId:"c1"},{id:"c1-t3-n7",name:"生产-设备C",type:"terminal",status:"online",mac:"AA:BB:CC:DD:EE:53",ip:"192.168.3.13",links:["c1-t3-n3"],x:550,y:50,rssi:-56,customerId:"c1"},{id:"c1-t3-n8",name:"生产-设备D",type:"terminal",status:"offline",mac:"AA:BB:CC:DD:EE:54",ip:"192.168.3.14",links:["c1-t3-n3"],x:700,y:50,rssi:-88,customerId:"c1"},{id:"c1-t3-n9",name:"生产-质检设备",type:"terminal",status:"warning",mac:"AA:BB:CC:DD:EE:55",ip:"192.168.3.15",links:["c1-t3-n4"],x:400,y:500,rssi:-75,customerId:"c1"}],links:[{id:"c1-t3-l1",source:"c1-t3-n1",target:"c1-t3-n2",bandwidth:60,latency:4,distance:22,rssi:-48,customerId:"c1"},{id:"c1-t3-l2",source:"c1-t3-n1",target:"c1-t3-n3",bandwidth:58,latency:5,distance:24,rssi:-46,customerId:"c1"},{id:"c1-t3-l3",source:"c1-t3-n1",target:"c1-t3-n4",bandwidth:35,latency:18,distance:42,rssi:-65,customerId:"c1"},{id:"c1-t3-l4",source:"c1-t3-n2",target:"c1-t3-n5",bandwidth:42,latency:8,distance:28,rssi:-55,customerId:"c1"},{id:"c1-t3-l5",source:"c1-t3-n2",target:"c1-t3-n6",bandwidth:40,latency:9,distance:30,rssi:-57,customerId:"c1"},{id:"c1-t3-l6",source:"c1-t3-n3",target:"c1-t3-n7",bandwidth:38,latency:10,distance:32,rssi:-53,customerId:"c1"},{id:"c1-t3-l7",source:"c1-t3-n3",target:"c1-t3-n8",bandwidth:0,latency:0,distance:35,rssi:-85,customerId:"c1"},{id:"c1-t3-l8",source:"c1-t3-n4",target:"c1-t3-n9",bandwidth:20,latency:28,distance:48,rssi:-72,customerId:"c1"}]},{id:"topo-c2-1",name:"校园主干网络",customerId:"c2",description:"北京大学校园主干网络拓扑",createTime:"2024-01-20",layoutPreference:"force",labelMode:"bandwidth",nodes:[{id:"c2-t1-n1",name:"北大-主网关",type:"gateway",status:"online",mac:"BB:CC:DD:EE:FF:01",ip:"10.0.0.1",links:["c2-t1-n2","c2-t1-n3","c2-t1-n4"],x:400,y:300,rssi:-40,customerId:"c2"},{id:"c2-t1-n2",name:"北大-教学楼中继",type:"relay",status:"online",mac:"BB:CC:DD:EE:FF:02",ip:"10.0.0.2",links:["c2-t1-n1","c2-t1-n5"],x:200,y:200,rssi:-55,customerId:"c2"},{id:"c2-t1-n3",name:"北大-宿舍中继",type:"relay",status:"online",mac:"BB:CC:DD:EE:FF:03",ip:"10.0.0.3",links:["c2-t1-n1","c2-t1-n6"],x:600,y:200,rssi:-58,customerId:"c2"},{id:"c2-t1-n4",name:"北大-图书馆中继",type:"relay",status:"warning",mac:"BB:CC:DD:EE:FF:04",ip:"10.0.0.4",links:["c2-t1-n1","c2-t1-n7"],x:400,y:500,rssi:-65,customerId:"c2"},{id:"c2-t1-n5",name:"北大-实验室终端",type:"terminal",status:"online",mac:"BB:CC:DD:EE:FF:11",ip:"10.0.0.11",links:["c2-t1-n2"],x:100,y:100,rssi:-70,customerId:"c2"},{id:"c2-t1-n6",name:"北大-宿舍终端",type:"terminal",status:"online",mac:"BB:CC:DD:EE:FF:12",ip:"10.0.0.12",links:["c2-t1-n3"],x:700,y:100,rssi:-72,customerId:"c2"},{id:"c2-t1-n7",name:"北大-阅览室终端",type:"terminal",status:"offline",mac:"BB:CC:DD:EE:FF:13",ip:"10.0.0.13",links:["c2-t1-n4"],x:400,y:600,rssi:-85,customerId:"c2"}],links:[{id:"c2-t1-l1",source:"c2-t1-n1",target:"c2-t1-n2",bandwidth:54,latency:5,distance:25,rssi:-50,customerId:"c2"},{id:"c2-t1-l2",source:"c2-t1-n1",target:"c2-t1-n3",bandwidth:48,latency:6,distance:30,rssi:-52,customerId:"c2"},{id:"c2-t1-l3",source:"c2-t1-n1",target:"c2-t1-n4",bandwidth:36,latency:12,distance:40,rssi:-60,customerId:"c2"},{id:"c2-t1-l4",source:"c2-t1-n2",target:"c2-t1-n5",bandwidth:24,latency:18,distance:50,rssi:-65,customerId:"c2"},{id:"c2-t1-l5",source:"c2-t1-n3",target:"c2-t1-n6",bandwidth:30,latency:15,distance:45,rssi:-62,customerId:"c2"},{id:"c2-t1-l6",source:"c2-t1-n4",target:"c2-t1-n7",bandwidth:0,latency:0,distance:35,rssi:-80,customerId:"c2"}]},{id:"topo-c2-2",name:"计算机学院网络",customerId:"c2",description:"北大计算机学院实验室网络",createTime:"2024-03-01",layoutPreference:"hierarchy",labelMode:"latency",nodes:[{id:"c2-t2-n1",name:"计院-核心交换机",type:"gateway",status:"online",mac:"BB:CC:DD:EE:FF:21",ip:"10.1.0.1",links:["c2-t2-n2","c2-t2-n3"],x:350,y:200,rssi:-35,customerId:"c2-1"},{id:"c2-t2-n2",name:"计院-实验室1中继",type:"relay",status:"online",mac:"BB:CC:DD:EE:FF:22",ip:"10.1.0.2",links:["c2-t2-n1","c2-t2-n4","c2-t2-n5"],x:200,y:350,rssi:-48,customerId:"c2-1"},{id:"c2-t2-n3",name:"计院-实验室2中继",type:"relay",status:"online",mac:"BB:CC:DD:EE:FF:23",ip:"10.1.0.3",links:["c2-t2-n1","c2-t2-n6"],x:500,y:350,rssi:-52,customerId:"c2-1"},{id:"c2-t2-n4",name:"计院-服务器1",type:"terminal",status:"online",mac:"BB:CC:DD:EE:FF:31",ip:"10.1.0.11",links:["c2-t2-n2"],x:100,y:450,rssi:-58,customerId:"c2-1"},{id:"c2-t2-n5",name:"计院-服务器2",type:"terminal",status:"online",mac:"BB:CC:DD:EE:FF:32",ip:"10.1.0.12",links:["c2-t2-n2"],x:250,y:500,rssi:-62,customerId:"c2-1"},{id:"c2-t2-n6",name:"计院-工作站",type:"terminal",status:"warning",mac:"BB:CC:DD:EE:FF:33",ip:"10.1.0.13",links:["c2-t2-n3"],x:600,y:450,rssi:-75,customerId:"c2-1"}],links:[{id:"c2-t2-l1",source:"c2-t2-n1",target:"c2-t2-n2",bandwidth:48,latency:3,distance:18,rssi:-42,customerId:"c2-1"},{id:"c2-t2-l2",source:"c2-t2-n1",target:"c2-t2-n3",bandwidth:45,latency:4,distance:20,rssi:-45,customerId:"c2-1"},{id:"c2-t2-l3",source:"c2-t2-n2",target:"c2-t2-n4",bandwidth:32,latency:8,distance:25,rssi:-55,customerId:"c2-1"},{id:"c2-t2-l4",source:"c2-t2-n2",target:"c2-t2-n5",bandwidth:28,latency:12,distance:32,rssi:-58,customerId:"c2-1"},{id:"c2-t2-l5",source:"c2-t2-n3",target:"c2-t2-n6",bandwidth:18,latency:22,distance:45,rssi:-72,customerId:"c2-1"}]}],We=s=>s==="online"?{color:"#52c41a",text:"在线",badge:"success",icon:e.jsx(Pe,{})}:s==="offline"?{color:"#ff4d4f",text:"离线",badge:"error",icon:e.jsx(os,{})}:{color:"#faad14",text:"异常",badge:"warning",icon:e.jsx(as,{})},Ee=s=>s==="gateway"?{color:"#1890ff",text:"网关"}:s==="relay"?{color:"#722ed1",text:"中继"}:{color:"#13c2c2",text:"终端"},ss=s=>s==="enterprise"?{color:"#1890ff",text:"企业"}:s==="government"?{color:"#722ed1",text:"政府"}:s==="education"?{color:"#52c41a",text:"教育"}:{color:"#fa8c16",text:"医疗"},pt={background:"linear-gradient(135deg, #ffffff 0%, #fafbfc 100%)",borderRadius:12,boxShadow:"0 4px 12px rgba(0,21,41,.08), 0 2px 4px rgba(0,21,41,.04)",border:"1px solid rgba(240,240,240,0.8)",marginBottom:20,transition:"all 0.3s ease"},qn=()=>{const[s]=c.useState(Ln),[l]=c.useState(Fn),[x,d]=c.useState("topo-c1-1"),[o,a]=c.useState(["c1","c2"]),n=c.useMemo(()=>l.find(t=>t.id===x)||l[0],[x]),p=c.useMemo(()=>s.find(t=>t.id===n.customerId),[s,n.customerId]),[g,_]=c.useState(n.nodes),[k,N]=c.useState(n.links),[w,$]=c.useState(null),[f,T]=c.useState(new Date),[j,W]=c.useState(""),[Z,te]=c.useState("all"),[K,ie]=c.useState("all"),[U,u]=c.useState(1),[b,D]=c.useState(!1),[m,r]=c.useState(n.layoutPreference),[S,L]=c.useState(n.labelMode),[E,Se]=c.useState(!1),[q,wt]=c.useState(!0),[fs,Ge]=c.useState(!1),[ue,Je]=c.useState(()=>{const t={};return n.nodes.forEach(i=>{t[i.id]=!0}),t}),oe=c.useRef(null),pe=c.useRef(null),Qe=c.useRef(null),Le=c.useRef(null);c.useEffect(()=>{const t=setInterval(()=>T(new Date),1e3);return()=>clearInterval(t)},[]),c.useEffect(()=>{const t=l.find(i=>i.id===x);if(t){_(t.nodes),N(t.links),r(t.layoutPreference),L(t.labelMode);const i={};t.nodes.forEach(I=>{i[I.id]=!0}),Je(i)}},[x]);const fe=c.useMemo(()=>{const t=g.length,i=g.filter(V=>V.status==="online").length,I=g.filter(V=>V.status==="offline").length,z=g.filter(V=>V.status==="warning").length,P=Math.round(k.filter(V=>V.latency>0).reduce((V,se)=>V+se.latency,0)/Math.max(1,k.filter(V=>V.latency>0).length)),H=Math.round(i/Math.max(1,t)*100);return{total:t,online:i,offline:I,warning:z,coverage:H,avgLatency:P}},[g,k]),hs=(t,i)=>{Je(I=>({...I,[t]:i}))},ms=t=>{const i=l.find(P=>P.id===t);if(!i)return;d(t),_(i.nodes),N(i.links),r(i.layoutPreference),L(i.labelMode),$(null);const I={};i.nodes.forEach(P=>{I[P.id]=!0}),Je(I);const z=s.find(P=>P.id===i.customerId);F.success(`已切换到拓扑图：${z==null?void 0:z.name} - ${i.name}`)},ys=()=>{const t=i=>{const I=l.filter(H=>H.customerId===i.id),z=()=>{switch(i.type){case"enterprise":return e.jsx(_t,{});case"government":return e.jsx(_t,{});case"education":return e.jsx(we,{});case"healthcare":return e.jsx(ee,{});default:return e.jsx(ee,{})}},P=I.map(H=>({title:e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",lineHeight:"1.5"},children:e.jsxs(h,{align:"center",children:[e.jsx("span",{style:{fontWeight:x===H.id?600:400,color:x===H.id?"#1890ff":"#262626",lineHeight:"1.5"},children:H.name}),e.jsxs(C,{color:"cyan",style:{fontSize:10,lineHeight:"1.2"},children:[H.nodes.length," 节点"]})]})}),key:H.id,icon:e.jsx(ft,{style:{color:"#52c41a"}}),isLeaf:!0}));return{title:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",lineHeight:"1.5"},children:[e.jsxs(h,{align:"center",children:[e.jsx("span",{style:{fontWeight:600,lineHeight:"1.5"},children:i.name}),e.jsx(C,{color:i.status==="active"?"green":"red",style:{lineHeight:"1.2"},children:i.status==="active"?"活跃":"停用"})]}),e.jsxs(C,{color:"blue",style:{lineHeight:"1.2"},children:[i.deviceCount," 设备"]})]}),key:i.id,icon:z(),children:P.length>0?P:void 0,isLeaf:P.length===0,selectable:!1}};return s.map(t)},gs=t=>{t.preventDefault(),u(i=>Math.max(.4,Math.min(2.5,i-t.deltaY*.0015)))},js=t=>{t.target.closest("[data-node]")||D(!0)},bs=()=>D(!1),vs=t=>{if(!b||!pe.current)return;const i=pe.current;i.scrollLeft-=t.movementX,i.scrollTop-=t.movementY},ws=(t,i)=>{i.stopPropagation(),i.preventDefault();const I=oe.current;if(!I)return;const z=I.getBoundingClientRect(),P=(i.clientX-z.left)/U,H=(i.clientY-z.top)/U;Le.current={id:t.id,offsetX:P-t.x,offsetY:H-t.y}},Cs=()=>{var t;(t=Qe.current)!=null&&t.requestFullscreen&&(Qe.current.requestFullscreen(),Se(!0))},Ss=()=>{document.exitFullscreen&&(document.exitFullscreen(),Se(!1))},Ct=()=>{u(t=>{const i=Math.min(3,t*1.2);return console.log("Zoom In:",t,"->",i),i})},St=()=>{u(t=>{const i=Math.max(.3,t/1.2);return console.log("Zoom Out:",t,"->",i),i})},It=()=>{console.log("Reset View called"),u(1),pe.current&&(pe.current.scrollLeft=0,pe.current.scrollTop=0,console.log("View reset: scale=1, scroll=(0,0)"));const t=l.find(i=>i.id===x);t&&(_(t.nodes.map(i=>({...i}))),console.log("Nodes reset to initial positions"),F.success("🔄 视图已重置到初始状态"))};c.useEffect(()=>{const t=()=>{Se(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",t),()=>document.removeEventListener("fullscreenchange",t)},[]),c.useEffect(()=>{const t=()=>{if(E&&oe.current){const i=q?window.innerWidth-350:window.innerWidth,I=window.innerHeight;oe.current.setAttribute("width",i.toString()),oe.current.setAttribute("height",I.toString())}};if(E)return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[E,q]),c.useEffect(()=>{const t=()=>{Le.current=null},i=I=>{if(!Le.current||!oe.current)return;const z=oe.current.getBoundingClientRect(),P=(I.clientX-z.left)/U,H=(I.clientY-z.top)/U,{id:V,offsetX:se,offsetY:ae}=Le.current,J=P-se,he=H-ae,me=Math.max(50,Math.min(1750,J)),ne=Math.max(50,Math.min(1150,he));_(ye=>ye.map(ce=>ce.id===V?{...ce,x:me,y:ne}:ce))};return document.addEventListener("mouseup",t),document.addEventListener("mousemove",i),()=>{document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",i)}},[U]);const kt=c.useMemo(()=>g.filter(t=>(Z==="all"||t.status===Z)&&(K==="all"||t.type===K)&&(!j||t.name.includes(j)||t.ip.includes(j)||t.mac.includes(j))),[g,Z,K,j]),et=c.useMemo(()=>g.filter(t=>ue[t.id]===!0),[g,ue]),Is=c.useMemo(()=>k.filter(t=>ue[t.source]===!0&&ue[t.target]===!0),[k,ue]);return e.jsxs("div",{style:{background:"transparent"},children:[e.jsx(R,{style:{...pt,marginBottom:24},bodyStyle:{padding:"20px 24px"},children:e.jsxs(h,{size:16,children:[e.jsx("div",{style:{background:"linear-gradient(135deg, #1890ff, #36cfc9)",borderRadius:12,padding:12,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(24,144,255,0.3)"},children:e.jsx(cs,{style:{fontSize:24,color:"#fff"}})}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,color:"#1a1a1a",fontSize:24,fontWeight:600,background:"linear-gradient(135deg, #1890ff, #722ed1)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"MESH 自组网拓扑图"}),e.jsxs("div",{style:{color:"#8c8c8c",fontSize:13,marginTop:4,fontWeight:500},children:["实时监控 · ",f.toLocaleString("zh-CN")]})]})]})}),e.jsxs(M,{gutter:[16,16],children:[e.jsx(v,{xs:24,xl:5,children:e.jsxs(R,{style:{...pt,background:"linear-gradient(135deg, #fff9e6 0%, #fff2cc 100%)",border:"1px solid rgba(250,140,22,0.2)",height:"calc(100vh - 200px)",display:"flex",flexDirection:"column"},title:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{background:"linear-gradient(135deg, #fa8c16, #ffa940)",borderRadius:8,padding:8,marginRight:12,display:"flex",alignItems:"center"},children:e.jsx(we,{style:{color:"#fff",fontSize:16}})}),e.jsx("span",{style:{color:"#fa8c16",fontWeight:600},children:"客户管理"})]}),bodyStyle:{padding:"16px",flex:1,overflow:"auto"},children:[p&&e.jsxs("div",{style:{marginBottom:16,padding:12,background:"linear-gradient(135deg, #fff, #fafafa)",borderRadius:8,border:"1px solid #f0f0f0"},children:[e.jsx("div",{style:{fontWeight:600,color:"#262626",marginBottom:4},children:p.name}),e.jsxs(h,{size:4,wrap:!0,children:[e.jsx(C,{color:ss(p.type).color,children:ss(p.type).text}),e.jsxs(C,{color:"green",children:[p.deviceCount," 设备"]})]}),e.jsxs("div",{style:{fontSize:12,color:"#8c8c8c",marginTop:4},children:["联系人：",p.contact]})]}),e.jsx(Zs,{showIcon:!0,defaultExpandedKeys:o,selectedKeys:[x],treeData:ys(),onSelect:t=>{if(t.length>0){const i=t[0];i.startsWith("topo-")&&ms(i)}},onExpand:t=>{a(t)},style:{background:"transparent",fontSize:13}})]})}),e.jsx(v,{xs:24,xl:19,children:e.jsx("div",{children:e.jsx(R,{style:{...pt,display:"flex",flexDirection:"column",height:"calc(100vh - 200px)",background:"linear-gradient(135deg, #001529 0%, #002140 100%)",border:"1px solid rgba(24,144,255,0.3)"},title:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{background:"linear-gradient(135deg, #1890ff, #36cfc9)",borderRadius:8,padding:8,marginRight:12,display:"flex",alignItems:"center"},children:e.jsx(ft,{style:{color:"#fff",fontSize:16}})}),e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[p==null?void 0:p.name," - 拓扑图视图"]}),e.jsxs(C,{color:"blue",style:{marginLeft:12,background:"rgba(24,144,255,0.2)",border:"1px solid rgba(24,144,255,0.4)",color:"#40a9ff"},children:["缩放: ",Math.round(U*100),"%"]})]}),bodyStyle:{display:"flex",flex:1,padding:0,overflow:"hidden",height:"calc(100vh - 280px)"},extra:e.jsxs(h,{size:8,wrap:!0,children:[e.jsxs(Q.Group,{value:S,onChange:t=>L(t.target.value),style:{borderRadius:6},size:"small",children:[e.jsx(Q.Button,{value:"latency",style:{borderRadius:"6px 0 0 6px"},children:"延迟"}),e.jsx(Q.Button,{value:"distance",children:"距离"}),e.jsx(Q.Button,{value:"rssi",children:"信号"}),e.jsx(Q.Button,{value:"bandwidth",children:"带宽"}),e.jsx(Q.Button,{value:"none",style:{borderRadius:"0 6px 6px 0"},children:"隐藏"})]}),e.jsx(X,{title:q?"隐藏侧边栏":"显示侧边栏",placement:"bottom",children:e.jsx(y,{icon:q?e.jsx(ht,{}):e.jsx(mt,{}),onClick:()=>wt(!q),size:"small",style:{borderRadius:6,background:q?"linear-gradient(135deg, #722ed1, #9254de)":"linear-gradient(135deg, #52c41a, #73d13d)",borderColor:q?"#722ed1":"#52c41a",color:"#fff",boxShadow:q?"0 2px 6px rgba(114,46,209,0.3)":"0 2px 6px rgba(82,196,26,0.3)"}})}),e.jsx(X,{title:"放大",placement:"bottom",children:e.jsx(y,{icon:e.jsx($t,{}),onClick:Ct,size:"small",style:{borderRadius:6,background:"linear-gradient(135deg, #13c2c2, #36cfc9)",borderColor:"#13c2c2",color:"#fff",boxShadow:"0 2px 6px rgba(19,194,194,0.3)"}})}),e.jsx(X,{title:"缩小",placement:"bottom",children:e.jsx(y,{icon:e.jsx(Mt,{}),onClick:St,size:"small",style:{borderRadius:6,background:"linear-gradient(135deg, #13c2c2, #36cfc9)",borderColor:"#13c2c2",color:"#fff",boxShadow:"0 2px 6px rgba(19,194,194,0.3)"}})}),e.jsx(X,{title:"重置视图",placement:"bottom",children:e.jsx(y,{icon:e.jsx(Et,{}),onClick:It,size:"small",style:{borderRadius:6,background:"linear-gradient(135deg, #fa8c16, #ffa940)",borderColor:"#fa8c16",color:"#fff",boxShadow:"0 2px 6px rgba(250,140,22,0.3)"}})}),e.jsx(X,{title:"刷新数据",placement:"bottom",children:e.jsx(y,{icon:e.jsx(Qs,{}),onClick:()=>{const t=l.find(i=>i.id===x);t&&(_(t.nodes),N(t.links))},size:"small",style:{borderRadius:6,background:"linear-gradient(135deg, #1890ff, #40a9ff)",borderColor:"#1890ff",color:"#fff",boxShadow:"0 2px 6px rgba(24,144,255,0.3)"}})}),e.jsx(X,{title:"导出SVG",placement:"bottom",children:e.jsx(y,{icon:e.jsx(en,{}),onClick:()=>{const t=oe.current;if(!t)return;const i=new Blob([t.outerHTML],{type:"image/svg+xml;charset=utf-8"}),I=URL.createObjectURL(i),z=document.createElement("a");z.href=I,z.download=`${(p==null?void 0:p.name)||"topology"}.svg`,z.click(),URL.revokeObjectURL(I),F.success("已导出为SVG")},size:"small",style:{borderRadius:6,background:"linear-gradient(135deg, #fa8c16, #ffa940)",borderColor:"#fa8c16",color:"#fff",boxShadow:"0 2px 6px rgba(250,140,22,0.3)"}})}),e.jsx(X,{title:"全屏显示",placement:"bottom",children:e.jsx(y,{icon:e.jsx(ls,{}),onClick:Cs,size:"small",style:{background:"linear-gradient(135deg, #1890ff, #40a9ff)",borderColor:"#1890ff",color:"#fff",borderRadius:6,boxShadow:"0 2px 6px rgba(24,144,255,0.3)"}})})]}),children:e.jsxs("div",{ref:Qe,style:{display:"flex",height:E?"100vh":"100%",width:"100%",overflow:"hidden"},children:[q&&e.jsx("div",{style:{width:350,background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",borderRight:"1px solid rgba(24,144,255,0.2)",display:"flex",flexDirection:"column",height:"100%",boxShadow:"2px 0 8px rgba(0,0,0,0.3)"},children:e.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",background:"transparent"},className:"sidebar-panels",children:[e.jsxs("div",{style:{height:E?"400px":"380px",flexShrink:0,marginBottom:"8px"},className:"panel-overview",children:[e.jsxs("div",{style:{background:"rgba(24,144,255,0.05)",borderRadius:"8px",marginBottom:"4px",padding:"12px 16px",color:"#ffffff",display:"flex",alignItems:"center"},children:[e.jsx(Ks,{style:{color:"#40a9ff",marginRight:8}}),e.jsx("span",{style:{fontWeight:600,color:"#ffffff"},children:"网络概览"})]}),e.jsx("div",{style:{height:E?"360px":"340px",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"0 8px 16px"},children:[e.jsx(M,{gutter:[8,8],style:{marginBottom:16},children:[{t:"总节点",v:fe.total,c:"#1890ff",icon:"🔗"},{t:"在线",v:fe.online,c:"#52c41a",icon:"🟢"},{t:"离线",v:fe.offline,c:"#ff4d4f",icon:"🔴"},{t:"异常",v:fe.warning,c:"#faad14",icon:"🟡"}].map((t,i)=>e.jsx(v,{span:12,children:e.jsxs("div",{style:{background:"rgba(255,255,255,0.08)",padding:12,borderRadius:8,border:`1px solid ${t.c}40`,textAlign:"center",backdropFilter:"blur(10px)"},children:[e.jsx("div",{style:{fontSize:16,marginBottom:4},children:t.icon}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:t.c},children:t.v}),e.jsx("div",{style:{fontSize:12,color:"#d9d9d9"},children:t.t})]})},i))}),e.jsxs(h,{direction:"vertical",size:8,style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:13},children:"覆盖率："}),e.jsxs(C,{color:"blue",style:{borderRadius:4},children:[fe.coverage,"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:13},children:"平均延迟："}),e.jsxs(C,{color:"purple",style:{borderRadius:4},children:[fe.avgLatency," ms"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:13},children:"连接数："}),e.jsx(C,{color:"geekblue",style:{borderRadius:4},children:k.length})]})]})]})})]}),e.jsxs("div",{style:{flex:1,minHeight:"200px",marginBottom:"8px"},className:"panel-nodes",children:[e.jsxs("div",{style:{background:"rgba(24,144,255,0.05)",borderRadius:"8px",marginBottom:"4px",padding:"12px 16px",color:"#ffffff",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(rs,{style:{color:"#b37feb",marginRight:8}}),e.jsx("span",{style:{fontWeight:600,color:"#ffffff"},children:"节点列表"})]}),e.jsx(Ve,{count:kt.length,style:{backgroundColor:"#722ed1"}})]}),e.jsx("div",{style:{height:"calc(100% - 44px)",overflow:"hidden"},children:e.jsxs("div",{style:{padding:"0 8px",height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{marginBottom:12,flexShrink:0},children:e.jsxs(h,{direction:"vertical",size:8,style:{width:"100%"},children:[e.jsx(Y,{allowClear:!0,prefix:e.jsx(Ke,{style:{color:"#722ed1"}}),placeholder:"搜索名称/IP/MAC",value:j,onChange:t=>W(t.target.value),size:"small",style:{borderRadius:4}}),e.jsxs(M,{gutter:6,children:[e.jsx(v,{span:12,children:e.jsx(O,{value:Z,style:{width:"100%"},size:"small",onChange:t=>te(t),options:[{label:"📊 全部",value:"all"},{label:"🟢 在线",value:"online"},{label:"🔴 离线",value:"offline"},{label:"🟡 异常",value:"warning"}]})}),e.jsx(v,{span:12,children:e.jsx(O,{value:K,style:{width:"100%"},size:"small",onChange:t=>ie(t),options:[{label:"🔗 全部",value:"all"},{label:"🌐 网关",value:"gateway"},{label:"📡 中继",value:"relay"},{label:"📱 终端",value:"terminal"}]})})]})]})}),e.jsx("div",{className:"custom-scrollbar",style:{flex:1,minHeight:0,overflow:"auto"},children:e.jsx(G,{dataSource:kt,size:"small",renderItem:t=>{const i=We(t.status),I=Ee(t.type),z=(w==null?void 0:w.id)===t.id;return e.jsx(G.Item,{style:{cursor:"pointer",background:z?"rgba(24,144,255,0.2)":"rgba(255,255,255,0.05)",borderRadius:6,padding:"8px 4px",marginBottom:4,border:z?"1px solid #40a9ff":"1px solid rgba(255,255,255,0.1)",transition:"all 0.2s ease"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[e.jsx(je,{checked:ue[t.id]??!0,onChange:P=>{P.stopPropagation(),hs(t.id,P.target.checked)},style:{marginRight:8}}),e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center"},onClick:()=>{$(t),Ge(!0)},children:[e.jsx(Ve,{status:i.badge,dot:!0,style:{marginRight:8},children:e.jsx(Ae,{icon:e.jsx(Xs,{}),size:"small",style:{background:I.color,border:`1px solid ${i.color}`}})}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontWeight:600,fontSize:12,color:"#ffffff",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.name}),e.jsx("div",{style:{fontSize:10,color:"#40a9ff",marginTop:1},children:t.ip}),e.jsx("div",{style:{fontSize:11,color:"#d9d9d9",marginTop:2},children:e.jsxs(h,{size:4,children:[e.jsx(C,{color:I.color,children:I.text}),e.jsx(C,{color:i.color,children:i.text})]})})]})]})]})})}})})]})})]})]})}),e.jsxs("div",{ref:pe,onWheel:gs,onMouseDown:js,onMouseUp:bs,onMouseMove:vs,style:{flex:1,height:"100%",overflow:"auto",background:E?"radial-gradient(ellipse at center, #001529 0%, #000000 100%)":"radial-gradient(ellipse at center, #0a1628 0%, #001529 100%)",borderRadius:E?0:q?"0 8px 8px 0":8,position:"relative",border:E?"none":"2px solid rgba(24,144,255,0.1)"},className:"topology-view",children:[E&&e.jsx("div",{style:{position:"absolute",top:20,right:20,background:"linear-gradient(135deg, rgba(0,21,41,0.95), rgba(0,33,64,0.95))",borderRadius:12,padding:"12px 16px",zIndex:1e3,backdropFilter:"blur(8px)",border:"1px solid rgba(24,144,255,0.3)",boxShadow:"0 8px 24px rgba(0,0,0,0.4)"},children:e.jsxs(h,{children:[e.jsxs(Q.Group,{value:S,onChange:t=>L(t.target.value),size:"small",children:[e.jsx(Q.Button,{value:"latency",children:"延迟"}),e.jsx(Q.Button,{value:"distance",children:"距离"}),e.jsx(Q.Button,{value:"rssi",children:"信号"}),e.jsx(Q.Button,{value:"bandwidth",children:"带宽"}),e.jsx(Q.Button,{value:"none",children:"隐藏"})]}),e.jsx(X,{title:q?"隐藏侧边栏":"显示侧边栏",children:e.jsx(y,{size:"small",icon:q?e.jsx(ht,{}):e.jsx(mt,{}),onClick:()=>wt(!q)})}),e.jsx(X,{title:"放大",children:e.jsx(y,{size:"small",icon:e.jsx($t,{}),onClick:Ct})}),e.jsx(X,{title:"缩小",children:e.jsx(y,{size:"small",icon:e.jsx(Mt,{}),onClick:St})}),e.jsx(X,{title:"重置视图",children:e.jsx(y,{size:"small",icon:e.jsx(Et,{}),onClick:It})}),e.jsx(X,{title:"退出全屏",children:e.jsx(y,{size:"small",icon:e.jsx(Gs,{}),onClick:Ss})})]})}),e.jsxs("div",{style:{width:E?q?"calc(100vw - 350px)":"100vw":1800,height:E?"100vh":1200},children:[e.jsxs("svg",{ref:oe,width:E?q?window.innerWidth-350:window.innerWidth:1800,height:E?window.innerHeight:1200,style:{transform:`scale(${U})`,transformOrigin:"0 0"},children:[e.jsxs("defs",{children:[e.jsx("marker",{id:"arrow-blue",markerWidth:"4",markerHeight:"4",refX:"4",refY:"2",orient:"auto",children:e.jsx("path",{d:"M0,0 L4,2 L0,4 Z",fill:"#40a9ff"})}),e.jsx("marker",{id:"arrow-cyan",markerWidth:"4",markerHeight:"4",refX:"4",refY:"2",orient:"auto",children:e.jsx("path",{d:"M0,0 L4,2 L0,4 Z",fill:"#36cfc9"})}),e.jsx("marker",{id:"arrow-red",markerWidth:"4",markerHeight:"4",refX:"4",refY:"2",orient:"auto",children:e.jsx("path",{d:"M0,0 L4,2 L0,4 Z",fill:"#ff4d4f"})})]}),Is.map(t=>{const i=et.find(tt=>tt.id===t.source),I=et.find(tt=>tt.id===t.target),z=t.bandwidth>0,P=z?"#40a9ff":"#ff4d4f",H=z?"#36cfc9":"#ff4d4f",V=z?Math.min(4,Math.max(2,2+t.bandwidth/30)):1.5,se=I.x-i.x,ae=I.y-i.y,J=Math.max(1,Math.hypot(se,ae)),he=-ae/J,me=se/J,ne=4,ye=i.type==="gateway"?20:i.type==="relay"?16:12,ce=I.type==="gateway"?20:I.type==="relay"?16:12,ks=i.x+he*ne+se/J*(ye+2),zs=i.y+me*ne+ae/J*(ye+2),Rs=I.x+he*ne-se/J*(ce+4),Ds=I.y+me*ne-ae/J*(ce+4),Ts=I.x-he*ne+-se/J*(ce+2),Bs=I.y-me*ne+-ae/J*(ce+2),$s=i.x-he*ne- -se/J*(ye+4),Ms=i.y-me*ne- -ae/J*(ye+4);return e.jsxs("g",{children:[e.jsx("line",{x1:ks,y1:zs,x2:Rs,y2:Ds,stroke:P,strokeWidth:V,opacity:z?.9:.6,strokeDasharray:z?"none":"4,2",markerEnd:`url(#${z?"arrow-blue":"arrow-red"})`}),e.jsx("line",{x1:Ts,y1:Bs,x2:$s,y2:Ms,stroke:H,strokeWidth:V,opacity:z?.8:.5,strokeDasharray:z?"none":"4,2",markerEnd:`url(#${z?"arrow-cyan":"arrow-red"})`}),S!=="none"&&e.jsxs("text",{x:(i.x+I.x)/2,y:(i.y+I.y)/2-6,fill:"#8c8c8c",fontSize:10,textAnchor:"middle",children:[S==="latency"&&`${t.latency}ms`,S==="distance"&&`${t.distance}m`,S==="rssi"&&`${t.rssi}dBm`,S==="bandwidth"&&`${t.bandwidth}Mbps`]})]},t.id)}),et.map(t=>{const i=We(t.status),I=Ee(t.type),z=t.type==="gateway"?20:t.type==="relay"?16:12,P=t.type==="gateway"?"#1890ff":t.type==="relay"?"#722ed1":"#13c2c2";return e.jsxs("g",{"data-node":!0,onMouseDown:H=>ws(t,H),onClick:()=>{$(t),Ge(!0)},children:[e.jsx("circle",{cx:t.x,cy:t.y,r:z+1.5,fill:P,opacity:.15}),e.jsx("circle",{cx:t.x,cy:t.y,r:z,fill:P,stroke:i.color,strokeWidth:2}),e.jsx("text",{x:t.x+z+6,y:t.y+4,fill:"#ffffff",fontSize:12,children:t.name}),e.jsxs("text",{x:t.x+z+6,y:t.y+18,fill:"#8c8c8c",fontSize:10,children:[I.text," · RSSI ",t.rssi,"dBm"]})]},t.id)})]}),fs&&w&&e.jsxs("div",{style:{position:"absolute",top:E?"80px":"20px",right:"20px",width:"320px",maxHeight:E?"calc(100% - 100px)":"calc(100% - 40px)",background:"linear-gradient(135deg, rgba(26,26,46,0.95) 0%, rgba(22,33,62,0.95) 50%, rgba(15,52,96,0.95) 100%)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(24,144,255,0.3)",backdropFilter:"blur(10px)",boxShadow:"0 8px 24px rgba(0,0,0,0.4)",zIndex:1001,overflow:"auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",paddingBottom:"12px",borderBottom:"1px solid rgba(24,144,255,0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(Js,{style:{color:"#ffc53d",marginRight:8}}),e.jsx("span",{style:{fontWeight:600,color:"#ffffff",fontSize:"16px"},children:"节点详情"})]}),e.jsx(y,{type:"text",size:"small",onClick:()=>Ge(!1),style:{color:"#8c8c8c",border:"none",background:"transparent"},children:"✕"})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.08)",padding:16,borderRadius:8,border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#ffffff",marginBottom:16,display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{marginRight:8},children:"🏷️"}),w.name]}),e.jsxs(h,{direction:"vertical",size:12,style:{width:"100%"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:14},children:"类型："}),e.jsx(C,{color:Ee(w.type).color,style:{fontSize:12},children:Ee(w.type).text})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:14},children:"状态："}),e.jsx(C,{color:We(w.status).color,style:{fontSize:12},children:We(w.status).text})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:14},children:"IP地址："}),e.jsx("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:4,fontSize:12,color:"#40a9ff"},children:w.ip})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:14},children:"信号强度："}),e.jsxs(C,{color:w.rssi>-60?"green":w.rssi>-75?"orange":"red",style:{fontSize:12},children:["📶 ",w.rssi," dBm"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#d9d9d9",fontSize:14},children:"连接数："}),e.jsxs(C,{color:"blue",style:{fontSize:12},children:["🔗 ",w.links.length," 个"]})]}),w.links.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{color:"#d9d9d9",fontSize:14,marginBottom:8},children:"相邻节点："}),e.jsx("div",{style:{background:"rgba(0,0,0,0.2)",padding:12,borderRadius:6,border:"1px solid rgba(255,255,255,0.1)"},children:e.jsx(h,{wrap:!0,size:[6,6],children:w.links.map(t=>{const i=g.find(I=>I.id===t);return i?e.jsx(C,{color:Ee(i.type).color,style:{cursor:"pointer",fontSize:11},onClick:()=>{$(i)},children:i.name},t):null})})})]})]})]})]})]})]})]})})})})]})]})},On=()=>{const s=vt(),l={background:"#ffffff",borderRadius:"8px",boxShadow:"0 1px 4px rgba(0,21,41,.08)",border:"1px solid #f0f0f0",marginBottom:"16px"},x=[{title:"用户总数",value:1234,prefix:e.jsx(ee,{style:{color:"#1890ff"}}),suffix:"人",description:"系统注册用户总数"},{title:"角色数量",value:12,prefix:e.jsx(de,{style:{color:"#722ed1"}}),suffix:"个",description:"系统配置角色数量"},{title:"权限数量",value:45,prefix:e.jsx(Ne,{style:{color:"#fa8c16"}}),suffix:"项",description:"系统权限配置总数"},{title:"在线用户",value:89,prefix:e.jsx(we,{style:{color:"#52c41a"}}),suffix:"人",description:"当前在线用户数量"}],d=[{title:"用户管理",description:"管理系统用户账号、权限分配和用户状态",icon:e.jsx(ee,{style:{fontSize:"32px",color:"#1890ff"}}),path:"/system/users",features:["用户列表","新增用户","编辑用户","用户状态管理"]},{title:"角色管理",description:"配置系统角色、分配权限和管理角色关系",icon:e.jsx(de,{style:{fontSize:"32px",color:"#722ed1"}}),path:"/system/roles",features:["角色列表","权限分配","角色编辑","用户关联"]},{title:"权限管理",description:"设置系统权限结构、管理访问控制规则",icon:e.jsx(Ne,{style:{fontSize:"32px",color:"#fa8c16"}}),path:"/system/permissions",features:["权限树结构","权限类型","访问控制","权限继承"]}],o=[{id:"1",operator:"管理员",operation:"新增用户",target:"张三",time:"5分钟前",status:"success"},{id:"2",operator:"管理员",operation:"编辑角色",target:"编辑员角色",time:"15分钟前",status:"success"},{id:"3",operator:"管理员",operation:"删除权限",target:"临时权限",time:"30分钟前",status:"success"},{id:"4",operator:"管理员",operation:"修改用户状态",target:"李四",time:"1小时前",status:"warning"},{id:"5",operator:"管理员",operation:"创建角色",target:"审核员角色",time:"2小时前",status:"success"}],a=n=>{const p={success:{color:"success",icon:e.jsx(Pe,{}),text:"成功"},warning:{color:"warning",icon:e.jsx(Nt,{}),text:"处理中"},error:{color:"error",icon:e.jsx(Nt,{}),text:"失败"}},g=p[n]||p.success;return e.jsx(C,{color:g.color,icon:g.icon,children:g.text})};return e.jsxs("div",{style:{background:"transparent"},children:[" ",e.jsx(R,{style:l,children:e.jsxs(M,{align:"middle",children:[e.jsx(v,{flex:"auto",children:e.jsxs(h,{size:"large",children:[e.jsx(He,{style:{fontSize:"32px",color:"#1890ff"}}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,color:"#262626"},children:"系统管理"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#8c8c8c"},children:"管理系统用户、角色和权限配置"})]})]})}),e.jsx(v,{children:e.jsx(C,{color:"processing",children:"管理模式"})})]})}),e.jsx(M,{gutter:[16,16],style:{marginBottom:"16px"},children:x.map((n,p)=>e.jsx(v,{xs:24,sm:12,lg:6,children:e.jsxs(R,{style:l,children:[e.jsx(_e,{title:n.title,value:n.value,prefix:n.prefix,suffix:n.suffix}),e.jsx("p",{style:{margin:"8px 0 0 0",color:"#8c8c8c",fontSize:"12px"},children:n.description})]})},p))}),e.jsx(M,{gutter:[16,16],style:{marginBottom:"16px"},children:d.map((n,p)=>e.jsx(v,{xs:24,lg:8,children:e.jsxs(R,{style:l,hoverable:!0,actions:[e.jsx(y,{type:"primary",icon:e.jsx(tn,{}),onClick:()=>s(n.path),children:"进入管理"})],children:[e.jsx(R.Meta,{avatar:n.icon,title:n.title,description:n.description}),e.jsxs("div",{style:{marginTop:"16px"},children:[e.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:500,color:"#262626"},children:"主要功能："}),e.jsx(h,{wrap:!0,children:n.features.map((g,_)=>e.jsx(C,{color:"blue",children:g},_))})]})]})},p))}),e.jsxs(M,{gutter:[16,16],children:[e.jsx(v,{xs:24,lg:16,children:e.jsx(R,{title:"最近操作记录",style:l,children:e.jsx(G,{dataSource:o,renderItem:n=>e.jsx(G.Item,{children:e.jsx(G.Item.Meta,{avatar:e.jsx(Ae,{icon:e.jsx(ee,{})}),title:e.jsxs(h,{children:[e.jsx("span",{children:n.operator}),e.jsx("span",{style:{color:"#8c8c8c"},children:n.operation}),e.jsx("span",{style:{fontWeight:500},children:n.target}),a(n.status)]}),description:n.time})})})})}),e.jsx(v,{xs:24,lg:8,children:e.jsx(R,{title:"系统状态",style:l,children:e.jsxs(h,{direction:"vertical",style:{width:"100%"},size:"middle",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"用户服务"}),e.jsx(C,{color:"success",children:"正常"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"权限服务"}),e.jsx(C,{color:"success",children:"正常"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"认证服务"}),e.jsx(C,{color:"success",children:"正常"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"数据库连接"}),e.jsx(C,{color:"success",children:"正常"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"缓存服务"}),e.jsx(C,{color:"warning",children:"警告"})]})]})})})]})]})},Wn=()=>{const[s,l]=c.useState([{id:"1",userId:"U001",userName:"张三",email:"zhangsan@example.com",role:"管理员",status:"active",createTime:"2024-01-15 10:30:00",lastLogin:"2024-08-09 09:15:00"},{id:"2",userId:"U002",userName:"李四",email:"lisi@example.com",role:"普通用户",status:"active",createTime:"2024-02-20 14:20:00",lastLogin:"2024-08-08 16:30:00"},{id:"3",userId:"U003",userName:"王五",email:"wangwu@example.com",role:"编辑员",status:"inactive",createTime:"2024-03-10 09:45:00",lastLogin:"2024-08-05 11:20:00"},{id:"4",userId:"U004",userName:"赵六",email:"zhaoliu@example.com",role:"普通用户",status:"active",createTime:"2024-04-05 16:15:00",lastLogin:"2024-08-09 08:45:00"},{id:"5",userId:"U005",userName:"钱七",email:"qianqi@example.com",role:"审核员",status:"active",createTime:"2024-05-12 11:30:00",lastLogin:"2024-08-07 14:10:00"}]),[x,d]=c.useState(!1),[o,a]=c.useState(""),[n,p]=c.useState(!1),[g,_]=c.useState(!1),[k,N]=c.useState(null),[w,$]=c.useState(null),[f]=B.useForm(),T={background:"#ffffff",borderRadius:"8px",boxShadow:"0 1px 4px rgba(0,21,41,.08)",border:"1px solid #f0f0f0",marginBottom:"16px"},j=b=>{const m={active:{color:"success",text:"启用"},inactive:{color:"error",text:"禁用"}}[b]||{color:"default",text:"未知"};return e.jsx(C,{color:m.color,children:m.text})},W=[{title:"用户信息",dataIndex:"userName",key:"userName",width:180,align:"center",render:(b,D)=>e.jsxs(h,{size:4,style:{whiteSpace:"nowrap"},children:[e.jsx(ee,{style:{color:"#1890ff",fontSize:"14px"}}),e.jsx("span",{style:{fontWeight:500},children:b}),e.jsx(C,{style:{margin:0,fontSize:"11px",padding:"0 4px"},children:D.userId})]})},{title:"邮箱",dataIndex:"email",key:"email",width:200,align:"center"},{title:"角色",dataIndex:"role",key:"role",width:120,align:"center"},{title:"状态",dataIndex:"status",key:"status",width:100,align:"center",render:b=>j(b)},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:160,align:"center",sorter:!0},{title:"最后登录",dataIndex:"lastLogin",key:"lastLogin",width:160,align:"center",sorter:!0},{title:"操作",key:"action",width:200,align:"center",render:(b,D)=>e.jsxs(h,{size:8,children:[e.jsx(y,{type:"link",icon:e.jsx(jt,{}),onClick:()=>ie(D),size:"small",children:"详情"}),e.jsx(y,{type:"link",icon:e.jsx(Ze,{}),onClick:()=>K(D),size:"small",children:"编辑"}),e.jsx(bt,{title:"确定要删除这个用户吗？",onConfirm:()=>U(D),okText:"确定",cancelText:"取消",children:e.jsx(y,{type:"link",danger:!0,icon:e.jsx(Ue,{}),size:"small",children:"删除"})})]})}],Z=s.filter(b=>b.userName.toLowerCase().includes(o.toLowerCase())||b.email.toLowerCase().includes(o.toLowerCase())||b.userId.toLowerCase().includes(o.toLowerCase())),te=()=>{N(null),f.resetFields(),p(!0)},K=b=>{N(b),f.setFieldsValue(b),p(!0)},ie=b=>{$(b),_(!0)},U=async b=>{d(!0);try{await xe(500),l(s.filter(D=>D.id!==b.id)),F.success("删除成功！")}catch{F.error("删除失败！")}finally{d(!1)}},u=async b=>{d(!0);try{if(await xe(1e3),k)l(s.map(D=>D.id===k.id?{...D,...b}:D)),F.success("编辑成功！");else{const D={id:Date.now().toString(),userId:`U${String(s.length+1).padStart(3,"0")}`,...b,createTime:new Date().toLocaleString("zh-CN"),lastLogin:"-"};l([...s,D]),F.success("新增成功！")}p(!1),f.resetFields()}catch{F.error("操作失败！")}finally{d(!1)}};return e.jsxs("div",{style:{background:"transparent"},children:[" ",e.jsx(R,{style:T,children:e.jsxs(M,{gutter:16,align:"middle",children:[e.jsx(v,{flex:"auto",children:e.jsx(Y.Search,{placeholder:"搜索用户名、邮箱或用户ID...",allowClear:!0,value:o,onChange:b=>a(b.target.value),style:{maxWidth:400},prefix:e.jsx(Ke,{})})}),e.jsx(v,{children:e.jsx(y,{type:"primary",icon:e.jsx(Ye,{}),onClick:te,children:"新增用户"})})]})}),e.jsx(R,{style:T,children:e.jsx(gt,{columns:W,dataSource:Z,rowKey:"id",loading:x,scroll:{x:"max-content"},pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:(b,D)=>`第 ${D[0]}-${D[1]} 条/共 ${b} 条`}})}),e.jsx(Ce,{title:k?"编辑用户":"新增用户",open:n,onCancel:()=>p(!1),footer:null,width:600,children:e.jsxs(B,{form:f,layout:"vertical",onFinish:u,children:[e.jsxs(M,{gutter:16,children:[e.jsx(v,{span:12,children:e.jsx(B.Item,{name:"userName",label:"用户名",rules:[{required:!0,message:"请输入用户名！"},{min:2,max:20,message:"用户名长度为2-20个字符！"}],children:e.jsx(Y,{placeholder:"请输入用户名"})})}),e.jsx(v,{span:12,children:e.jsx(B.Item,{name:"email",label:"邮箱",rules:[{required:!0,message:"请输入邮箱！"},{type:"email",message:"请输入有效的邮箱地址！"}],children:e.jsx(Y,{placeholder:"请输入邮箱"})})})]}),e.jsxs(M,{gutter:16,children:[e.jsx(v,{span:12,children:e.jsx(B.Item,{name:"role",label:"角色",rules:[{required:!0,message:"请选择角色！"}],children:e.jsxs(O,{placeholder:"请选择角色",children:[e.jsx(O.Option,{value:"管理员",children:"管理员"}),e.jsx(O.Option,{value:"编辑员",children:"编辑员"}),e.jsx(O.Option,{value:"审核员",children:"审核员"}),e.jsx(O.Option,{value:"普通用户",children:"普通用户"})]})})}),e.jsx(v,{span:12,children:e.jsx(B.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态！"}],children:e.jsxs(O,{placeholder:"请选择状态",children:[e.jsx(O.Option,{value:"active",children:"启用"}),e.jsx(O.Option,{value:"inactive",children:"禁用"})]})})})]}),e.jsx(B.Item,{style:{textAlign:"right",marginBottom:0},children:e.jsxs(h,{children:[e.jsx(y,{onClick:()=>p(!1),children:"取消"}),e.jsx(y,{type:"primary",htmlType:"submit",loading:x,children:k?"更新":"创建"})]})})]})}),e.jsx(Ce,{title:"用户详情",open:g,onCancel:()=>_(!1),footer:[e.jsx(y,{onClick:()=>_(!1),children:"关闭"},"close")],width:600,children:w&&e.jsxs(A,{column:2,bordered:!0,children:[e.jsx(A.Item,{label:"用户ID",children:w.userId}),e.jsx(A.Item,{label:"用户名",children:w.userName}),e.jsx(A.Item,{label:"邮箱",children:w.email}),e.jsx(A.Item,{label:"角色",children:w.role}),e.jsx(A.Item,{label:"状态",children:j(w.status)}),e.jsx(A.Item,{label:"创建时间",children:w.createTime}),e.jsx(A.Item,{label:"最后登录",span:2,children:w.lastLogin})]})})]})},Hn=()=>{const[s,l]=c.useState([{id:"1",roleName:"超级管理员",roleCode:"SUPER_ADMIN",description:"拥有系统所有权限的超级管理员",userCount:1,permissions:["user:read","user:write","user:delete","role:read","role:write","role:delete","permission:read","permission:write"],status:"active",createTime:"2024-01-01 00:00:00"},{id:"2",roleName:"管理员",roleCode:"ADMIN",description:"系统管理员，拥有大部分管理权限",userCount:3,permissions:["user:read","user:write","role:read","permission:read"],status:"active",createTime:"2024-01-15 10:30:00"},{id:"3",roleName:"编辑员",roleCode:"EDITOR",description:"内容编辑员，负责内容的编辑和管理",userCount:5,permissions:["user:read","content:read","content:write"],status:"active",createTime:"2024-02-01 14:20:00"},{id:"4",roleName:"审核员",roleCode:"AUDITOR",description:"内容审核员，负责内容的审核工作",userCount:2,permissions:["user:read","content:read","audit:read","audit:write"],status:"active",createTime:"2024-02-15 09:45:00"},{id:"5",roleName:"普通用户",roleCode:"USER",description:"系统普通用户，只有基本的查看权限",userCount:15,permissions:["user:read"],status:"active",createTime:"2024-03-01 16:15:00"}]),x=[{value:"user:read",label:"用户查看"},{value:"user:write",label:"用户编辑"},{value:"user:delete",label:"用户删除"},{value:"role:read",label:"角色查看"},{value:"role:write",label:"角色编辑"},{value:"role:delete",label:"角色删除"},{value:"permission:read",label:"权限查看"},{value:"permission:write",label:"权限编辑"},{value:"content:read",label:"内容查看"},{value:"content:write",label:"内容编辑"},{value:"audit:read",label:"审核查看"},{value:"audit:write",label:"审核操作"}],[d,o]=c.useState(!1),[a,n]=c.useState(""),[p,g]=c.useState(!1),[_,k]=c.useState(!1),[N,w]=c.useState(null),[$,f]=c.useState(null),[T]=B.useForm(),j={background:"#ffffff",borderRadius:"8px",boxShadow:"0 1px 4px rgba(0,21,41,.08)",border:"1px solid #f0f0f0",marginBottom:"16px"},W=m=>{const S={active:{color:"success",text:"启用"},inactive:{color:"error",text:"禁用"}}[m]||{color:"default",text:"未知"};return e.jsx(C,{color:S.color,children:S.text})},Z=m=>m.slice(0,3).map(r=>{const S=x.find(L=>L.value===r);return e.jsx(C,{style:{margin:"2px"},children:(S==null?void 0:S.label)||r},r)}).concat(m.length>3?[e.jsxs(C,{style:{margin:"2px"},children:["+",m.length-3]},"more")]:[]),te=[{title:"角色信息",dataIndex:"roleName",key:"roleName",width:180,align:"center",render:(m,r)=>e.jsxs(h,{size:4,style:{whiteSpace:"nowrap"},children:[e.jsx(de,{style:{color:"#722ed1",fontSize:"14px"}}),e.jsx("span",{style:{fontWeight:500},children:m}),e.jsx(C,{style:{margin:0,fontSize:"11px",padding:"0 4px"},children:r.roleCode})]})},{title:"描述",dataIndex:"description",key:"description",width:200,align:"center",ellipsis:!0},{title:"用户数量",dataIndex:"userCount",key:"userCount",width:100,align:"center",render:m=>e.jsxs(h,{children:[e.jsx(we,{style:{color:"#1890ff"}}),e.jsx("span",{children:m})]})},{title:"权限",dataIndex:"permissions",key:"permissions",width:200,align:"center",render:m=>e.jsx("div",{style:{textAlign:"center"},children:Z(m)})},{title:"状态",dataIndex:"status",key:"status",width:100,align:"center",render:m=>W(m)},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:160,align:"center",sorter:!0},{title:"操作",key:"action",width:200,align:"center",render:(m,r)=>e.jsxs(h,{size:8,children:[e.jsx(y,{type:"link",icon:e.jsx(jt,{}),onClick:()=>u(r),size:"small",children:"详情"}),e.jsx(y,{type:"link",icon:e.jsx(Ze,{}),onClick:()=>U(r),size:"small",children:"编辑"}),e.jsx(bt,{title:"确定要删除这个角色吗？",onConfirm:()=>b(r),okText:"确定",cancelText:"取消",children:e.jsx(y,{type:"link",danger:!0,icon:e.jsx(Ue,{}),size:"small",children:"删除"})})]})}],K=s.filter(m=>m.roleName.toLowerCase().includes(a.toLowerCase())||m.roleCode.toLowerCase().includes(a.toLowerCase())||m.description.toLowerCase().includes(a.toLowerCase())),ie=()=>{w(null),T.resetFields(),g(!0)},U=m=>{w(m),T.setFieldsValue(m),g(!0)},u=m=>{f(m),k(!0)},b=async m=>{o(!0);try{await xe(500),l(s.filter(r=>r.id!==m.id)),F.success("删除成功！")}catch{F.error("删除失败！")}finally{o(!1)}},D=async m=>{o(!0);try{if(await xe(1e3),N)l(s.map(r=>r.id===N.id?{...r,...m}:r)),F.success("编辑成功！");else{const r={id:Date.now().toString(),...m,userCount:0,createTime:new Date().toLocaleString("zh-CN")};l([...s,r]),F.success("新增成功！")}g(!1),T.resetFields()}catch{F.error("操作失败！")}finally{o(!1)}};return e.jsxs("div",{style:{background:"transparent"},children:[" ",e.jsx(R,{style:j,children:e.jsxs(M,{gutter:16,align:"middle",children:[e.jsx(v,{flex:"auto",children:e.jsx(Y.Search,{placeholder:"搜索角色名称、代码或描述...",allowClear:!0,value:a,onChange:m=>n(m.target.value),style:{maxWidth:400},prefix:e.jsx(Ke,{})})}),e.jsx(v,{children:e.jsx(y,{type:"primary",icon:e.jsx(Ye,{}),onClick:ie,children:"新增角色"})})]})}),e.jsx(R,{style:j,children:e.jsx(gt,{columns:te,dataSource:K,rowKey:"id",loading:d,scroll:{x:"max-content"},pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:(m,r)=>`第 ${r[0]}-${r[1]} 条/共 ${m} 条`}})}),e.jsx(Ce,{title:N?"编辑角色":"新增角色",open:p,onCancel:()=>g(!1),footer:null,width:700,children:e.jsxs(B,{form:T,layout:"vertical",onFinish:D,children:[e.jsxs(M,{gutter:16,children:[e.jsx(v,{span:12,children:e.jsx(B.Item,{name:"roleName",label:"角色名称",rules:[{required:!0,message:"请输入角色名称！"},{min:2,max:20,message:"角色名称长度为2-20个字符！"}],children:e.jsx(Y,{placeholder:"请输入角色名称"})})}),e.jsx(v,{span:12,children:e.jsx(B.Item,{name:"roleCode",label:"角色代码",rules:[{required:!0,message:"请输入角色代码！"},{pattern:/^[A-Z_]+$/,message:"角色代码只能包含大写字母和下划线！"}],children:e.jsx(Y,{placeholder:"请输入角色代码"})})})]}),e.jsx(B.Item,{name:"description",label:"角色描述",rules:[{required:!0,message:"请输入角色描述！"}],children:e.jsx(Y.TextArea,{rows:3,placeholder:"请输入角色描述"})}),e.jsx(B.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态！"}],children:e.jsx(je.Group,{children:e.jsx(je,{value:"active",children:"启用"})})}),e.jsx(Pt,{children:"权限分配"}),e.jsx(B.Item,{name:"permissions",label:"权限列表",rules:[{required:!0,message:"请选择至少一个权限！"}],children:e.jsx(je.Group,{children:e.jsx(M,{gutter:[16,8],children:x.map(m=>e.jsx(v,{span:8,children:e.jsx(je,{value:m.value,children:m.label})},m.value))})})}),e.jsx(B.Item,{style:{textAlign:"right",marginBottom:0},children:e.jsxs(h,{children:[e.jsx(y,{onClick:()=>g(!1),children:"取消"}),e.jsx(y,{type:"primary",htmlType:"submit",loading:d,children:N?"更新":"创建"})]})})]})}),e.jsx(Ce,{title:"角色详情",open:_,onCancel:()=>k(!1),footer:[e.jsx(y,{onClick:()=>k(!1),children:"关闭"},"close")],width:700,children:$&&e.jsxs(e.Fragment,{children:[e.jsxs(A,{column:2,bordered:!0,children:[e.jsx(A.Item,{label:"角色名称",children:$.roleName}),e.jsx(A.Item,{label:"角色代码",children:$.roleCode}),e.jsx(A.Item,{label:"用户数量",children:$.userCount}),e.jsx(A.Item,{label:"状态",children:W($.status)}),e.jsx(A.Item,{label:"创建时间",span:2,children:$.createTime}),e.jsx(A.Item,{label:"角色描述",span:2,children:$.description})]}),e.jsx(Pt,{children:"权限列表"}),e.jsx("div",{children:$.permissions.map(m=>{const r=x.find(S=>S.value===m);return e.jsx(C,{style:{margin:"4px"},children:(r==null?void 0:r.label)||m},m)})})]})})]})},Vn=()=>{const[s,l]=c.useState([{id:"1",permissionName:"系统管理",permissionCode:"system",permissionType:"menu",parentId:null,description:"系统管理模块菜单权限",status:"active",createTime:"2024-01-01 00:00:00"},{id:"2",permissionName:"用户管理",permissionCode:"system:user",permissionType:"menu",parentId:"1",description:"用户管理页面访问权限",status:"active",createTime:"2024-01-01 00:00:00"},{id:"3",permissionName:"用户查看",permissionCode:"user:read",permissionType:"api",parentId:"2",description:"查看用户信息的API权限",status:"active",createTime:"2024-01-01 00:00:00"},{id:"4",permissionName:"用户编辑",permissionCode:"user:write",permissionType:"api",parentId:"2",description:"编辑用户信息的API权限",status:"active",createTime:"2024-01-01 00:00:00"},{id:"5",permissionName:"新增用户按钮",permissionCode:"user:add:button",permissionType:"button",parentId:"2",description:"新增用户按钮显示权限",status:"active",createTime:"2024-01-01 00:00:00"},{id:"6",permissionName:"角色管理",permissionCode:"system:role",permissionType:"menu",parentId:"1",description:"角色管理页面访问权限",status:"active",createTime:"2024-01-01 00:00:00"},{id:"7",permissionName:"角色查看",permissionCode:"role:read",permissionType:"api",parentId:"6",description:"查看角色信息的API权限",status:"active",createTime:"2024-01-01 00:00:00"},{id:"8",permissionName:"权限管理",permissionCode:"system:permission",permissionType:"menu",parentId:"1",description:"权限管理页面访问权限",status:"active",createTime:"2024-01-01 00:00:00"}]),[x,d]=c.useState(!1),[o,a]=c.useState(""),[n,p]=c.useState(!1),[g,_]=c.useState(!1),[k,N]=c.useState(null),[w,$]=c.useState(null),[f]=B.useForm(),T={background:"#ffffff",borderRadius:"8px",boxShadow:"0 1px 4px rgba(0,21,41,.08)",border:"1px solid #f0f0f0",marginBottom:"16px"},j=r=>{const L={menu:{color:"blue",text:"菜单",icon:e.jsx(ns,{})},button:{color:"green",text:"按钮",icon:e.jsx(rn,{})},api:{color:"orange",text:"API",icon:e.jsx(nn,{})}}[r]||{color:"default",text:"未知",icon:null};return e.jsx(C,{color:L.color,icon:L.icon,children:L.text})},W=r=>{const L={active:{color:"success",text:"启用"},inactive:{color:"error",text:"禁用"}}[r]||{color:"default",text:"未知"};return e.jsx(C,{color:L.color,children:L.text})},Z=r=>{if(!r)return"-";const S=s.find(L=>L.id===r);return S?S.permissionName:"-"},te=()=>{const r=[],S=s.filter(E=>E.parentId===null),L=E=>{const Se=s.filter(q=>q.parentId===E.id);return{title:E.permissionName,value:E.id,key:E.id,children:Se.map(q=>L(q))}};return S.forEach(E=>{r.push(L(E))}),r},K=[{title:"权限信息",dataIndex:"permissionName",key:"permissionName",width:200,align:"center",render:r=>e.jsxs(h,{size:4,style:{whiteSpace:"nowrap"},children:[e.jsx(Ne,{style:{color:"#fa8c16",fontSize:"14px"}}),e.jsx("span",{style:{fontWeight:500},children:r})]})},{title:"权限代码",dataIndex:"permissionCode",key:"permissionCode",width:150,align:"center",render:r=>e.jsx(C,{style:{fontFamily:"monospace"},children:r})},{title:"权限类型",dataIndex:"permissionType",key:"permissionType",width:100,align:"center",render:r=>j(r)},{title:"父级权限",dataIndex:"parentId",key:"parentId",width:120,align:"center",render:r=>Z(r)},{title:"描述",dataIndex:"description",key:"description",width:200,align:"center",ellipsis:!0},{title:"状态",dataIndex:"status",key:"status",width:100,align:"center",render:r=>W(r)},{title:"创建时间",dataIndex:"createTime",key:"createTime",width:160,align:"center",sorter:!0},{title:"操作",key:"action",width:200,align:"center",render:(r,S)=>e.jsxs(h,{size:8,children:[e.jsx(y,{type:"link",icon:e.jsx(jt,{}),onClick:()=>b(S),size:"small",children:"详情"}),e.jsx(y,{type:"link",icon:e.jsx(Ze,{}),onClick:()=>u(S),size:"small",children:"编辑"}),e.jsx(bt,{title:"确定要删除这个权限吗？",onConfirm:()=>D(S),okText:"确定",cancelText:"取消",children:e.jsx(y,{type:"link",danger:!0,icon:e.jsx(Ue,{}),size:"small",children:"删除"})})]})}],ie=s.filter(r=>r.permissionName.toLowerCase().includes(o.toLowerCase())||r.permissionCode.toLowerCase().includes(o.toLowerCase())||r.description.toLowerCase().includes(o.toLowerCase())),U=()=>{N(null),f.resetFields(),p(!0)},u=r=>{N(r),f.setFieldsValue(r),p(!0)},b=r=>{$(r),_(!0)},D=async r=>{d(!0);try{await xe(500),l(s.filter(S=>S.id!==r.id)),F.success("删除成功！")}catch{F.error("删除失败！")}finally{d(!1)}},m=async r=>{d(!0);try{if(await xe(1e3),k)l(s.map(S=>S.id===k.id?{...S,...r}:S)),F.success("编辑成功！");else{const S={id:Date.now().toString(),...r,createTime:new Date().toLocaleString("zh-CN")};l([...s,S]),F.success("新增成功！")}p(!1),f.resetFields()}catch{F.error("操作失败！")}finally{d(!1)}};return e.jsxs("div",{style:{background:"transparent"},children:[" ",e.jsx(R,{style:T,children:e.jsxs(M,{gutter:16,align:"middle",children:[e.jsx(v,{flex:"auto",children:e.jsx(Y.Search,{placeholder:"搜索权限名称、代码或描述...",allowClear:!0,value:o,onChange:r=>a(r.target.value),style:{maxWidth:400},prefix:e.jsx(Ke,{})})}),e.jsx(v,{children:e.jsx(y,{type:"primary",icon:e.jsx(Ye,{}),onClick:U,children:"新增权限"})})]})}),e.jsx(R,{style:T,children:e.jsx(gt,{columns:K,dataSource:ie,rowKey:"id",loading:x,scroll:{x:"max-content"},pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:(r,S)=>`第 ${S[0]}-${S[1]} 条/共 ${r} 条`}})}),e.jsx(Ce,{title:k?"编辑权限":"新增权限",open:n,onCancel:()=>p(!1),footer:null,width:600,children:e.jsxs(B,{form:f,layout:"vertical",onFinish:m,children:[e.jsxs(M,{gutter:16,children:[e.jsx(v,{span:12,children:e.jsx(B.Item,{name:"permissionName",label:"权限名称",rules:[{required:!0,message:"请输入权限名称！"},{min:2,max:50,message:"权限名称长度为2-50个字符！"}],children:e.jsx(Y,{placeholder:"请输入权限名称"})})}),e.jsx(v,{span:12,children:e.jsx(B.Item,{name:"permissionCode",label:"权限代码",rules:[{required:!0,message:"请输入权限代码！"},{pattern:/^[a-z:_]+$/,message:"权限代码只能包含小写字母、冒号和下划线！"}],children:e.jsx(Y,{placeholder:"请输入权限代码"})})})]}),e.jsxs(M,{gutter:16,children:[e.jsx(v,{span:12,children:e.jsx(B.Item,{name:"permissionType",label:"权限类型",rules:[{required:!0,message:"请选择权限类型！"}],children:e.jsxs(O,{placeholder:"请选择权限类型",children:[e.jsx(O.Option,{value:"menu",children:"菜单"}),e.jsx(O.Option,{value:"button",children:"按钮"}),e.jsx(O.Option,{value:"api",children:"API"})]})})}),e.jsx(v,{span:12,children:e.jsx(B.Item,{name:"parentId",label:"父级权限",children:e.jsx(sn,{placeholder:"请选择父级权限",allowClear:!0,treeData:te()})})})]}),e.jsx(B.Item,{name:"description",label:"权限描述",rules:[{required:!0,message:"请输入权限描述！"}],children:e.jsx(Y.TextArea,{rows:3,placeholder:"请输入权限描述"})}),e.jsx(B.Item,{name:"status",label:"状态",rules:[{required:!0,message:"请选择状态！"}],children:e.jsxs(O,{placeholder:"请选择状态",children:[e.jsx(O.Option,{value:"active",children:"启用"}),e.jsx(O.Option,{value:"inactive",children:"禁用"})]})}),e.jsx(B.Item,{style:{textAlign:"right",marginBottom:0},children:e.jsxs(h,{children:[e.jsx(y,{onClick:()=>p(!1),children:"取消"}),e.jsx(y,{type:"primary",htmlType:"submit",loading:x,children:k?"更新":"创建"})]})})]})}),e.jsx(Ce,{title:"权限详情",open:g,onCancel:()=>_(!1),footer:[e.jsx(y,{onClick:()=>_(!1),children:"关闭"},"close")],width:600,children:w&&e.jsxs(A,{column:2,bordered:!0,children:[e.jsx(A.Item,{label:"权限名称",children:w.permissionName}),e.jsx(A.Item,{label:"权限代码",children:w.permissionCode}),e.jsx(A.Item,{label:"权限类型",children:j(w.permissionType)}),e.jsx(A.Item,{label:"父级权限",children:Z(w.parentId)}),e.jsx(A.Item,{label:"状态",children:W(w.status)}),e.jsx(A.Item,{label:"创建时间",children:w.createTime}),e.jsx(A.Item,{label:"权限描述",span:2,children:w.description})]})})]})},{Header:Un,Sider:Yn,Content:Zn}=yt;function Kn(){const[s,l]=c.useState(!1),[x,d]=c.useState(!0),o=vt(),a=un(),n=[{key:"/",icon:e.jsx(an,{}),label:"首页"},{key:"/dashboard",icon:e.jsx(cn,{}),label:"态势大屏"},{key:"/video-monitoring",icon:e.jsx(ve,{}),label:"视频监控"},{key:"/topology-management",icon:e.jsx(cs,{}),label:"拓扑图管理"},{key:"/system",icon:e.jsx(He,{}),label:"系统管理",children:[{key:"/system/users",label:"用户管理"},{key:"/system/roles",label:"角色管理"},{key:"/system/permissions",label:"权限管理"}]}],p=[{key:"profile",icon:e.jsx(ee,{}),label:"个人信息"},{type:"divider"},{key:"logout",icon:e.jsx(dn,{}),label:"退出登录",onClick:()=>{d(!1),o("/login")}}];return x?e.jsxs(yt,{style:{minHeight:"100vh"},children:[e.jsxs(Yn,{trigger:null,collapsible:!0,collapsed:s,style:{background:"#fff"},children:[e.jsx("div",{style:{height:32,margin:16,background:"#f0f2f5",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",color:"#1890ff",fontWeight:"bold"},children:s?"MS":"管理系统"}),e.jsx(ln,{theme:"light",mode:"inline",selectedKeys:[a.pathname],defaultOpenKeys:["/system"],items:n,onClick:({key:g})=>{o(g)},style:{background:"#fff",border:"none"}})]}),e.jsxs(yt,{children:[e.jsxs(Un,{style:{padding:"0 16px",background:"#fff",boxShadow:"0 1px 4px rgba(0,21,41,.08)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(y,{type:"text",icon:s?e.jsx(mt,{}):e.jsx(ht,{}),onClick:()=>l(!s),style:{fontSize:"16px",width:64,height:64}}),e.jsx(on,{menu:{items:p},placement:"bottomRight",children:e.jsxs(h,{style:{cursor:"pointer"},children:[e.jsx(Ae,{icon:e.jsx(ee,{})}),e.jsx("span",{children:"管理员"})]})})]}),e.jsx(Zn,{style:{background:"transparent",margin:"16px",minHeight:"calc(100vh - 112px)"},children:e.jsxs(pn,{children:[e.jsx(re,{path:"/",element:e.jsx(Mn,{})}),e.jsx(re,{path:"/login",element:e.jsx(ts,{onLogin:()=>d(!0)})}),e.jsx(re,{path:"/dashboard",element:e.jsx(_n,{})}),e.jsx(re,{path:"/video-monitoring",element:e.jsx(An,{})}),e.jsx(re,{path:"/topology-management",element:e.jsx(qn,{})}),e.jsx(re,{path:"/system",element:e.jsx(On,{})}),e.jsx(re,{path:"/system/users",element:e.jsx(Wn,{})}),e.jsx(re,{path:"/system/roles",element:e.jsx(Hn,{})}),e.jsx(re,{path:"/system/permissions",element:e.jsx(Vn,{})})]})})]})]}):e.jsx(ts,{onLogin:()=>d(!0)})}gn.createRoot(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(fn,{children:e.jsx(xn,{locale:Tn,children:e.jsx(Kn,{})})})}));
